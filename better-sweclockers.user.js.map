{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/milliseconds/milliseconds.js","webpack:///./node_modules/classnames/index.js","webpack:///./src/lib/proofreading/style.scss?fd88","webpack:///./src/stylesheets/autosave-draft.scss?6f8d","webpack:///./src/stylesheets/dark-theme-toggle-preparations.scss?e3bd","webpack:///./src/stylesheets/dark-theme-toggle.scss?45f0","webpack:///./src/stylesheets/developer-mode.scss?be19","webpack:///./src/stylesheets/doge.scss?0e6c","webpack:///./src/stylesheets/down-for-maintenance.scss?ab35","webpack:///./src/stylesheets/editing-tools.scss?59db","webpack:///./src/stylesheets/hide-footer.scss?84aa","webpack:///./src/stylesheets/highlight-own-posts.scss?4b96","webpack:///./src/stylesheets/improved-corrections.scss?71b8","webpack:///./src/stylesheets/improved-image-controls.scss?a60b","webpack:///./src/stylesheets/improved-pagination-buttons.scss?27ee","webpack:///./src/stylesheets/lock-heights.scss?1308","webpack:///./src/stylesheets/main.scss?637f","webpack:///./src/stylesheets/mention-everyone.scss?4a8b","webpack:///./src/stylesheets/preferences-link.scss?cad6","webpack:///./src/stylesheets/preferences-shortcut.scss?7bf5","webpack:///./src/stylesheets/preferences.scss?151e","webpack:///./src/stylesheets/replace-followed-threads-link.scss?a796","webpack:///./src/stylesheets/textarea-size-toggle.scss?3882","webpack:///./src/stylesheets/uninteresting-subforums.scss?dbbe","webpack:///./node_modules/mousetrap/mousetrap.js","webpack:///./node_modules/array-uniq/index.js","webpack:///./node_modules/escape-string-regexp/index.js","webpack:///./node_modules/css.escape/css.escape.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/lib/proofreading/style.scss","webpack:///./src/stylesheets/autosave-draft.scss","webpack:///./src/stylesheets/dark-theme-toggle-preparations.scss","webpack:///./src/stylesheets/dark-theme-toggle.scss","webpack:///./src/stylesheets/developer-mode.scss","webpack:///./src/stylesheets/doge.scss","webpack:///./src/stylesheets/down-for-maintenance.scss","webpack:///./src/stylesheets/editing-tools.scss","webpack:///./src/stylesheets/hide-footer.scss","webpack:///./src/stylesheets/highlight-own-posts.scss","webpack:///./src/stylesheets/improved-corrections.scss","webpack:///./src/stylesheets/improved-image-controls.scss","webpack:///./src/stylesheets/improved-pagination-buttons.scss","webpack:///./src/stylesheets/lock-heights.scss","webpack:///./src/stylesheets/main.scss","webpack:///./src/stylesheets/mention-everyone.scss","webpack:///./src/stylesheets/preferences-link.scss","webpack:///./src/stylesheets/preferences-shortcut.scss","webpack:///./src/stylesheets/preferences.scss","webpack:///./src/stylesheets/replace-followed-threads-link.scss","webpack:///./src/stylesheets/textarea-size-toggle.scss","webpack:///./src/stylesheets/uninteresting-subforums.scss","webpack:///./node_modules/@typed/compose/lib.es2015/compose.js","webpack:///./node_modules/userscripter/lib/environment.mjs","webpack:///./node_modules/lines-unlines/dist/index.mjs","webpack:///./node_modules/userscripter/lib/errors.mjs","webpack:///./node_modules/userscripter/lib/log.mjs","webpack:///./node_modules/userscripter/lib/stylesheets.mjs","webpack:///./node_modules/ts-type-guards/dist/is.mjs","webpack:///./node_modules/userscripter/lib/operations.mjs","webpack:///./node_modules/userscripter/lib/userscripter.mjs","webpack:///./src/userscript.ts","webpack:///./src/utilities.ts","webpack:///./src/search-engines.ts","webpack:///./src/config.ts","webpack:///./src/site.ts","webpack:///./src/environment.ts","webpack:///./node_modules/ts-storage/dist/index.mjs","webpack:///./node_modules/ts-preferences/dist/Utilities.mjs","webpack:///./node_modules/ts-preferences/dist/preferences/Preference.mjs","webpack:///./node_modules/ts-preferences/dist/PreferenceManager.mjs","webpack:///./node_modules/userscripter/lib/preferences.mjs","webpack:///./src/dark-theme.ts","webpack:///./node_modules/bbcode-tags/dist/index.mjs","webpack:///./src/browser.ts","webpack:///./src/text.ts","webpack:///./node_modules/ts-preferences/dist/preferences/BooleanPreference.mjs","webpack:///./node_modules/ts-preferences/dist/preferences/MultichoicePreference.mjs","webpack:///./node_modules/ts-preferences/dist/preferences/StringPreference.mjs","webpack:///./src/preferences/advanced.ts","webpack:///./src/preferences/customize-content.ts","webpack:///./node_modules/ts-preferences/dist/preferences/NumericPreference.mjs","webpack:///./node_modules/ts-preferences/dist/preferences/IntegerPreference.mjs","webpack:///./node_modules/ts-preferences/dist/preferences/RangePreference.mjs","webpack:///./node_modules/ts-preferences/dist/preferences/IntegerRangePreference.mjs","webpack:///./src/preferences/TimePreference.ts","webpack:///./src/preferences/dark-theme.ts","webpack:///./src/preferences/edit-mode.ts","webpack:///./node_modules/preact/dist/preact.module.js","webpack:///./node_modules/text-field-edit/index.js","webpack:///./src/operations/logic/textarea.ts","webpack:///./src/operations/actions/replace-spaces-with-nbsps.ts","webpack:///./src/operations/actions/search-link.ts","webpack:///./src/operations/actions/shibe.ts","webpack:///./src/operations/actions/split-quote.ts","webpack:///./src/operations/logic/smileys.ts","webpack:///./src/operations/logic/editing-tools.tsx","webpack:///./src/icons/search-link.svg","webpack:///./src/icons/quote.svg","webpack:///./src/icons/split-quote.svg","webpack:///./src/icons/expander.svg","webpack:///./src/operations/logic/render.ts","webpack:///./src/preferences/editing-tools.ts","webpack:///./src/preferences/forum-threads.ts","webpack:///./src/preferences/general.ts","webpack:///./node_modules/ts-preferences/dist/preferences/ListPreference.mjs","webpack:///./src/preferences/interests.ts","webpack:///./src/actions.ts","webpack:///./src/preferences/keyboard.ts","webpack:///./src/preferences.ts","webpack:///./src/selectors.ts","webpack:///./src/operations/edit-mode.ts","webpack:///./src/operations/autosave-draft.ts","webpack:///./src/icons/dark-theme-toggle.svg","webpack:///./src/stylesheets/hide.ts","webpack:///./src/time.ts","webpack:///./src/stylesheets.ts","webpack:///./src/operations/dark-theme.tsx","webpack:///./src/operations/draft-mode-toggle.ts","webpack:///./src/operations/editing-tools.tsx","webpack:///./src/operations/heading-toolbar-button.tsx","webpack:///./src/operations/improved-builtin-editing-tools-url.ts","webpack:///./src/operations/improved-corrections.ts","webpack:///./src/operations/prevent-accidental-unload.ts","webpack:///./src/operations/logic/click.ts","webpack:///./src/operations/keyboard-shortcuts/edit-mode.ts","webpack:///./src/operations/link-to-top.tsx","webpack:///./src/operations/mention-everyone.tsx","webpack:///./node_modules/ts-type-guards/dist/only.mjs","webpack:///./src/operations/pm-links.tsx","webpack:///./node_modules/ts-preferences/dist/preferences/DoublePreference.mjs","webpack:///./node_modules/ts-preferences/dist/preferences/DoubleRangePreference.mjs","webpack:///./src/preferences-menu.tsx","webpack:///./src/operations/preferences-menu.tsx","webpack:///./node_modules/highlight-mistakes/dist/utilities.mjs","webpack:///./node_modules/highlight-mistakes/dist/rules.mjs","webpack:///./node_modules/@alling/sweclockers-writing-rules/dist/index.mjs","webpack:///./node_modules/highlight-mistakes/dist/core.mjs","webpack:///./src/lib/proofreading/classes.ts","webpack:///./src/lib/proofreading/index.ts","webpack:///./src/operations/proofreading.ts","webpack:///./src/operations/quote-signature-buttons.tsx","webpack:///./src/operations/remove-mobile-site-disclaimer.ts","webpack:///./src/operations/replace-followed-threads-link.ts","webpack:///./src/operations/table-toolbar-button.tsx","webpack:///./src/operations/textarea-size-toggle.tsx","webpack:///./src/icons/textarea-small.svg","webpack:///./src/icons/textarea-large.svg","webpack:///./src/operations.ts","webpack:///./src/operations/uninteresting-subforums.ts","webpack:///./src/operations/caret-position.ts","webpack:///./src/operations/improved-builtin-editing-tools.ts","webpack:///./src/operations/preferences-shortcut.tsx","webpack:///./src/operations/prevent-accidental-signout.ts","webpack:///./src/operations/preferences-link.tsx","webpack:///./src/icons/pm.svg","webpack:///./src/operations/remember-location-in-market.ts","webpack:///./src/operations/mousetrap-preparations.ts","webpack:///./src/operations/developer-mode.tsx","webpack:///./src/main.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","concat","sourceURLs","sources","source","sourceRoot","join","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","length","id","_i","push","calc","Math","round","seconds","minutes","hours","days","weeks","months","years","hasOwn","classNames","classes","arguments","arg","argType","Array","isArray","inner","apply","default","result","window","document","undefined","_REVERSE_MAP","_MAP","8","9","13","16","17","18","20","27","32","33","34","35","36","37","38","39","40","45","46","91","93","224","_KEYCODE_MAP","106","107","109","110","111","186","187","188","189","190","191","192","219","220","221","222","_SHIFT_MAP","_SPECIAL_ALIASES","test","navigator","platform","Mousetrap","keys","callback","action","_bindMultiple","unbind","trigger","_directMap","reset","_callbacks","stopCallback","e","element","className","indexOf","_belongsTo","ancestor","parentNode","target","composedPath","initialEventTarget","tagName","isContentEditable","handleKey","self","_handleKey","addKeycodes","init","documentMousetrap","method","charAt","_addEvent","type","addEventListener","attachEvent","_characterFromEvent","character","String","fromCharCode","which","shiftKey","toLowerCase","_isModifier","_pickBestAction","modifiers","_getReverseMap","_getKeyInfo","combination","replace","split","_keysFromString","targetElement","_resetTimer","_sequenceLevels","_ignoreNextKeyup","_ignoreNextKeypress","_nextExpectedAction","_resetSequences","doNotReset","activeSequences","_getMatches","sequenceName","level","modifiers1","modifiers2","matches","seq","metaKey","ctrlKey","sort","deleteCombo","combo","deleteSequence","splice","_fireCallback","sequence","srcElement","preventDefault","returnValue","_preventDefault","stopPropagation","cancelBubble","_stopPropagation","_handleKeyEvent","keyCode","altKey","_eventModifiers","_bindSequence","_increaseSequence","nextAction","clearTimeout","setTimeout","_callbackAndReset","wrappedCallback","_bindSingle","info","callbacks","maxLevel","processedSequenceCallback","max","ignoreThisKeypress","combinations","array","Set","matchOperatorsRe","str","TypeError","root","global","CSS","escape","cssEscape","codeUnit","string","index","firstCodeUnit","charCodeAt","factory","g","Function","___CSS_LOADER_API_IMPORT___","locals","compose","_compose1","_compose2","_compose3","_compose4","_compose5","f","a","h","j","ALWAYS","NEVER","DOMCONTENTLOADED","state","LOAD","lines","unlines","ls","line","formatDependency","selector","explanation","failure","reason","dependencies","message","failureDescriber","context","operation","description","location","href","trim","siteName","extensionName","prefix","logger","console","setPrefix","setLogger","log","warning","warn","error","stylesheet","spec","stylesheets","fragment","createDocumentFragment","entries","forEach","_","sheet","style","createElement","textContent","css","media","condition","appendChild","documentElement","setMediaQuery","getElementById","setAttribute","enable","disable","TYPE_GUARDS_PRIMITIVE","isBoolean","isNumber","isString","isSymbol","isNull","isUndefined","x","isPrimitive","some","namedTypeGuard","creator","typeGuard","fun","writable","is","isLike","reference","referenceAsArray","every","constructor","includes","k","tryToPerform","queryResults","querySelector","missingDependencies","filter","reduce","acc","userscript","attr","plan","hasAttribute","initialAction","recurse","operations","failures","triesLeft","lastTry","operationsToRunNow","remaining","readyState","deferUntil","tryUntil","extraTries","interval","handleFailures","operationsPlan","raw","fromMaybeUndefined","fallback","withMaybe","ma","SearchEngine","USERSCRIPT_ID","USERSCRIPT_NAME","PREFIX_ID","PREFIX_CLASS","ID","developerTools","preferenceIdPrefix","editingTools","editingToolsPreferences","darkThemeStylesheet","darkThemeAdditions","interestsPreferences","proofreading","CLASS","mousetrap","disabled","iconButton","pmButton","quoteSignatureButton","mentionEveryoneButton","shibe","button_restoreDraft","button_color","button_blockquote","button_spoiler","button_code","button_math","splitQuote","colorPalette","smileys","preference","preferenceDescription","inlinePreference","primaryInlinePreference","radioButtonPreference","labeledInput","subforum","textareaSize","codeInput","checkbox","uninteresting","PATH","link","sweclockersSettingsPath","check","RegExp","KEY","autosaved_draft","caret_position","last_time_user_tried_to_submit","developer_tools_open","draft_mode","CONTENT","indentation","shibeColor","shibeFont","splitQuoteEmptyLines","edit","doge","ICONS","BLOCKQUOTE","DOGE","FOCUSABLE_ELEMENTS","NAME","fieldset","button","icon","label","colorOrange","menuItem","settingsNavigation","forumPosts","forumPost","forumPostProfileDetails","forumPostSignature","forumPostControls","forumPostByCurrentUser","bbcode","bbDel","bbImage","bbIns","imgControls","notifications","proofDialog","socialMediaButtons","sideBox","smiley","subforums","toolbarGroup","toolbarButton","toolbarButtonIcon","toolbarHeadingButton","toolbarTableButton","FORM","csrfToken","recipients","title","preview","submit","EDIT_MODE_FORUM","EDIT_MODE_MARKET","EDIT_MODE_MARKET_CONTACT","EDIT_MODE_PM","EDIT_MODE_REPORT","EDIT_MODE_SIGNATURE","SETTINGS","FOLLOWED","MY_POSTS","SIGNIN","SIGNOUT","ARTICLE","GUIDE","NEWS","COMPETITION","TEST","TESTPILOT","FORUM_CATEGORY","FORUM","FORUM_THREADS_VIEW","PROFILE","userId","THREAD","POST","SUCCESSFULLY_SUBMITTED_FORUM_POST","SUCCESSFULLY_SUBMITTED_PM","newPrivateMessage","sender","postID","editPost","TAG","toolbarIcon","position","position_toolbar_url","position_toolbar_img","settings","MOBILE_SITE_DISCLAIMER","sentFrom","mobileSiteDomain","getUserID","userID","session","_userid","isOnBSCPreferencesPage","pathMatches","isOnSweclockersSettingsPage","isOnSomeProfilePage","pathname","isInForumThreadsView","isInEditMode_forum","isInEditMode_market","isInEditMode_marketContact","isInEditMode_PM","isInEditMode_report","isInEditMode_signature","mayHaveJustSubmittedForumPost","mayHaveJustSubmittedPM","isInEditMode","isReadingEditorialContent","isReadingThread","isReadingForumThread","startsWith","Status","LOCAL_STORAGE","localStorage","SESSION_STORAGE","sessionStorage","getFrom","get_session","set","setIn","set_session","remove","removeIn","storage","savedValue","DOMException","readValue","getItem","parsedValue","parse","readFrom","status","err","SyntaxError","stringifiedValue","_key","v","Number","isFinite","RangeError","setItem","saveIn","removeItem","fromMaybe","replacer","isNaN","Infinity","prependConstraints","cs","constraints","getClassName","extras","validationResult","validate","invalidValue","len","constraint","requirement","Error","SIMPLE_RESPONSE_HANDLER","summary","response","unknown","fromStorageStatus","assertUnreachable","parameter","empty","supportsUndo","userAgent","isGecko","isAndroid","darkThemeBy","author","letter","endsWith","general","loading","dark_theme_toggle_tooltip","preferences_link","signout_confirmation","draft_mode_toggle_label","draft_mode_toggle_tooltip","draft_mode_enabled_tooltip","improved_url_button_url","improved_url_button_text","restore_draft_label","restore_draft_tooltip","restore_draft_question","restore_draft_confirm","nbsps_confirm","generic_lines_confirm","quote_signature_label","quote_signature_tooltip","quote_signature_tooltip_no_signature","mention_everyone_label","mention_everyone_tooltip","uninteresting_subforum","subforumName","pm_link_label","go_to_post","link_to_top_tooltip","textarea_size_small","textarea_size_large","tooltip_h","tooltip_table","down_for_maintenance","my_posts","NO_LABEL","shortcut_label","back_to_sweclockers","save_notice","failed_to_fetch_categories","in_quick_reply_form","in_quick_reply_form_description","lock_heights","lock_heights_description","improved_corrections","improved_corrections_description","insert_preferences_shortcut","insert_preferences_shortcut_description","replace_followed_threads_link","replace_followed_threads_link_description","remember_location_in_market","remember_location_in_market_description","forum_threads","improved_pagination_buttons","improved_pagination_buttons_description","insert_link_to_top","insert_link_to_top_description","highlight_own_posts","highlight_own_posts_description","insert_pm_links","insert_pm_links_description","mention_everyone_button","mention_everyone_button_description","quote_signature_buttons","quote_signature_buttons_description","quote_signature_message","quote_signature_message_description","quote_signature_message_default","edit_mode","autosave_draft","autosave_draft_description","draft_mode_toggle","draft_mode_toggle_description","textarea_size_save","textarea_size_save_description","textarea_size_toggle","textarea_size_toggle_description","textarea_size_unit","monospace_font","monospace_font_description","keyboard_shortcuts","keyboard_shortcuts_description","insert_tab","insert_tab_description","insert_tab_spaces","insert_tab_tab","improved_builtin_editing_tools","improved_builtin_editing_tools_description","insert_heading_toolbar_button","insert_heading_toolbar_button_description","insert_table_toolbar_button","insert_table_toolbar_button_description","remember_caret_position","remember_caret_position_description","remove_mobile_site_disclaimer","remove_mobile_site_disclaimer_description","editing_tools","enable_description","above","below","special_characters","meta","code","math","whitespace","definitions","embed","search_engine","doge_description","color_palette","color_palette_description","dark_theme","infoUrl","show_toggle","show_toggle_description","auto","auto_description","between","and","interval_description","customize_content","carousel","social_media","guides","popular_galleries","new_in_forum_side","new_in_market","new_in_test_lab","in_the_store","popular_at_prisjakt","new_tech_jobs","external_news","more_articles","latest_news","new_in_forum_main","footer","advanced","prevent_accidental_signout","prevent_accidental_signout_description","prevent_accidental_unload","prevent_accidental_unload_description","improved_image_controls","improved_image_controls_description","disable_scroll_restoration","disable_scroll_restoration_description","down_for_maintenance_description","proofread_articles","always","corrections","never","proofread_forum_posts","proofread_forum_posts_description","undo_support","replace_selected","keep_selected","developer_mode","developer_mode_description","custom_css_enable","custom_css_enable_description","custom_css_warning","keyboard","interests","size_label","size_tooltip","color_tooltip","font_tooltip","mark_label","mark_tooltip","abbr_label","abbr_tooltip","quote_tooltip","bq_label","bq_tooltip","spoiler_tooltip","expander_tooltip","noparse_tooltip","pre_tooltip","cmd_tooltip","code_tooltip","math_label","math_tooltip","sub_label","sub_tooltip","sup_label","sup_tooltip","nbsps_label","nbsps_tooltip","url_tooltip","img_tooltip","search_link_tooltip","shibe_label","shibe_tooltip","doge_label","doge_tooltip","split_quote_tooltip","edit_label","edit_tooltip","ins_label","ins_tooltip","del_label","del_tooltip","dl_label","dl_tooltip","dt_label","dt_tooltip","dd_label","dd_tooltip","insert","tooltip","nothing_logged","options","super","seenOptionValues","option","minLength","maxLength","CONSTRAINTS","multiline","truncated","substring","toValid","REGEX_LINE_BREAKS","custom_css_code","class","parsed","CONSTRAINT_INTEGER","parseInt","postParse","isInteger","min","time","floor","padStart","match","hh","mm","dependencies_auto","active","implicit","last_autoset_state","time_on","time_off","suffix","dependencies_textarea_size_toggle","TAB","u","textarea_size","MAX_VALUE","monospace_font_in_quick_reply_form","keyboard_shortcuts_in_quick_reply","insert_tab_content","repeat","removeChild","children","defaultProps","props","ref","__k","__","__b","__e","__d","__c","__h","__v","vnode","base","__r","debounceRendering","__P","$","__n","ownerSVGElement","y","w","b","A","P","L","I","nextSibling","insertBefore","setProperty","C","cssText","slice","N","z","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","event","contextType","__E","render","M","sub","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","T","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","H","diffed","nodeType","localName","createTextNode","createElementNS","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","checked","current","unmount","componentWillUnmount","O","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","Promise","then","resolve","field","text","ownerDocument","initialFocus","activeElement","focus","execCommand","setRangeText","selectionStart","selectionEnd","dispatchEvent","InputEvent","inputType","isComposing","insertTextFirefox","body","blur","HTMLElement","indent","wrapIn","textarea","insertionResult","insertion","start","end","startOfInsertedText","textareaContent","startOfInserted","endOfInserted","insertPure","before","selectedTextIn","after","wrap","wrapEnd","selection","getSelection","cursor","placeCursorIn","selectRangeIn","wrap_verbatim","wrap_tag","spacing","block","tag","parameterized","undoSupport","insertIn","setSelectionRange","CONSECUTIVE_SPACES","engine","selected","startTag","completePhrase","searchEngineURL","searchURL","shibeText","original","random","lengthOfGuaranteedMatchIn","regexThatAlwaysMatches","SMILEYS","codeFor","classFor","BUTTON","nbsps","generalButton","selectedText","numberOfSelectedSpaces","numberOfSelectedSpaceSegments","confirmationNeeded","confirm","url","tagButton","image","img","imgify","search","selectedLines","nonEmptyLines","longestLineLength","shibeConfirmationNeeded","quote","beforeSelection","afterSelection","existingNewlinesBeforeSelection","existingNewlinesAfterSelection","trimRight","trimLeft","numberOfNewlinesToInsert","endTag","extraNewlineBeforeSelectionNeeded","extraNewlineAfterSelectionNeeded","expander","BUTTONS","searchEngine","COLORS","insertButton","colorButton","color","smileyButton","custom","onClick","renderIn","parent","placeholder","nodeProps","maxTotalLength","insertAtTheEnd","append","insertAtTheBeginning","prepend","insertAfter","buttonsDescription","buttons","connectedButtons","div","Position","more","dependencies_quote_signature","location_region","location_city","Action","uninteresting_subforums","shortcut","INSERT_LINK","SUBMIT","PREVIEW","INSERT_TAB","handler","changeListeners","subscribe","listener","add","unsubscribe","delete","preferences","subscriptable","saved","Preferences","localStoragePrefix","responseHandler","cache","Map","seenKeys","allPreferences","flatten","tree","values","node","dependency","getWith","setWith","getRaw","setRaw","getFromCacheOrThrowIfUnknown","cachedValue","textareaToolbarInner","textareaToolbarStrikeButton","textareaToolbarUnorderedListButton","proofDialogTextarea","threadTitle","moreArticles","actionButtons","quoteButton","previewButton","saveButton","saveButtonQuickReply","actionButtonsQuickReply","previewButtonQuickReply","forumPostContainer","replyButtonAfterForumPosts","cityInput","regionSelect","sideColumnGuides","sideColumnPopularGalleries","bbParagraph","forumLink","forumPostAuthorLink","linkedForumPost","pageNavigationAfterForumPosts","quickReplyForm","signoutButton","signinButtonOr","followedThreadsLinkText","proofDialogCloseButton","REGEX_POSSIBLY_CLEAN_SLATE_REPLY","mention","username","MAX_MILLISECONDS_TO_COUNT_AS_RECENTLY","clearAutosavedDraft","saveDraft","REGEX_ALMOST_USERNAME","reverse","isCleanSlate_reply","mayBeWorthSaving","couldNotDetermine","kind","hideById","hideBySelector","timeIsWithin","date","startOfToday","Date","setHours","setMinutes","setSeconds","setMilliseconds","getTime","timeOfDay","STYLESHEETS","main","dark_theme_toggle_preparations","dark_theme_toggle","preferences_shortcut","textarea_size_toggle_textarea_height","custom_css","mention_everyone","customize_content_carousel","customize_content_social_media","customize_content_guides","customize_content_popular_galleries","customize_content_new_in_forum_side","customize_content_new_in_market","customize_content_new_in_test_lab","customize_content_in_the_store","customize_content_popular_at_prisjakt","customize_content_new_tech_jobs","customize_content_external_news","customize_content_more_articles","customize_content_latest_news","customize_content_new_in_forum_main","customize_content_footer","newState","yyyy","getFullYear","getMonth","dd","getDate","withCacheInvalidation","rel","sheldon","whatSheldonWants","draftModeEnabled","insertBeforeOrAfter","parentElement","EditingTools","config","getEditingToolsConfig","connected","connectedTagButton","connectedInsertButton","connectedColorButton","connectedSmileyButton","headingToolbarButton","isUrlLike","shouldPreventUnload","handleBeforeUnload","preventUnload","enableListener","disableListener","clickOn","Event","click","keyboardShortcuts","bindKeyboardShortcut","insertLink","entry","usersToMention","nameLinks","from","querySelectorAll","only","xs","REGEX_GENERATED_QUOTE","couldNotExtract","what","couldNotExtractFromPost","htmlId","parseFloat","PID","GENERATORS","Boolean","LabeledInput","onChange","fromStringEventHandler","Integer","Double","step","Time","IntegerRange","DoubleRange","pow","log10","Multichoice","html","RadioButton","selectedIndex","fromString","referrer","src","alt","Entries","generators","ps","InputElement","for","Entry","input","isDefined","fetch","origin","responseContent","links","DOMParser","parseFromString","categories","HTMLAnchorElement","linkData","isSubforum","classList","contains","extractForumLinkData","catch","category","checkboxId","newUninteresting","literalRule","core","literal","mx","fmap","literalRegex","simpleRule","matchRule","bad","assign","regexRule","regex","DESC_NBSP","good","DESC_NBH","DESC_END","simpleNBSP","matchNBSP","regexNBSP","simpleNBH","matchNBH","simpleEND","NUMBER","RULES_NB_SPACE","RULES_NB_HYPHEN","RULES_EN_DASH","RULES_TIMES","GIBBERISH","RULES","RULES_SUP","proofreadWith","rules","markAll","markVerified","lookaround","markMistake","markMistakesAndVerifiedUsing","reduceRight","mark","f_b","f_m","f_a","lookbehind","lookahead","group","whatToFind","whatToMark","fakeLookaround","markIn","found","rest","captured","findAndMarkUsing","markWith","isMistake","processSup","processNode","processNodeWith","sup","Node","TEXT_NODE","span","replaceChild","ELEMENT_NODE","nodeName","pattern","highlightWith","ELEMENTS_TO_GO_OUTSIDE","toUpperCase","Options","getProofDialogTextarea","addCorrection","correction","suggestion","scrollTo","MAX_SAFE_INTEGER","mistake","contextBefore","contextAfter","contextBeforeOrAfter","getSibling","combine","baseCase","maxChars","sibling","previousSibling","nextContext","userMessage","noSignature","signature","authorName","quoteURL","credentials","quoteTextarea","form","hidden","csrf","textToInsert","rawSignature","rawQuote","withSignatureAndUserMessage","END_TAG_QUOTE","disclaimer","Headings","TABLE_CONFIG","rows","columns","headings","tableToolbarButton","headingRow","tableRowLines","regularRow","theadLines","tbodyLines","replicate","table","cell_first","cell_rest","fill","size","height","shouldEnableImprovedBuiltinEditingTools","shouldInsertPreferencesShortcut","uninterestingSubforumIDs","selectors","uninterestingIDs","improvedBuiltinEditingToolsDescription","Beta","Forms","Toolbar","Buttons","HyperlinkButton","insertTemplate","HTMLTextAreaElement","Taiga","Strings","sprintf","suggestedLinkUrl","suggestedLinkText","providedLinkUrl","prompt","providedLinkText","finalLinkUrl","finalLinkText","newSelectionStart","yyyymmdd","history","scrollRestoration","_actionButtons","changeListener","offsetParent","savedPosition","NaN","cursorPosition","placeCaretIn","wipeSavedPosition","savePositionIn","withoutDisclaimers","withoutFirstDisclaimer","Tanuki","Templates","Textarea","Helpers","setSelection","replacement","insertAtCaret","strikeButton","unorderedListButton","toolbarInner","notificationsBar","menuLockToggle","ourUserID","xlinkHref","getElementsByClassName","post","profileDetails","getCsrfToken","controls","correctionsLink","stopImmediatePropagation","row","outerHTML","closeButton","capture","passive","followedThreadsLinkTextOrSigninButton","city","region","parseResult","replyButton","replyURL","getAttribute","toggle","insertAdjacentElement","draftPreview","question_restore","select","removeRestoreButton","maybeOfferToRestoreAutosavedPost","setInterval","enableWatchdog","nowInMilliseconds","now","referrerPath","URL","lastTimeUserTriedToSubmit","creationTimeInSeconds","dataset","createTime","getCreationTimeInSeconds","postCreatedRecently","matchPostID","cameFromEditingThisPost","attemptedSubmitRecently","draftIsObsolete","loggedMessages","isOpen","initOpen","loggedWarnings","msg","loggedErrors","newOpenState","howMany","describeFailure","MutationObserver","mutations","observer","mutation","addedNodes","head","disconnect","observe","childList","subtree","regularLogger","rootNode","devTools","run"],"mappings":"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","file":"better-sweclockers.user.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 55);\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","function calc(m) {\n    return function(n) { return Math.round(n * m); };\n};\nmodule.exports = {\n    seconds: calc(1e3),\n    minutes: calc(6e4),\n    hours: calc(36e5),\n    days: calc(864e5),\n    weeks: calc(6048e5),\n    months: calc(26298e5),\n    years: calc(315576e5)\n};\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","\n        var result = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./style.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./autosave-draft.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./dark-theme-toggle-preparations.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./dark-theme-toggle.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./developer-mode.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./doge.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./down-for-maintenance.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./editing-tools.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./hide-footer.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./highlight-own-posts.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./improved-corrections.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./improved-image-controls.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./improved-pagination-buttons.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./lock-heights.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./main.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./mention-everyone.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./preferences-link.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./preferences-shortcut.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./preferences.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./replace-followed-threads-link.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./textarea-size-toggle.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./uninteresting-subforums.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","/*global define:false */\n/**\n * Copyright 2012-2017 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Mousetrap is a simple keyboard shortcut library for Javascript with\n * no external dependencies\n *\n * @version 1.6.3\n * @url craig.is/killing/mice\n */\n(function(window, document, undefined) {\n\n    // Check if mousetrap is used inside browser, if not, return\n    if (!window) {\n        return;\n    }\n\n    /**\n     * mapping of special keycodes to their corresponding keys\n     *\n     * everything in this dictionary cannot use keypress events\n     * so it has to be here to map to the correct keycodes for\n     * keyup/keydown events\n     *\n     * @type {Object}\n     */\n    var _MAP = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta'\n    };\n\n    /**\n     * mapping for special characters so they can support\n     *\n     * this dictionary is only used incase you want to bind a\n     * keyup or keydown event to one of these keys\n     *\n     * @type {Object}\n     */\n    var _KEYCODE_MAP = {\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111 : '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']',\n        222: '\\''\n    };\n\n    /**\n     * this is a mapping of keys that require shift on a US keypad\n     * back to the non shift equivelents\n     *\n     * this is so you can use keyup events with these keys\n     *\n     * note that this will only work reliably on US keyboards\n     *\n     * @type {Object}\n     */\n    var _SHIFT_MAP = {\n        '~': '`',\n        '!': '1',\n        '@': '2',\n        '#': '3',\n        '$': '4',\n        '%': '5',\n        '^': '6',\n        '&': '7',\n        '*': '8',\n        '(': '9',\n        ')': '0',\n        '_': '-',\n        '+': '=',\n        ':': ';',\n        '\\\"': '\\'',\n        '<': ',',\n        '>': '.',\n        '?': '/',\n        '|': '\\\\'\n    };\n\n    /**\n     * this is a list of special strings you can use to map\n     * to modifier keys when you specify your keyboard shortcuts\n     *\n     * @type {Object}\n     */\n    var _SPECIAL_ALIASES = {\n        'option': 'alt',\n        'command': 'meta',\n        'return': 'enter',\n        'escape': 'esc',\n        'plus': '+',\n        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n    };\n\n    /**\n     * variable to store the flipped version of _MAP from above\n     * needed to check if we should use keypress or not when no action\n     * is specified\n     *\n     * @type {Object|undefined}\n     */\n    var _REVERSE_MAP;\n\n    /**\n     * loop through the f keys, f1 to f19 and add them to the map\n     * programatically\n     */\n    for (var i = 1; i < 20; ++i) {\n        _MAP[111 + i] = 'f' + i;\n    }\n\n    /**\n     * loop through to map numbers on the numeric keypad\n     */\n    for (i = 0; i <= 9; ++i) {\n\n        // This needs to use a string cause otherwise since 0 is falsey\n        // mousetrap will never fire for numpad 0 pressed as part of a keydown\n        // event.\n        //\n        // @see https://github.com/ccampbell/mousetrap/pull/258\n        _MAP[i + 96] = i.toString();\n    }\n\n    /**\n     * cross browser add event method\n     *\n     * @param {Element|HTMLDocument} object\n     * @param {string} type\n     * @param {Function} callback\n     * @returns void\n     */\n    function _addEvent(object, type, callback) {\n        if (object.addEventListener) {\n            object.addEventListener(type, callback, false);\n            return;\n        }\n\n        object.attachEvent('on' + type, callback);\n    }\n\n    /**\n     * takes the event and returns the key character\n     *\n     * @param {Event} e\n     * @return {string}\n     */\n    function _characterFromEvent(e) {\n\n        // for keypress events we should return the character as is\n        if (e.type == 'keypress') {\n            var character = String.fromCharCode(e.which);\n\n            // if the shift key is not pressed then it is safe to assume\n            // that we want the character to be lowercase.  this means if\n            // you accidentally have caps lock on then your key bindings\n            // will continue to work\n            //\n            // the only side effect that might not be desired is if you\n            // bind something like 'A' cause you want to trigger an\n            // event when capital A is pressed caps lock will no longer\n            // trigger the event.  shift+a will though.\n            if (!e.shiftKey) {\n                character = character.toLowerCase();\n            }\n\n            return character;\n        }\n\n        // for non keypress events the special maps are needed\n        if (_MAP[e.which]) {\n            return _MAP[e.which];\n        }\n\n        if (_KEYCODE_MAP[e.which]) {\n            return _KEYCODE_MAP[e.which];\n        }\n\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return String.fromCharCode(e.which).toLowerCase();\n    }\n\n    /**\n     * checks if two arrays are equal\n     *\n     * @param {Array} modifiers1\n     * @param {Array} modifiers2\n     * @returns {boolean}\n     */\n    function _modifiersMatch(modifiers1, modifiers2) {\n        return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n    }\n\n    /**\n     * takes a key event and figures out what the modifiers are\n     *\n     * @param {Event} e\n     * @returns {Array}\n     */\n    function _eventModifiers(e) {\n        var modifiers = [];\n\n        if (e.shiftKey) {\n            modifiers.push('shift');\n        }\n\n        if (e.altKey) {\n            modifiers.push('alt');\n        }\n\n        if (e.ctrlKey) {\n            modifiers.push('ctrl');\n        }\n\n        if (e.metaKey) {\n            modifiers.push('meta');\n        }\n\n        return modifiers;\n    }\n\n    /**\n     * prevents default for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _preventDefault(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            return;\n        }\n\n        e.returnValue = false;\n    }\n\n    /**\n     * stops propogation for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _stopPropagation(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n            return;\n        }\n\n        e.cancelBubble = true;\n    }\n\n    /**\n     * determines if the keycode specified is a modifier key or not\n     *\n     * @param {string} key\n     * @returns {boolean}\n     */\n    function _isModifier(key) {\n        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';\n    }\n\n    /**\n     * reverses the map lookup so that we can look for specific keys\n     * to see what can and can't use keypress\n     *\n     * @return {Object}\n     */\n    function _getReverseMap() {\n        if (!_REVERSE_MAP) {\n            _REVERSE_MAP = {};\n            for (var key in _MAP) {\n\n                // pull out the numeric keypad from here cause keypress should\n                // be able to detect the keys from the character\n                if (key > 95 && key < 112) {\n                    continue;\n                }\n\n                if (_MAP.hasOwnProperty(key)) {\n                    _REVERSE_MAP[_MAP[key]] = key;\n                }\n            }\n        }\n        return _REVERSE_MAP;\n    }\n\n    /**\n     * picks the best action based on the key combination\n     *\n     * @param {string} key - character for key\n     * @param {Array} modifiers\n     * @param {string=} action passed in\n     */\n    function _pickBestAction(key, modifiers, action) {\n\n        // if no action was picked in we should try to pick the one\n        // that we think would work best for this key\n        if (!action) {\n            action = _getReverseMap()[key] ? 'keydown' : 'keypress';\n        }\n\n        // modifier keys don't work as expected with keypress,\n        // switch to keydown\n        if (action == 'keypress' && modifiers.length) {\n            action = 'keydown';\n        }\n\n        return action;\n    }\n\n    /**\n     * Converts from a string key combination to an array\n     *\n     * @param  {string} combination like \"command+shift+l\"\n     * @return {Array}\n     */\n    function _keysFromString(combination) {\n        if (combination === '+') {\n            return ['+'];\n        }\n\n        combination = combination.replace(/\\+{2}/g, '+plus');\n        return combination.split('+');\n    }\n\n    /**\n     * Gets info for a specific key combination\n     *\n     * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n     * @param  {string=} action\n     * @returns {Object}\n     */\n    function _getKeyInfo(combination, action) {\n        var keys;\n        var key;\n        var i;\n        var modifiers = [];\n\n        // take the keys from this pattern and figure out what the actual\n        // pattern is all about\n        keys = _keysFromString(combination);\n\n        for (i = 0; i < keys.length; ++i) {\n            key = keys[i];\n\n            // normalize key names\n            if (_SPECIAL_ALIASES[key]) {\n                key = _SPECIAL_ALIASES[key];\n            }\n\n            // if this is not a keypress event then we should\n            // be smart about using shift keys\n            // this will only work for US keyboards however\n            if (action && action != 'keypress' && _SHIFT_MAP[key]) {\n                key = _SHIFT_MAP[key];\n                modifiers.push('shift');\n            }\n\n            // if this key is a modifier then add it to the list of modifiers\n            if (_isModifier(key)) {\n                modifiers.push(key);\n            }\n        }\n\n        // depending on what the key combination is\n        // we will try to pick the best event for it\n        action = _pickBestAction(key, modifiers, action);\n\n        return {\n            key: key,\n            modifiers: modifiers,\n            action: action\n        };\n    }\n\n    function _belongsTo(element, ancestor) {\n        if (element === null || element === document) {\n            return false;\n        }\n\n        if (element === ancestor) {\n            return true;\n        }\n\n        return _belongsTo(element.parentNode, ancestor);\n    }\n\n    function Mousetrap(targetElement) {\n        var self = this;\n\n        targetElement = targetElement || document;\n\n        if (!(self instanceof Mousetrap)) {\n            return new Mousetrap(targetElement);\n        }\n\n        /**\n         * element to attach key events to\n         *\n         * @type {Element}\n         */\n        self.target = targetElement;\n\n        /**\n         * a list of all the callbacks setup via Mousetrap.bind()\n         *\n         * @type {Object}\n         */\n        self._callbacks = {};\n\n        /**\n         * direct map of string combinations to callbacks used for trigger()\n         *\n         * @type {Object}\n         */\n        self._directMap = {};\n\n        /**\n         * keeps track of what level each sequence is at since multiple\n         * sequences can start out with the same sequence\n         *\n         * @type {Object}\n         */\n        var _sequenceLevels = {};\n\n        /**\n         * variable to store the setTimeout call\n         *\n         * @type {null|number}\n         */\n        var _resetTimer;\n\n        /**\n         * temporary state where we will ignore the next keyup\n         *\n         * @type {boolean|string}\n         */\n        var _ignoreNextKeyup = false;\n\n        /**\n         * temporary state where we will ignore the next keypress\n         *\n         * @type {boolean}\n         */\n        var _ignoreNextKeypress = false;\n\n        /**\n         * are we currently inside of a sequence?\n         * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n         *\n         * @type {boolean|string}\n         */\n        var _nextExpectedAction = false;\n\n        /**\n         * resets all sequence counters except for the ones passed in\n         *\n         * @param {Object} doNotReset\n         * @returns void\n         */\n        function _resetSequences(doNotReset) {\n            doNotReset = doNotReset || {};\n\n            var activeSequences = false,\n                key;\n\n            for (key in _sequenceLevels) {\n                if (doNotReset[key]) {\n                    activeSequences = true;\n                    continue;\n                }\n                _sequenceLevels[key] = 0;\n            }\n\n            if (!activeSequences) {\n                _nextExpectedAction = false;\n            }\n        }\n\n        /**\n         * finds all callbacks that match based on the keycode, modifiers,\n         * and action\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event|Object} e\n         * @param {string=} sequenceName - name of the sequence we are looking for\n         * @param {string=} combination\n         * @param {number=} level\n         * @returns {Array}\n         */\n        function _getMatches(character, modifiers, e, sequenceName, combination, level) {\n            var i;\n            var callback;\n            var matches = [];\n            var action = e.type;\n\n            // if there are no events related to this keycode\n            if (!self._callbacks[character]) {\n                return [];\n            }\n\n            // if a modifier key is coming up on its own we should allow it\n            if (action == 'keyup' && _isModifier(character)) {\n                modifiers = [character];\n            }\n\n            // loop through all callbacks for the key that was pressed\n            // and see if any of them match\n            for (i = 0; i < self._callbacks[character].length; ++i) {\n                callback = self._callbacks[character][i];\n\n                // if a sequence name is not specified, but this is a sequence at\n                // the wrong level then move onto the next match\n                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {\n                    continue;\n                }\n\n                // if the action we are looking for doesn't match the action we got\n                // then we should keep going\n                if (action != callback.action) {\n                    continue;\n                }\n\n                // if this is a keypress event and the meta key and control key\n                // are not pressed that means that we need to only look at the\n                // character, otherwise check the modifiers as well\n                //\n                // chrome will not fire a keypress if meta or control is down\n                // safari will fire a keypress if meta or meta+shift is down\n                // firefox will fire a keypress if meta or control is down\n                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {\n\n                    // when you bind a combination or sequence a second time it\n                    // should overwrite the first one.  if a sequenceName or\n                    // combination is specified in this call it does just that\n                    //\n                    // @todo make deleting its own method?\n                    var deleteCombo = !sequenceName && callback.combo == combination;\n                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;\n                    if (deleteCombo || deleteSequence) {\n                        self._callbacks[character].splice(i, 1);\n                    }\n\n                    matches.push(callback);\n                }\n            }\n\n            return matches;\n        }\n\n        /**\n         * actually calls the callback function\n         *\n         * if your callback function returns false this will use the jquery\n         * convention - prevent default and stop propogation on the event\n         *\n         * @param {Function} callback\n         * @param {Event} e\n         * @returns void\n         */\n        function _fireCallback(callback, e, combo, sequence) {\n\n            // if this event should not happen stop here\n            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n                return;\n            }\n\n            if (callback(e, combo) === false) {\n                _preventDefault(e);\n                _stopPropagation(e);\n            }\n        }\n\n        /**\n         * handles a character key event\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event} e\n         * @returns void\n         */\n        self._handleKey = function(character, modifiers, e) {\n            var callbacks = _getMatches(character, modifiers, e);\n            var i;\n            var doNotReset = {};\n            var maxLevel = 0;\n            var processedSequenceCallback = false;\n\n            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n            for (i = 0; i < callbacks.length; ++i) {\n                if (callbacks[i].seq) {\n                    maxLevel = Math.max(maxLevel, callbacks[i].level);\n                }\n            }\n\n            // loop through matching callbacks for this key event\n            for (i = 0; i < callbacks.length; ++i) {\n\n                // fire for all sequence callbacks\n                // this is because if for example you have multiple sequences\n                // bound such as \"g i\" and \"g t\" they both need to fire the\n                // callback for matching g cause otherwise you can only ever\n                // match the first one\n                if (callbacks[i].seq) {\n\n                    // only fire callbacks for the maxLevel to prevent\n                    // subsequences from also firing\n                    //\n                    // for example 'a option b' should not cause 'option b' to fire\n                    // even though 'option b' is part of the other sequence\n                    //\n                    // any sequences that do not match here will be discarded\n                    // below by the _resetSequences call\n                    if (callbacks[i].level != maxLevel) {\n                        continue;\n                    }\n\n                    processedSequenceCallback = true;\n\n                    // keep a list of which sequences were matches for later\n                    doNotReset[callbacks[i].seq] = 1;\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);\n                    continue;\n                }\n\n                // if there were no sequence matches but we are still here\n                // that means this is a regular match so we should fire that\n                if (!processedSequenceCallback) {\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n                }\n            }\n\n            // if the key you pressed matches the type of sequence without\n            // being a modifier (ie \"keyup\" or \"keypress\") then we should\n            // reset all sequences that were not matched by this event\n            //\n            // this is so, for example, if you have the sequence \"h a t\" and you\n            // type \"h e a r t\" it does not match.  in this case the \"e\" will\n            // cause the sequence to reset\n            //\n            // modifier keys are ignored because you can have a sequence\n            // that contains modifiers such as \"enter ctrl+space\" and in most\n            // cases the modifier key will be pressed before the next key\n            //\n            // also if you have a sequence such as \"ctrl+b a\" then pressing the\n            // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n            //\n            // the \"keydown\" is expected when there is a modifier, but the\n            // \"keypress\" ends up matching the _nextExpectedAction since it occurs\n            // after and that causes the sequence to reset\n            //\n            // we ignore keypresses in a sequence that directly follow a keydown\n            // for the same character\n            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;\n            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {\n                _resetSequences(doNotReset);\n            }\n\n            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';\n        };\n\n        /**\n         * handles a keydown event\n         *\n         * @param {Event} e\n         * @returns void\n         */\n        function _handleKeyEvent(e) {\n\n            // normalize e.which for key events\n            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n            if (typeof e.which !== 'number') {\n                e.which = e.keyCode;\n            }\n\n            var character = _characterFromEvent(e);\n\n            // no character found then stop\n            if (!character) {\n                return;\n            }\n\n            // need to use === for the character check because the character can be 0\n            if (e.type == 'keyup' && _ignoreNextKeyup === character) {\n                _ignoreNextKeyup = false;\n                return;\n            }\n\n            self.handleKey(character, _eventModifiers(e), e);\n        }\n\n        /**\n         * called to set a 1 second timeout on the specified sequence\n         *\n         * this is so after each key press in the sequence you have 1 second\n         * to press the next key before you have to start over\n         *\n         * @returns void\n         */\n        function _resetSequenceTimer() {\n            clearTimeout(_resetTimer);\n            _resetTimer = setTimeout(_resetSequences, 1000);\n        }\n\n        /**\n         * binds a key sequence to an event\n         *\n         * @param {string} combo - combo specified in bind call\n         * @param {Array} keys\n         * @param {Function} callback\n         * @param {string=} action\n         * @returns void\n         */\n        function _bindSequence(combo, keys, callback, action) {\n\n            // start off by adding a sequence level record for this combination\n            // and setting the level to 0\n            _sequenceLevels[combo] = 0;\n\n            /**\n             * callback to increase the sequence level for this sequence and reset\n             * all other sequences that were active\n             *\n             * @param {string} nextAction\n             * @returns {Function}\n             */\n            function _increaseSequence(nextAction) {\n                return function() {\n                    _nextExpectedAction = nextAction;\n                    ++_sequenceLevels[combo];\n                    _resetSequenceTimer();\n                };\n            }\n\n            /**\n             * wraps the specified callback inside of another function in order\n             * to reset all sequence counters as soon as this sequence is done\n             *\n             * @param {Event} e\n             * @returns void\n             */\n            function _callbackAndReset(e) {\n                _fireCallback(callback, e, combo);\n\n                // we should ignore the next key up if the action is key down\n                // or keypress.  this is so if you finish a sequence and\n                // release the key the final key will not trigger a keyup\n                if (action !== 'keyup') {\n                    _ignoreNextKeyup = _characterFromEvent(e);\n                }\n\n                // weird race condition if a sequence ends with the key\n                // another sequence begins with\n                setTimeout(_resetSequences, 10);\n            }\n\n            // loop through keys one at a time and bind the appropriate callback\n            // function.  for any key leading up to the final one it should\n            // increase the sequence. after the final, it should reset all sequences\n            //\n            // if an action is specified in the original bind call then that will\n            // be used throughout.  otherwise we will pass the action that the\n            // next key in the sequence should match.  this allows a sequence\n            // to mix and match keypress and keydown events depending on which\n            // ones are better suited to the key provided\n            for (var i = 0; i < keys.length; ++i) {\n                var isFinal = i + 1 === keys.length;\n                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);\n                _bindSingle(keys[i], wrappedCallback, action, combo, i);\n            }\n        }\n\n        /**\n         * binds a single keyboard combination\n         *\n         * @param {string} combination\n         * @param {Function} callback\n         * @param {string=} action\n         * @param {string=} sequenceName - name of sequence if part of sequence\n         * @param {number=} level - what part of the sequence the command is\n         * @returns void\n         */\n        function _bindSingle(combination, callback, action, sequenceName, level) {\n\n            // store a direct mapped reference for use with Mousetrap.trigger\n            self._directMap[combination + ':' + action] = callback;\n\n            // make sure multiple spaces in a row become a single space\n            combination = combination.replace(/\\s+/g, ' ');\n\n            var sequence = combination.split(' ');\n            var info;\n\n            // if this pattern is a sequence of keys then run through this method\n            // to reprocess each pattern one key at a time\n            if (sequence.length > 1) {\n                _bindSequence(combination, sequence, callback, action);\n                return;\n            }\n\n            info = _getKeyInfo(combination, action);\n\n            // make sure to initialize array if this is the first time\n            // a callback is added for this key\n            self._callbacks[info.key] = self._callbacks[info.key] || [];\n\n            // remove an existing match if there is one\n            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);\n\n            // add this call back to the array\n            // if it is a sequence put it at the beginning\n            // if not put it at the end\n            //\n            // this is important because the way these are processed expects\n            // the sequence ones to come first\n            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n                callback: callback,\n                modifiers: info.modifiers,\n                action: info.action,\n                seq: sequenceName,\n                level: level,\n                combo: combination\n            });\n        }\n\n        /**\n         * binds multiple combinations to the same callback\n         *\n         * @param {Array} combinations\n         * @param {Function} callback\n         * @param {string|undefined} action\n         * @returns void\n         */\n        self._bindMultiple = function(combinations, callback, action) {\n            for (var i = 0; i < combinations.length; ++i) {\n                _bindSingle(combinations[i], callback, action);\n            }\n        };\n\n        // start!\n        _addEvent(targetElement, 'keypress', _handleKeyEvent);\n        _addEvent(targetElement, 'keydown', _handleKeyEvent);\n        _addEvent(targetElement, 'keyup', _handleKeyEvent);\n    }\n\n    /**\n     * binds an event to mousetrap\n     *\n     * can be a single key, a combination of keys separated with +,\n     * an array of keys, or a sequence of keys separated by spaces\n     *\n     * be sure to list the modifier keys first to make sure that the\n     * correct key ends up getting bound (the last key in the pattern)\n     *\n     * @param {string|Array} keys\n     * @param {Function} callback\n     * @param {string=} action - 'keypress', 'keydown', or 'keyup'\n     * @returns void\n     */\n    Mousetrap.prototype.bind = function(keys, callback, action) {\n        var self = this;\n        keys = keys instanceof Array ? keys : [keys];\n        self._bindMultiple.call(self, keys, callback, action);\n        return self;\n    };\n\n    /**\n     * unbinds an event to mousetrap\n     *\n     * the unbinding sets the callback function of the specified key combo\n     * to an empty function and deletes the corresponding key in the\n     * _directMap dict.\n     *\n     * TODO: actually remove this from the _callbacks dictionary instead\n     * of binding an empty function\n     *\n     * the keycombo+action has to be exactly the same as\n     * it was defined in the bind method\n     *\n     * @param {string|Array} keys\n     * @param {string} action\n     * @returns void\n     */\n    Mousetrap.prototype.unbind = function(keys, action) {\n        var self = this;\n        return self.bind.call(self, keys, function() {}, action);\n    };\n\n    /**\n     * triggers an event that has already been bound\n     *\n     * @param {string} keys\n     * @param {string=} action\n     * @returns void\n     */\n    Mousetrap.prototype.trigger = function(keys, action) {\n        var self = this;\n        if (self._directMap[keys + ':' + action]) {\n            self._directMap[keys + ':' + action]({}, keys);\n        }\n        return self;\n    };\n\n    /**\n     * resets the library back to its initial state.  this is useful\n     * if you want to clear out the current keyboard shortcuts and bind\n     * new ones - for example if you switch to another page\n     *\n     * @returns void\n     */\n    Mousetrap.prototype.reset = function() {\n        var self = this;\n        self._callbacks = {};\n        self._directMap = {};\n        return self;\n    };\n\n    /**\n     * should we stop this event before firing off callbacks\n     *\n     * @param {Event} e\n     * @param {Element} element\n     * @return {boolean}\n     */\n    Mousetrap.prototype.stopCallback = function(e, element) {\n        var self = this;\n\n        // if the element has the class \"mousetrap\" then no need to stop\n        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n            return false;\n        }\n\n        if (_belongsTo(element, self.target)) {\n            return false;\n        }\n\n        // Events originating from a shadow DOM are re-targetted and `e.target` is the shadow host,\n        // not the initial event target in the shadow tree. Note that not all events cross the\n        // shadow boundary.\n        // For shadow trees with `mode: 'open'`, the initial event target is the first element in\n        // the events composed path. For shadow trees with `mode: 'closed'`, the initial event\n        // target cannot be obtained.\n        if ('composedPath' in e && typeof e.composedPath === 'function') {\n            // For open shadow trees, update `element` so that the following check works.\n            var initialEventTarget = e.composedPath()[0];\n            if (initialEventTarget !== e.target) {\n                element = initialEventTarget;\n            }\n        }\n\n        // stop for input, select, and textarea\n        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;\n    };\n\n    /**\n     * exposes _handleKey publicly so it can be overwritten by extensions\n     */\n    Mousetrap.prototype.handleKey = function() {\n        var self = this;\n        return self._handleKey.apply(self, arguments);\n    };\n\n    /**\n     * allow custom key mappings\n     */\n    Mousetrap.addKeycodes = function(object) {\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                _MAP[key] = object[key];\n            }\n        }\n        _REVERSE_MAP = null;\n    };\n\n    /**\n     * Init the global mousetrap functions\n     *\n     * This method is needed to allow the global mousetrap functions to work\n     * now that mousetrap is a constructor function.\n     */\n    Mousetrap.init = function() {\n        var documentMousetrap = Mousetrap(document);\n        for (var method in documentMousetrap) {\n            if (method.charAt(0) !== '_') {\n                Mousetrap[method] = (function(method) {\n                    return function() {\n                        return documentMousetrap[method].apply(documentMousetrap, arguments);\n                    };\n                } (method));\n            }\n        }\n    };\n\n    Mousetrap.init();\n\n    // expose mousetrap to the global object\n    window.Mousetrap = Mousetrap;\n\n    // expose as a common js module\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Mousetrap;\n    }\n\n    // expose mousetrap as an AMD module\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return Mousetrap;\n        });\n    }\n}) (typeof window !== 'undefined' ? window : null, typeof  window !== 'undefined' ? document : null);\n","'use strict';\n\nconst arrayUniq = array => [...new Set(array)];\n\nmodule.exports = arrayUniq;\n","'use strict';\n\nvar matchOperatorsRe = /[|\\\\{}()[\\]^$+*?.]/g;\n\nmodule.exports = function (str) {\n\tif (typeof str !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\treturn str.replace(matchOperatorsRe, '\\\\$&');\n};\n","/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n;(function(root, factory) {\n\t// https://github.com/umdjs/umd/blob/master/returnExports.js\n\tif (typeof exports == 'object') {\n\t\t// For Node.js.\n\t\tmodule.exports = factory(root);\n\t} else if (typeof define == 'function' && define.amd) {\n\t\t// For AMD. Register as an anonymous module.\n\t\tdefine([], factory.bind(root, root));\n\t} else {\n\t\t// For browser globals (not exposing the function separately).\n\t\tfactory(root);\n\t}\n}(typeof global != 'undefined' ? global : this, function(root) {\n\n\tif (root.CSS && root.CSS.escape) {\n\t\treturn root.CSS.escape;\n\t}\n\n\t// https://drafts.csswg.org/cssom/#serialize-an-identifier\n\tvar cssEscape = function(value) {\n\t\tif (arguments.length == 0) {\n\t\t\tthrow new TypeError('`CSS.escape` requires an argument.');\n\t\t}\n\t\tvar string = String(value);\n\t\tvar length = string.length;\n\t\tvar index = -1;\n\t\tvar codeUnit;\n\t\tvar result = '';\n\t\tvar firstCodeUnit = string.charCodeAt(0);\n\t\twhile (++index < length) {\n\t\t\tcodeUnit = string.charCodeAt(index);\n\t\t\t// Note: theres no need to special-case astral symbols, surrogate\n\t\t\t// pairs, or lone surrogates.\n\n\t\t\t// If the character is NULL (U+0000), then the REPLACEMENT CHARACTER\n\t\t\t// (U+FFFD).\n\t\t\tif (codeUnit == 0x0000) {\n\t\t\t\tresult += '\\uFFFD';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is in the range [\\1-\\1F] (U+0001 to U+001F) or is\n\t\t\t\t// U+007F, []\n\t\t\t\t(codeUnit >= 0x0001 && codeUnit <= 0x001F) || codeUnit == 0x007F ||\n\t\t\t\t// If the character is the first character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039), []\n\t\t\t\t(index == 0 && codeUnit >= 0x0030 && codeUnit <= 0x0039) ||\n\t\t\t\t// If the character is the second character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039) and the first character is a `-` (U+002D), []\n\t\t\t\t(\n\t\t\t\t\tindex == 1 &&\n\t\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 &&\n\t\t\t\t\tfirstCodeUnit == 0x002D\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character-as-code-point\n\t\t\t\tresult += '\\\\' + codeUnit.toString(16) + ' ';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is the first character and is a `-` (U+002D), and\n\t\t\t\t// there is no second character, []\n\t\t\t\tindex == 0 &&\n\t\t\t\tlength == 1 &&\n\t\t\t\tcodeUnit == 0x002D\n\t\t\t) {\n\t\t\t\tresult += '\\\\' + string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If the character is not handled by one of the above rules and is\n\t\t\t// greater than or equal to U+0080, is `-` (U+002D) or `_` (U+005F), or\n\t\t\t// is in one of the ranges [0-9] (U+0030 to U+0039), [A-Z] (U+0041 to\n\t\t\t// U+005A), or [a-z] (U+0061 to U+007A), []\n\t\t\tif (\n\t\t\t\tcodeUnit >= 0x0080 ||\n\t\t\t\tcodeUnit == 0x002D ||\n\t\t\t\tcodeUnit == 0x005F ||\n\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 ||\n\t\t\t\tcodeUnit >= 0x0041 && codeUnit <= 0x005A ||\n\t\t\t\tcodeUnit >= 0x0061 && codeUnit <= 0x007A\n\t\t\t) {\n\t\t\t\t// the character itself\n\t\t\t\tresult += string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Otherwise, the escaped character.\n\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character\n\t\t\tresult += '\\\\' + string.charAt(index);\n\n\t\t}\n\t\treturn result;\n\t};\n\n\tif (!root.CSS) {\n\t\troot.CSS = {};\n\t}\n\n\troot.CSS.escape = cssEscape;\n\treturn cssEscape;\n\n}));\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".proofread{white-space:pre}.mistake,.mistake .any{background-color:#f04600;background-clip:padding-box;border:4px solid rgba(240,70,0,.1);border-radius:2px;cursor:help;margin:-4px;position:relative;transition:border-color 250ms 100ms}.mistake:hover,.mistake .any:hover{border-color:rgba(240,70,0,.6);transition-delay:0ms}.verified,.verified .any{background-color:#55dc00}.any{background-color:#5582fa}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"proofread\": \"proofread\",\n\t\"mistake\": \"mistake\",\n\t\"any\": \"any\",\n\t\"verified\": \"verified\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#better-sweclockers-document .better-sweclockers-button-restore-draft{animation:pulse 2s 1;animation-delay:.2s;float:right;margin:0;margin-right:32px}@keyframes pulse{0%{box-shadow:0 0 0 rgba(50,200,0,.75)}100%{box-shadow:0 0 15px 50px rgba(50,200,0,0)}}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"better-sweclockers-document\": \"better-sweclockers-document\",\n\t\"better-sweclockers-button-restore-draft\": \"better-sweclockers-button-restore-draft\",\n\t\"pulse\": \"pulse\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".search-field{margin-left:40px}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"search-field\": \"search-field\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"@media(max-width: 992.9px){#menuLock,#menuLockOpen{display:none}}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"menuLock\": \"menuLock\",\n\t\"menuLockOpen\": \"menuLockOpen\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#better-sweclockers-developer-tools{background:#000;bottom:0;box-sizing:border-box;display:flex;flex-direction:column;max-height:50vh;outline:1px solid #444;position:fixed;z-index:9999}#better-sweclockers-developer-tools[data-how-many=\\\"0\\\"]:not(:hover):not(.open){opacity:.25}#better-sweclockers-developer-tools .better-sweclockers-error{color:#d00}#better-sweclockers-developer-tools .better-sweclockers-warning{color:#ec0}#better-sweclockers-developer-tools>a{display:block;padding:1em}#better-sweclockers-developer-tools>a:hover{background-color:rgba(255,255,255,.1);text-decoration:none}#better-sweclockers-developer-tools>a strong{display:inline-block;width:4em}#better-sweclockers-developer-tools>a strong[data-how-many=\\\"0\\\"]{opacity:.25}#better-sweclockers-developer-tools>a strong:not(:last-of-type){margin-right:1em}#better-sweclockers-developer-tools ol{background-color:rgba(255,255,255,.1);border:1px solid #444;color:#bbb;display:none;font-family:monospace;margin:0 1em 1em 1em;overflow-y:scroll;white-space:pre-wrap}#better-sweclockers-developer-tools ol li{border-color:#444;border-top-style:solid;border-width:1px;padding:.5em}#better-sweclockers-developer-tools ol li:first-of-type{border-top-style:none}#better-sweclockers-developer-tools ol li.error{background-color:rgba(221,0,0,.08);border-color:rgba(221,0,0,.3)}#better-sweclockers-developer-tools ol li.warning{background-color:rgba(238,204,0,.08);border-color:rgba(238,204,0,.3)}#better-sweclockers-developer-tools.open{opacity:1;width:100vw}#better-sweclockers-developer-tools.open ol{display:block}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"better-sweclockers-developer-tools\": \"better-sweclockers-developer-tools\",\n\t\"open\": \"open\",\n\t\"better-sweclockers-error\": \"better-sweclockers-error\",\n\t\"better-sweclockers-warning\": \"better-sweclockers-warning\",\n\t\"error\": \"error\",\n\t\"warning\": \"warning\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#better-sweclockers-document .better-sweclockers-shibe,#better-sweclockers-document .better-sweclockers-shibe *{color:red;font-family:Comic Sans MS, Chalkboard SE, sans-serif;font-style:italic;white-space:pre}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"better-sweclockers-document\": \"better-sweclockers-document\",\n\t\"better-sweclockers-shibe\": \"better-sweclockers-shibe\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"body{padding:8px}body *{display:none !important}body::after{content:\\\"Nere fr underhll\\\";font:16px \\\"Courier New\\\",monospace}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#better-sweclockers-document #better-sweclockers-editing-tools{margin:1px;line-height:0}#better-sweclockers-document #better-sweclockers-editing-tools>*{vertical-align:top;margin-top:0;margin-bottom:6px;margin-left:0}#better-sweclockers-document .better-sweclockers-editing-tools big{font-size:1.25em}#better-sweclockers-document .better-sweclockers-editing-tools small{font-size:.75em}#better-sweclockers-document .better-sweclockers-editing-tools .button{height:23px;box-sizing:border-box;margin:0 1px 0 0}#better-sweclockers-document .better-sweclockers-editing-tools .button *{line-height:0}#better-sweclockers-document .better-sweclockers-editing-tools .button:last-of-type{margin-right:0}#better-sweclockers-document .better-sweclockers-editing-tools fieldset{display:block;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-color-palette{opacity:.5;transition:opacity 100ms linear}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-color-palette>*{border:none;margin:0 !important;width:20px;height:20px}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-color-palette>*:hover{width:24px;height:24px;margin:-2px !important;border-radius:3px;z-index:9}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-color-palette:hover,#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-color-palette:active{opacity:1}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-smileys>*{opacity:.5;padding:0 1px;transition:opacity 50ms linear}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-smileys>*:hover,#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-smileys>*:active{opacity:1}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-button-color{background:linear-gradient(to bottom, rgba(255, 255, 255, 0.1) 0%, rgba(0, 0, 0, 0.1) 100%),linear-gradient(to right, rgba(255, 0, 0, 0.7) 0%, rgba(255, 153, 50, 0.7) 16%, rgba(247, 227, 49, 0.7) 33%, rgba(62, 211, 42, 0.7) 49%, rgba(46, 117, 232, 0.7) 66%, rgba(90, 45, 226, 0.7) 83%, rgba(152, 25, 198, 0.7) 100%)}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-button-color:hover,#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-button-color:focus{background:linear-gradient(to bottom, rgba(255, 255, 255, 0.2) 0%, rgba(100, 100, 100, 0.2) 100%),linear-gradient(to right, rgba(255, 0, 0, 0.7) 0%, rgba(255, 153, 50, 0.7) 16%, rgba(247, 227, 49, 0.7) 33%, rgba(62, 211, 42, 0.7) 49%, rgba(46, 117, 232, 0.7) 66%, rgba(90, 45, 226, 0.7) 83%, rgba(152, 25, 198, 0.7) 100%) !important}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-button-color:active{background:linear-gradient(to top, rgba(255, 255, 255, 0.1) 0%, rgba(0, 0, 0, 0.1) 100%),linear-gradient(to right, rgba(255, 0, 0, 0.7) 0%, rgba(255, 153, 50, 0.7) 16%, rgba(247, 227, 49, 0.7) 33%, rgba(62, 211, 42, 0.7) 49%, rgba(46, 117, 232, 0.7) 66%, rgba(90, 45, 226, 0.7) 83%, rgba(152, 25, 198, 0.7) 100%) !important}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-button-blockquote div{font-family:\\\"Georgia\\\",serif;font-size:30px;line-height:24px}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-button-spoiler{background:linear-gradient(to bottom, rgba(255, 255, 255, 0.1) 0%, rgba(0, 0, 0, 0.1) 100%),#222;color:#eee;border-color:#000}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-button-spoiler:hover,#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-button-spoiler:focus{background:linear-gradient(to bottom, rgba(255, 255, 255, 0.2) 0%, rgba(100, 100, 100, 0.2) 100%),#222 !important}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-button-spoiler:active{box-shadow:inset 1px 1px 1px rgba(0,0,0,.25);background:linear-gradient(to top, rgba(255, 255, 255, 0.1) 0%, rgba(0, 0, 0, 0.1) 100%),#222 !important}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-button-code{font-family:\\\"Courier New\\\",monospace;font-weight:normal;font-size:11px}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-button-math{font-family:\\\"Times New Roman\\\",serif}#better-sweclockers-document .better-sweclockers-editing-tools .better-sweclockers-button-math span{opacity:.5}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"better-sweclockers-document\": \"better-sweclockers-document\",\n\t\"better-sweclockers-editing-tools\": \"better-sweclockers-editing-tools\",\n\t\"button\": \"button\",\n\t\"better-sweclockers-color-palette\": \"better-sweclockers-color-palette\",\n\t\"better-sweclockers-smileys\": \"better-sweclockers-smileys\",\n\t\"better-sweclockers-button-color\": \"better-sweclockers-button-color\",\n\t\"better-sweclockers-button-blockquote\": \"better-sweclockers-button-blockquote\",\n\t\"better-sweclockers-button-spoiler\": \"better-sweclockers-button-spoiler\",\n\t\"better-sweclockers-button-code\": \"better-sweclockers-button-code\",\n\t\"better-sweclockers-button-math\": \"better-sweclockers-button-math\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#better-sweclockers-document .stickyFooter>.top>.inner{padding-bottom:0}#better-sweclockers-document .stickyFooter>.bottom{display:none}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"better-sweclockers-document\": \"better-sweclockers-document\",\n\t\"stickyFooter\": \"stickyFooter\",\n\t\"top\": \"top\",\n\t\"inner\": \"inner\",\n\t\"bottom\": \"bottom\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".forum-post.isReader .forum-post-header,.forum-post.isReader .forum-post-body{border-left-width:4px}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"forum-post\": \"forum-post\",\n\t\"isReader\": \"isReader\",\n\t\"forum-post-header\": \"forum-post-header\",\n\t\"forum-post-body\": \"forum-post-body\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#better-sweclockers-document .proofDialog{position:fixed;height:100vh;width:100%;display:flex;align-items:center;top:0;left:0;pointer-events:none}#better-sweclockers-document .proofDialog .wndModalOverlay{display:none}#better-sweclockers-document .proofDialog .wndWindowArea{border:none;top:initial !important;opacity:.5;transition:opacity 200ms ease-in-out;pointer-events:initial;left:706px !important}@media screen and (min-width: 1012px)and (max-width: 1100px){#better-sweclockers-document .proofDialog .wndWindowArea{left:calc(50% + 206px) !important}}@media screen and (min-width: 1262px){#better-sweclockers-document .proofDialog .wndWindowArea{left:calc(50% + 81px) !important}}#better-sweclockers-document .proofDialog .wndWindowArea:hover,#better-sweclockers-document .proofDialog .wndWindowArea:focus-within{opacity:1}#better-sweclockers-document .proofDialog .wndWindowArea>.inner{box-shadow:0 0 20px #000;padding:0}#better-sweclockers-document .proofDialog .wndFrameDecorator{border-width:1px}#better-sweclockers-document .proofDialog .infoText{display:none}#better-sweclockers-document .proofDialog .tanukiTextarea textarea{height:240px}#better-sweclockers-document #proofArticle{background-color:#da6b0f;border-bottom-left-radius:6px;border-bottom-right-radius:6px;bottom:0;left:-1px;opacity:.3;padding:4px 8px;position:fixed;transform:rotate(-90deg);transform-origin:top left;z-index:100}#better-sweclockers-document #proofArticle:hover,#better-sweclockers-document #proofArticle:focus{opacity:1}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"better-sweclockers-document\": \"better-sweclockers-document\",\n\t\"proofDialog\": \"proofDialog\",\n\t\"wndModalOverlay\": \"wndModalOverlay\",\n\t\"wndWindowArea\": \"wndWindowArea\",\n\t\"inner\": \"inner\",\n\t\"wndFrameDecorator\": \"wndFrameDecorator\",\n\t\"infoText\": \"infoText\",\n\t\"tanukiTextarea\": \"tanukiTextarea\",\n\t\"proofArticle\": \"proofArticle\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".bbImage .imgControls{opacity:0;transition:opacity 250ms}.bbImage:hover .imgControls,.bbImage:focus .imgControls{opacity:1}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"bbImage\": \"bbImage\",\n\t\"imgControls\": \"imgControls\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".list-actions{margin-bottom:6px}.pages>a,.pages>span{align-items:center;box-sizing:border-box;display:flex;height:32px;justify-content:center;margin-right:0;width:32px}.pages>a>span,.pages>span>span{padding:0;height:1.2em}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"list-actions\": \"list-actions\",\n\t\"pages\": \"pages\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ad.adInsider{height:370px;overflow:hidden}.adModule{height:341px;overflow:hidden}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"ad\": \"ad\",\n\t\"adInsider\": \"adInsider\",\n\t\"adModule\": \"adModule\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".better-sweclockers-icon-button{box-sizing:border-box;height:23px;padding:4px 6px}.better-sweclockers-icon-button img,.better-sweclockers-icon-button svg,.better-sweclockers-icon-button div{display:inline-block;height:16px;position:relative;top:-1px;vertical-align:top;width:16px}.better-sweclockers-pm-button{margin-left:8px;margin-bottom:0}.better-sweclockers-checkbox input{margin-right:4px;position:relative;top:-1px;vertical-align:middle}textarea.better-sweclockers-code-input,.better-sweclockers-code-input textarea{font-family:monospace}.forum-post .controls .better-sweclockers-quote-signature-button{float:right;margin-right:10px}.forum-post .controls .better-sweclockers-quote-signature-button>button{margin-right:0}.forum-post .controls .better-sweclockers-quote-signature-button>button[disabled]{pointer-events:unset}.mistake{border-color:rgba(240,70,0,.6)}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"better-sweclockers-icon-button\": \"better-sweclockers-icon-button\",\n\t\"better-sweclockers-pm-button\": \"better-sweclockers-pm-button\",\n\t\"better-sweclockers-checkbox\": \"better-sweclockers-checkbox\",\n\t\"better-sweclockers-code-input\": \"better-sweclockers-code-input\",\n\t\"forum-post\": \"forum-post\",\n\t\"controls\": \"controls\",\n\t\"better-sweclockers-quote-signature-button\": \"better-sweclockers-quote-signature-button\",\n\t\"mistake\": \"mistake\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".better-sweclockers-mention-everyone-button{display:inline;margin-right:8px}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"better-sweclockers-mention-everyone-button\": \"better-sweclockers-mention-everyone-button\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".menuItems{padding-bottom:21px}.menuItems .menuItem[title=\\\"Better SweClockers\\\"]{margin-bottom:-21px}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"menuItems\": \"menuItems\",\n\t\"menuItem\": \"menuItem\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"@media(max-width: 576.9px){.pw-notifications{margin-left:-34px;z-index:10}}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"pw-notifications\": \"pw-notifications\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"body>*{display:none}form#better-sweclockers{width:640px;margin:32px auto;display:block}form#better-sweclockers img{max-width:100%}form#better-sweclockers aside,form#better-sweclockers #better-sweclockers-editing-tools{transition-property:opacity;transition-duration:250ms}form#better-sweclockers .better-sweclockers-preference{clear:left}form#better-sweclockers .better-sweclockers-preference>label::after{content:\\\":\\\"}form#better-sweclockers .better-sweclockers-preference>label.better-sweclockers-labeledInput::after{content:unset}form#better-sweclockers .better-sweclockers-preference input+label::after,form#better-sweclockers .better-sweclockers-preference select+label::after,form#better-sweclockers .better-sweclockers-preference textarea+label::after{content:unset}form#better-sweclockers .s5fieldset{padding:8px 16px;margin:16px 0 24px 0;border:1px solid gray;border-radius:4px}form#better-sweclockers .s5fieldset>legend{font-size:unset;margin-bottom:unset;padding:0 4px;width:unset}form#better-sweclockers .better-sweclockers-radioButtonPreference{display:inline-block;margin-bottom:unset;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}form#better-sweclockers .better-sweclockers-radioButtonPreference>label:first-child::after{content:\\\":\\\"}form#better-sweclockers .better-sweclockers-radioButtonPreference input[type=radio]{margin-left:16px}form#better-sweclockers textarea{box-sizing:border-box;display:block;height:6em;resize:vertical;width:100%}form#better-sweclockers .better-sweclockers-inline-preference{float:left}form#better-sweclockers .better-sweclockers-inline-preference:not(.better-sweclockers-primary-inline-preference){clear:unset}form#better-sweclockers .better-sweclockers-inline-preference>label::after{content:unset}form#better-sweclockers .better-sweclockers-inline-preference input[type=text],form#better-sweclockers .better-sweclockers-inline-preference input[type=number],form#better-sweclockers .better-sweclockers-inline-preference input[type=time]{margin:0}form#better-sweclockers .better-sweclockers-inline-preference:not(.better-sweclockers-primary-inline-preference) label::after,form#better-sweclockers .better-sweclockers-inline-preference:not(.better-sweclockers-primary-inline-preference) label:first-child::before{content:\\\"\\\"}form#better-sweclockers .better-sweclockers-inline-preference:not(.better-sweclockers-primary-inline-preference) input[type=checkbox]{margin-left:.75em}form#better-sweclockers input{vertical-align:middle}form#better-sweclockers label{display:inline-block;padding:6px 0;margin:0}form#better-sweclockers label kbd{font-family:monospace;background-color:rgba(160,160,160,.05);border:1px solid rgba(160,160,160,.15);border-radius:3px;padding:1px 2px}form#better-sweclockers input[type=checkbox],form#better-sweclockers input[type=radio]{margin:0;margin-right:.5em}form#better-sweclockers input[type=text],form#better-sweclockers input[type=number],form#better-sweclockers input[type=time]{margin:.33em 0;width:5em}form#better-sweclockers input[type=text]+label::before,form#better-sweclockers input[type=number]+label::before,form#better-sweclockers input[type=time]+label::before{content:\\\"\\\"}form#better-sweclockers aside{display:inline-block;margin-left:12px;opacity:0;pointer-events:none}form#better-sweclockers .better-sweclockers-preference:hover>aside{opacity:1;transition-duration:500ms}form#better-sweclockers #better-sweclockers-editing-tools{height:200px}form#better-sweclockers .better-sweclockers-code-input::after{color:#d00;content:\\\"Klistra aldrig in kod som du inte litar p!\\\";display:block;font-weight:bold;margin-top:.4em;opacity:0;transition:opacity 200ms 100ms}form#better-sweclockers .better-sweclockers-code-input:hover::after,form#better-sweclockers .better-sweclockers-code-input:focus-within::after{opacity:1}form#better-sweclockers #better-sweclockers-interests-preferences{columns:2}form#better-sweclockers #better-sweclockers-interests-preferences .better-sweclockers-subforum{padding-left:2em}form#better-sweclockers .better-sweclockers-disabled{opacity:.25;pointer-events:none}form#better-sweclockers footer{text-align:center;opacity:.8}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"better-sweclockers\": \"better-sweclockers\",\n\t\"better-sweclockers-editing-tools\": \"better-sweclockers-editing-tools\",\n\t\"better-sweclockers-preference\": \"better-sweclockers-preference\",\n\t\"better-sweclockers-labeledInput\": \"better-sweclockers-labeledInput\",\n\t\"s5fieldset\": \"s5fieldset\",\n\t\"better-sweclockers-radioButtonPreference\": \"better-sweclockers-radioButtonPreference\",\n\t\"better-sweclockers-inline-preference\": \"better-sweclockers-inline-preference\",\n\t\"better-sweclockers-primary-inline-preference\": \"better-sweclockers-primary-inline-preference\",\n\t\"better-sweclockers-code-input\": \"better-sweclockers-code-input\",\n\t\"better-sweclockers-interests-preferences\": \"better-sweclockers-interests-preferences\",\n\t\"better-sweclockers-subforum\": \"better-sweclockers-subforum\",\n\t\"better-sweclockers-disabled\": \"better-sweclockers-disabled\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#header a[href=\\\"/forum/foljda\\\"].color-orange span{color:gray !important}#header a[href=\\\"/forum/foljda\\\"].color-orange svg,#header a[href=\\\"/forum/foljda\\\"].color-orange path{fill:gray !important}#header a[href=\\\"/profil/inlagg\\\"] svg+span{margin-right:6.5px !important}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"header\": \"header\",\n\t\"color-orange\": \"color-orange\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#better-sweclockers-document .tbGroup.better-sweclockers-textarea-size{float:right}#better-sweclockers-document .tbGroup.better-sweclockers-textarea-size .btnIcon{background:none}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"better-sweclockers-document\": \"better-sweclockers-document\",\n\t\"tbGroup\": \"tbGroup\",\n\t\"better-sweclockers-textarea-size\": \"better-sweclockers-textarea-size\",\n\t\"btnIcon\": \"btnIcon\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".forumThread.better-sweclockers-uninteresting{opacity:.3;transition:opacity 200ms ease-out}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"forumThread\": \"forumThread\",\n\t\"better-sweclockers-uninteresting\": \"better-sweclockers-uninteresting\"\n};\nmodule.exports = exports;\n","export function compose() {\n    switch (arguments.length) {\n        case 1: return _compose1(arguments[0]);\n        case 2: return _compose2(arguments[0], arguments[1]);\n        case 3: return _compose3(arguments[0], arguments[1], arguments[2]);\n        case 4: return _compose4(arguments[0], arguments[1], arguments[2], arguments[3]);\n        case 5: return _compose5(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]);\n    }\n    ;\n}\nfunction _compose1(f) {\n    return function compose1Fn(a) {\n        return f(a);\n    };\n}\nfunction _compose2(g, f) {\n    return function compose2Fn(a) {\n        return g(f(a));\n    };\n}\nfunction _compose3(h, g, f) {\n    return function compose3Fn(a) {\n        return h(g(f(a)));\n    };\n}\nfunction _compose4(i, h, g, f) {\n    return function compose3Fn(a) {\n        return i(h(g(f(a))));\n    };\n}\nfunction _compose5(j, i, h, g, f) {\n    return function compose5Fn(a) {\n        return j(i(h(g(f(a)))));\n    };\n}\n//# sourceMappingURL=compose.js.map","export const ALWAYS = () => true;\nexport const NEVER = () => false;\nexport const DOMCONTENTLOADED = (state) => state !== \"loading\";\nexport const LOAD = (state) => state === \"complete\";\n","export function lines(s) {\n    return s === \"\" ? [] : s.replace(/\\n$/, \"\").split(\"\\n\");\n}\nexport function unlines(ls) {\n    return ls.map(line => line + \"\\n\").join(\"\");\n}\n//# sourceMappingURL=index.js.map","import { unlines } from \"lines-unlines\";\nconst INDENTATION = \"  \";\nfunction formatDependency(d) {\n    return INDENTATION + d.key + \": \" + d.selector;\n}\nexport function explanation(failure) {\n    switch (failure.result.reason) {\n        case 0:\n            return unlines([\n                `These dependencies were not found:`,\n                ``,\n                unlines(failure.result.dependencies.map(formatDependency)),\n            ]);\n        case 1:\n            return unlines([\n                `The operation failed with this error:`,\n                ``,\n                failure.result.message,\n            ]);\n    }\n}\nexport function failureDescriber(context) {\n    return failure => unlines([\n        `Could not ${failure.operation.description} on this page:`,\n        ``,\n        INDENTATION + location.href,\n        ``,\n        explanation(failure).trim(),\n        ``,\n        `This problem might be caused by ${context.siteName} changing its content/structure, in which case ${context.extensionName} needs to be updated accordingly. Otherwise, it's probably a bug in ${context.extensionName}.`,\n        ``,\n        `If you file a bug report, please include this message.`,\n    ]);\n}\n","let prefix = \"\";\nlet logger = console;\nexport function setPrefix(p) {\n    prefix = p;\n}\nexport function setLogger(l) {\n    logger = l;\n}\nexport function log(str) {\n    logger.log(prefix, str);\n}\nexport function info(str) {\n    logger.info(prefix, str);\n}\nexport function warning(str) {\n    logger.warn(prefix, str);\n}\nexport function error(str) {\n    logger.error(prefix, str);\n}\n","const MATCH_ALL = \"all\";\nconst MATCH_NONE = \"not all\";\nexport function stylesheet(spec) {\n    return spec;\n}\nexport function insert(stylesheets) {\n    const fragment = document.createDocumentFragment();\n    Object.entries(stylesheets).forEach(([_, sheet]) => {\n        const style = document.createElement(\"style\");\n        if (sheet.id !== undefined)\n            style.id = sheet.id;\n        style.textContent = sheet.css;\n        style.media = sheet.condition(window) ? MATCH_ALL : MATCH_NONE;\n        fragment.appendChild(style);\n    });\n    document.documentElement.appendChild(fragment);\n}\nconst setMediaQuery = (m) => (s) => {\n    const element = document.getElementById(s.id);\n    if (element !== null) {\n        element.setAttribute(\"media\", m);\n    }\n};\nexport const enable = setMediaQuery(MATCH_ALL);\nexport const disable = setMediaQuery(MATCH_NONE);\n","const TYPE_GUARDS_PRIMITIVE = [isBoolean, isNumber, isString, isSymbol, isNull, isUndefined];\nexport function isBoolean(x) {\n    return typeof x === \"boolean\";\n}\nexport function isNumber(x) {\n    return typeof x === \"number\";\n}\nexport function isString(x) {\n    return typeof x === \"string\";\n}\nexport function isSymbol(x) {\n    return typeof x === \"symbol\";\n}\nexport function isNull(x) {\n    return x === null;\n}\nexport function isUndefined(x) {\n    return x === undefined;\n}\nexport function isPrimitive(x) {\n    return TYPE_GUARDS_PRIMITIVE.some(f => f(x));\n}\nexport function isNonPrimitive(x) {\n    return !isPrimitive(x);\n}\nfunction namedFunction(name, fun) {\n    return Object.defineProperty(fun, \"name\", { value: name, writable: false });\n}\nfunction namedTypeGuard(creator, type, typeGuard) {\n    return namedFunction(`${creator.name}(${type.name})`, typeGuard);\n}\nexport function is(type) {\n    if (isPrimitive(type)) {\n        return (_) => false;\n    }\n    return namedTypeGuard(is, type, (x) => x instanceof type);\n}\nexport function isLike(reference) {\n    for (const f of TYPE_GUARDS_PRIMITIVE) {\n        if (f(reference)) {\n            return (x) => f(x);\n        }\n    }\n    if (is(Array)(reference)) {\n        const referenceAsArray = reference;\n        return (x) => is(Array)(x) && (referenceAsArray.length > 0 ? x.every(isLike(referenceAsArray[0])) : true);\n    }\n    if (reference.constructor === Object) {\n        return (x) => (![undefined, null].includes(x)\n            &&\n                Object.keys(reference).every(k => isLike(reference[k])(x[k])));\n    }\n    if (reference.constructor instanceof Function) {\n        return is(reference.constructor);\n    }\n    throw new TypeError(isLike.name + ` cannot use this object as reference because it has no constructor: ` + JSON.stringify(reference));\n}\n//# sourceMappingURL=is.js.map","import { isNull, isNumber, isString } from \"ts-type-guards\";\nconst SUCCESS = undefined;\nexport function operation(spec) {\n    return spec;\n}\nexport function run(plan) {\n    function recurse(operations, failures, triesLeft) {\n        const lastTry = isNumber(triesLeft) && triesLeft <= 0;\n        const operationsToRunNow = [];\n        const remaining = [];\n        const readyState = document.readyState;\n        for (const o of operations) {\n            const shouldRunNow = o.deferUntil === undefined || o.deferUntil(readyState);\n            (shouldRunNow ? operationsToRunNow : remaining).push(o);\n        }\n        for (const o of operationsToRunNow) {\n            const result = tryToPerform(o);\n            if (result !== SUCCESS) {\n                switch (result.reason) {\n                    case 0:\n                        lastTry ? failures.push({ result, operation: o }) : remaining.push(o);\n                        break;\n                    case 1:\n                        failures.push({ result, operation: o });\n                        break;\n                }\n            }\n        }\n        if (remaining.length > 0) {\n            setTimeout(() => recurse(remaining, failures, (isNumber(triesLeft)\n                ? triesLeft - 1\n                : plan.tryUntil(readyState) ? plan.extraTries : undefined)), plan.interval);\n        }\n        else if (failures.length > 0) {\n            plan.handleFailures(failures);\n        }\n    }\n    recurse(plan.operations.filter(o => o.condition(window)), []);\n}\nfunction tryToPerform(o) {\n    const dependencies = o.dependencies === undefined ? {} : o.dependencies;\n    const queryResults = Object.entries(dependencies).map(([key, selector]) => ({\n        key, selector,\n        element: document.querySelector(selector),\n    }));\n    const missingDependencies = queryResults.filter(x => isNull(x.element));\n    if (missingDependencies.length > 0) {\n        return { reason: 0, dependencies: missingDependencies };\n    }\n    const e = queryResults.reduce((acc, x) => Object.defineProperty(acc, x.key, { value: x.element }), {});\n    return fromActionResult(o.action(e));\n}\nfunction fromActionResult(r) {\n    return isString(r) ? { reason: 1, message: r } : SUCCESS;\n}\n","import * as log from \"./log\";\nimport * as operations from \"./operations\";\nimport * as stylesheets from \"./stylesheets\";\nexport function run(userscript) {\n    log.setPrefix(`[${userscript.name}]`);\n    const attr = attribute(userscript.id);\n    if (document.documentElement.hasAttribute(attr)) {\n        log.warning(`It looks as though ${userscript.name} has already run (because the attribute \"${attr}\" was found on <head>). Stopping.`);\n    }\n    else {\n        document.documentElement.setAttribute(attr, \"\");\n        userscript.initialAction();\n        stylesheets.insert(userscript.stylesheets);\n        operations.run(userscript.operationsPlan);\n    }\n}\nfunction attribute(id) {\n    return \"data-\" + id + \"-has-run\";\n}\n","export default {\n    id: \"better-sweclockers\",\n    name: \"Better SweClockers\",\n    version: \"TO_BE_REPLACED_DURING_BUILD\",\n    description: \"Extra functionality and improved usability for the SweClockers website.\",\n    author: \"Simon Alling\",\n    hostname: \"sweclockers.com\",\n    sitename: \"SweClockers\",\n    namespace: \"simonalling.se\",\n    runAt: \"document-start\",\n    noframes: true, // because SweClockers has frames with `src=\"\"`\n    hostedAt: \"https://simonalling.github.io/better-sweclockers/\",\n} as const;\n","export const r = String.raw;\n\nexport function fromMaybeUndefined<T>(fallback: T, x?: T): T {\n    return x === undefined ? fallback : x;\n}\n\nexport function truncate(maxTotalLength: number, s: string): string {\n    const REPLACEMENT = \"[]\" as const;\n    return (\n        s.length > maxTotalLength\n            ? s.slice(0, maxTotalLength - REPLACEMENT.length) + REPLACEMENT\n            : s\n    );\n}\n\nexport function withMaybe<A, B>(ma: A | null, f: (x: A) => B): void {\n    if (ma !== null) {\n        f(ma);\n    }\n}\n\nexport function yyyymmdd(date: Date): string {\n    const yyyy = date.getFullYear();\n    const mm = (date.getMonth() + 1 /* 0-indexed */).toString().padStart(2, \"0\");\n    const dd = date.getDate().toString().padStart(2, \"0\");\n    return yyyy + mm + dd;\n}\n","export const enum SearchEngine {\n    // Be careful! These strings are used in the UI.\n    GOOGLE = \"Google\",\n    DUCKDUCKGO = \"DuckDuckGo\",\n}\n\nfunction searchEngineURL(engine: SearchEngine): string {\n    switch (engine) {\n        case SearchEngine.GOOGLE: return \"https://google.com/search?q=\";\n        case SearchEngine.DUCKDUCKGO: return \"https://duckduckgo.com/?q=\";\n    }\n}\n\nexport function searchURL(engine: SearchEngine, completePhrase: string): string {\n    return searchEngineURL(engine) + completePhrase.trim().replace(/\\s+/g, \"+\");\n}\n","// This file cannot contain Webpack-resolved imports (e.g. \"~src/foo\").\n\nimport U from \"./userscript\";\nimport { r } from \"./utilities\";\n\nexport const USERSCRIPT_ID = U.id;\nexport const USERSCRIPT_NAME = U.name;\n\nexport const PREFIX_ID = USERSCRIPT_ID + \"-\";\nexport const PREFIX_CLASS = USERSCRIPT_ID + \"-\";\n\n// How long to wait between performing operations (DOM manipulation etc) during page load:\nexport const OPERATIONS_INTERVAL = 25; // ms\n// How many extra tries to perform after DOMContentLoaded before considering remaining operations failed:\nexport const OPERATIONS_EXTRA_TRIES = 3;\n\nconst i = (x: string) => PREFIX_ID + x;\nconst c = (x: string) => PREFIX_CLASS + x;\n\nexport const ID_STYLE_ELEMENT = i(\"main-style-element\");\nexport const EDITING_TOOLS_HEIGHT = \"200px\"; // to prevent jumping in preferences interface\n\n// distance between article and left side of improved corrections dialog\nexport const CORRECTIONS_DIALOG_OFFSET_PX = 20;\n\nexport const NBSP = \"\\u00A0\";\n\nexport const ID = {\n    developerTools: i(\"developer-tools\"),\n    document: i(\"document\"),\n    preferenceIdPrefix: i(\"preference-\"),\n    editingTools: i(\"editing-tools\"),\n    editingToolsPreferences: i(\"editing-tools-preferences\"),\n    darkThemeStylesheet: i(\"dark-theme-stylesheet\"),\n    darkThemeAdditions: i(\"dark-theme-additions\"),\n    interestsPreferences: i(\"interests-preferences\"),\n    style: {\n        proofreading: i(\"proofreading\"),\n    },\n} as const;\n\nexport const CLASS = {\n    mousetrap: \"mousetrap\",\n    developerTools: {\n        // I couldn't use \"error\", because Soitora's dark theme would give such elements a weird red background.\n        error: i(\"error\"),\n        warning: i(\"warning\"),\n    },\n    disabled: c(\"disabled\"),\n    editingTools: c(\"editing-tools\"),\n    iconButton: c(\"icon-button\"),\n    pmButton: c(\"pm-button\"),\n    quoteSignatureButton: c(\"quote-signature-button\"),\n    mentionEveryoneButton: c(\"mention-everyone-button\"),\n    shibe: c(\"shibe\"),\n    button_restoreDraft: c(\"button-restore-draft\"),\n    button_color: c(\"button-color\"),\n    button_blockquote: c(\"button-blockquote\"),\n    button_spoiler: c(\"button-spoiler\"),\n    button_code: c(\"button-code\"),\n    button_math: c(\"button-math\"),\n    splitQuote: c(\"split-quote\"),\n    colorPalette: c(\"color-palette\"),\n    smileys: c(\"smileys\"),\n    preference: c(\"preference\"),\n    preferenceDescription: c(\"preference-description\"),\n    inlinePreference: c(\"inline-preference\"),\n    primaryInlinePreference: c(\"primary-inline-preference\"),\n    radioButtonPreference: c(\"radioButtonPreference\"),\n    labeledInput: c(\"labeledInput\"), // <label><input ... /></label>\n    subforum: c(\"subforum\"),\n    textareaSize: c(\"textarea-size\"),\n    codeInput: c(\"code-input\"),\n    checkbox: c(\"checkbox\"),\n    uninteresting: c(\"uninteresting\"),\n} as const;\n\nexport const PATH = {\n    PREFERENCES: {\n        // Used for creating a link to the preferences menu:\n        link: (sweclockersSettingsPath: string): string => (\n            sweclockersSettingsPath + \"/\" + USERSCRIPT_ID\n        ),\n        // Used for checking whether we should show the preferences menu:\n        check: (sweclockersSettingsPath: RegExp): RegExp => (\n            new RegExp(sweclockersSettingsPath.source + r`\\/` + USERSCRIPT_ID)\n        ),\n    },\n} as const;\n\nexport const KEY = {\n    autosaved_draft: i(\"autosaved_draft\"),\n    caret_position: i(\"caret_position_in_textarea\"),\n    last_time_user_tried_to_submit: i(\"last_time_user_tried_to_submit\"),\n    developer_tools_open: i(\"developer_tools_open\"),\n    draft_mode: i(\"draft_mode\"),\n} as const;\n\nexport const URL_LOGO = \"https://github.com/SimonAlling/better-sweclockers/raw/master/docs/logo.png\";\n\nexport const CONTENT = {\n    indentation: \"    \",\n    shibeColor: `red`,\n    shibeFont: `Comic Sans MS, Chalkboard SE, sans-serif`, // must be without quotes to work in BB\n    splitQuoteEmptyLines: 3,\n    edit: `[b]EDIT:[/b] `,\n    doge: `[img]https://i.imgur.com/2IGEruO.png[/img]`,\n} as const;\n\nexport const ICONS = {\n    // Requiring an SVG file here throws when building.\n    BLOCKQUOTE: `<div></div>`,\n    DOGE: `https://i.imgur.com/2IGEruO.png`,\n} as const;\n\nexport const FOCUSABLE_ELEMENTS = [ \"textarea\", \"input\", \"select\" ] as const;\n\nexport { SearchEngine } from \"./search-engines\";\n","// This file cannot contain Webpack-resolved imports (e.g. \"~src/foo\").\n\nimport U from \"./userscript\";\n\nexport const NAME = U.sitename;\nexport const HOSTNAME = U.hostname;\nexport const HOSTNAME_MOBILE = `m.` + HOSTNAME;\n\nexport const STYLESHEET_URL = (yyyymmdd: string) => `/css/combine.min.sass.css?v=${yyyymmdd}`;\n\nexport const BANNER_HEIGHT_SIDE = `${370}px`; // default height of sidebar ad modules\nexport const BANNER_HEIGHT_MID = `${341}px`; // default height of front page inter-article ad modules\nexport const WRAPPER_WIDTH_WIDE_PX = 1250;\nexport const WRAPPER_WIDTH_NARROW_PX = 1000;\nexport const MAX_WIDTH_FOR_NARROW_LAYOUT_PX = 1100;\nexport const EXTRA_TAB_MARGIN = `${8}px`;\nexport const GUTTER_SIZE_PX = 6; // the small padding to the very left and right\nexport const ARTICLE_WIDTH_PX = 680;\nexport const WIDTH_WHERE_NARROW_LAYOUT_GOES_CENTERED = WRAPPER_WIDTH_NARROW_PX + 2 * GUTTER_SIZE_PX;\nexport const WIDTH_WHERE_WIDE_LAYOUT_GOES_CENTERED = WRAPPER_WIDTH_WIDE_PX + 2 * GUTTER_SIZE_PX;\n\nexport const ID = {\n    header: \"header\",\n    textarea: \"__laika_cnt.textarea.0\",\n    carousel: \"carousel\",\n    menuLockToggle: \"menuLock\",\n    menuLockToggleOpen: \"menuLockOpen\",\n    correctionsLink: \"proofArticle\",\n    postPreview: \"preview\",\n    latestNewsWidget: \"wdgtMainRecentNews\",\n    newInForumWidget_main: \"wdgtMainRecentThreads\",\n    newInForumWidget_side: \"wdgtSideRecentThreads\",\n    newInMarketWidget: \"wdgtSideRecentClassifieds\",\n    newInTestLabWidget: \"wdgtSideRecentReviews\",\n    inTheStoreWidget: \"wdgtSideGeeksShop\",\n    popularAtPrisjaktWidget: \"wdgtSidePopularProducts\",\n    newTechJobsWidget: \"wdgtSideMonsterJobs\",\n    externalNewsWidget: \"wdgtSideExternalFeeds\",\n} as const;\n\nexport const CLASS = {\n    fieldset: \"s5fieldset\",\n    button: \"button\",\n    link: \"link\",\n    icon: \"icon\",\n    label: \"label\",\n    disabled: \"is-disabled\",\n    inner: \"inner\",\n    colorOrange: \"color-orange\",\n    menuItem: \"menuItem\",\n    settingsNavigation: \"menuItems\",\n    forumPosts: \"forum-posts\",\n    forumPost: \"forum-post\",\n    forumPostProfileDetails: \"details\",\n    forumPostSignature: \"signature\",\n    forumPostControls: \"controls\",\n    forumPostByCurrentUser: \"isReader\", // Don't use isAuthor; it means submitted by OP!\n    bbcode: \"bbcode\",\n    bbDel: \"bbDel\",\n    bbImage: \"bbImage\",\n    bbIns: \"bbIns\",\n    imgControls: \"imgControls\",\n    notifications: \"pw-notifications\",\n    proofDialog: \"proofDialog\",\n    socialMediaButtons: [ `threadShare`, `greyContentShare`, `sideShare` ],\n    sideBox: \"sideBox\",\n    smiley: \"smiley\",\n    subforums: \"subforums\",\n    toolbarGroup: \"tbGroup\",\n    toolbarButton: \"tbButton iconButton noselect\",\n    toolbarButtonIcon: \"btnIcon\",\n    toolbarHeadingButton: \"header\",\n    toolbarTableButton: \"tbl\",\n} as const;\n\nexport const FORM = {\n    name: {\n        action: \"action\",\n        csrfToken: \"csrf\",\n        message: \"message\",\n        recipients: \"rcpt[]\",\n        title: \"title\",\n    },\n    value: {\n        preview: \"doPreview\",\n        submit: \"doSubmit\",\n    },\n} as const;\n\nexport const PATH = {\n    EDIT_MODE_FORUM: /^\\/forum\\/(.*\\/(svara(\\?citera)?|redigera)|ny-trad)/,\n    EDIT_MODE_MARKET: /^\\/marknad\\/(.+\\/(redigera|kontakt)|ny-annons)$/,\n    EDIT_MODE_MARKET_CONTACT: /^\\/marknad\\/.+\\/kontakt$/,\n    EDIT_MODE_PM: /^\\/medlem\\/\\d+\\/meddelanden\\/(?:nytt-meddelande|post\\/\\d+\\/(?:redigera|svara))/,\n    EDIT_MODE_REPORT: /^\\/(forum|marknad|medlem\\/\\d+\\/meddelanden)\\/.+\\/anmal$/,\n    EDIT_MODE_SIGNATURE: /^\\/medlem\\/\\d+\\/installningar\\/signatur$/,\n    SETTINGS: {\n        link: \"/profil/installningar\", // Relying on this path being redirected to the actual settings path allows us to create a link to the preferences page without knowing the user's ID.\n        check: /^\\/medlem\\/\\d+\\/installningar/, // Should not have a \"$\" because it should match subpaths too.\n    },\n    FOLLOWED: \"/forum/foljda\",\n    MY_POSTS: \"/profil/inlagg\",\n    SIGNIN: `/konto/logga-in`,\n    SIGNOUT: `/konto/logga-ut`,\n    ARTICLE: /^\\/artikel\\//,\n    GUIDE: /^\\/guide\\//,\n    NEWS: /^\\/nyhet\\//,\n    COMPETITION: /^\\/tavling\\//,\n    TEST: /^\\/test\\//,\n    TESTPILOT: /^\\/testpilot\\//,\n    FORUM_CATEGORY: /\\/forum\\/(\\d+)/,\n    FORUM: \"/forum\",\n    FORUM_THREADS_VIEW: /^\\/forum\\/(aktiva|obesvarade|foljda|skapade|lasta)$/,\n    PROFILE: (userId: number | \"\\\\d+\") => new RegExp(`^/medlem/${userId}$`),\n    THREAD: /^\\/(?:forum|medlem\\/\\d+\\/meddelanden)\\/trad\\//,\n    POST: /^\\/(?:forum|medlem\\/\\d+\\/meddelanden)\\/post\\//,\n    SUCCESSFULLY_SUBMITTED_FORUM_POST: /^\\/forum\\/post\\/\\d+$/,\n    SUCCESSFULLY_SUBMITTED_PM: /^\\/medlem\\/\\d+\\/meddelanden\\/(?:post\\/\\d+(?:#preview)?|trad\\/\\d+-.+)$/,\n    newPrivateMessage: (sender: number) => `/medlem/${sender}/meddelanden/nytt-meddelande`,\n    forumPost: (postID: string) => `/forum/post/${postID}`,\n    editPost: (postID: number) => `/forum/post/${postID}/redigera`,\n} as const;\n\nexport const TAG = {\n    abbr: \"abbr\",\n    b: \"b\",\n    bq: \"bq\",\n    cmd: \"cmd\",\n    code: \"code\",\n    color: \"color\",\n    del: \"del\",\n    dd: \"dd\",\n    dl: \"dl\",\n    dt: \"dt\",\n    expander: \"expander\",\n    font: \"font\",\n    h: \"h\",\n    i: \"i\",\n    img: \"img\",\n    ins: \"ins\",\n    mark: \"mark\",\n    math: \"math\",\n    noparse: \"noparse\",\n    pre: \"pre\",\n    quote: \"quote\",\n    size: \"size\",\n    spoiler: \"spoiler\",\n    sub: \"sub\",\n    sup: \"sup\",\n    u: \"u\",\n    url: \"url\",\n} as const;\n\nconst URL_ICONS_TOOLBAR = \"/gfx/toolbar2x.png\";\nexport const ICONS = {\n    toolbarIcon: (position: string): string => `<div style=\"background-image: url('${URL_ICONS_TOOLBAR}'); background-size: 500px auto; background-position: ${position};\"></div>`,\n    position_toolbar_url: \"0 -125px\",\n    position_toolbar_img: \"-50px -125px\",\n    settings: `<use xlink:href=\"#icon_settings\"></use>`,\n} as const;\n\nexport const MOBILE_SITE_DISCLAIMER = {\n    sentFrom: `Skickades frn`,\n    mobileSiteDomain: HOSTNAME_MOBILE,\n} as const;\n\nexport const USER_ID_NOT_LOGGED_IN = 1;\n\nexport function getUserID(): number | undefined {\n    const userID = (window as any)?.session?._userid;\n    return typeof userID === \"number\" ? userID : undefined;\n}\n\nexport function isValidUsername(s: string): boolean {\n    // https://www.sweclockers.com/konto/registrera\n    // \"Namnet kan innehlla 332 tecken: bokstver, siffror, mellanslag samt binde- och understreck.\"\n    // My experiments show that e.g.  and  are valid characters, and that the name cannot start or end with \" \", \"-\" or \"_\".\n    // That a username is \"valid\" does not necessarily mean that it can be used for registering a _new_ account, only that it might be in use by someone.\n    // For example, \".\" is forbidden, but has been allowed earlier: https://www.sweclockers.com/medlem/197838\n    // So has '\"': https://www.sweclockers.com/medlem/26129\n    // Weird Unicode intervals are \\u00C0-\\u00FF with  and  excluded.\n    // Regex matches \"Alling \", \"Alling-\" and \"Alling_\", so the reverse of the string must also be checked.\n    const REGEX_ALMOST_USERNAME = /^(?![ \\-_\"])[\\w\\d \\-.\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF]{3,32}$/;\n    return REGEX_ALMOST_USERNAME.test(s) && REGEX_ALMOST_USERNAME.test(s.split(\"\").reverse().join(\"\"));\n}\n","import * as CONFIG from \"./config\";\nimport * as SITE from \"./site\";\n\n// NOTE: Be careful with document.head here, as it may be null at the time of\n// userscript execution (e.g. in a background tab in Firefox)!\n\nexport const isOnBSCPreferencesPage = pathMatches(CONFIG.PATH.PREFERENCES.check(SITE.PATH.SETTINGS.check));\n\nexport const isOnSweclockersSettingsPage = pathMatches(SITE.PATH.SETTINGS.check) && !isOnBSCPreferencesPage;\nexport const isOnSomeProfilePage = pathMatches(SITE.PATH.PROFILE(\"\\\\d+\"));\n\nfunction pathMatches(r: RegExp): boolean {\n    return r.test(document.location.pathname);\n}\n\nexport const isInForumThreadsView = pathMatches(SITE.PATH.FORUM_THREADS_VIEW);\nexport const isInEditMode_forum = pathMatches(SITE.PATH.EDIT_MODE_FORUM);\nexport const isInEditMode_market = pathMatches(SITE.PATH.EDIT_MODE_MARKET);\nexport const isInEditMode_marketContact = pathMatches(SITE.PATH.EDIT_MODE_MARKET_CONTACT);\nexport const isInEditMode_PM = pathMatches(SITE.PATH.EDIT_MODE_PM);\nexport const isInEditMode_report = pathMatches(SITE.PATH.EDIT_MODE_REPORT);\nexport const isInEditMode_signature = pathMatches(SITE.PATH.EDIT_MODE_SIGNATURE);\nexport const mayHaveJustSubmittedForumPost = pathMatches(SITE.PATH.SUCCESSFULLY_SUBMITTED_FORUM_POST);\nexport const mayHaveJustSubmittedPM = pathMatches(SITE.PATH.SUCCESSFULLY_SUBMITTED_PM);\n\nexport const isInEditMode = [\n    isInEditMode_forum,\n    isInEditMode_market,\n    isInEditMode_PM,\n    isInEditMode_report,\n    isInEditMode_signature,\n].some(x => x);\n\nexport const isReadingEditorialContent = [\n    SITE.PATH.ARTICLE,\n    SITE.PATH.GUIDE,\n    SITE.PATH.NEWS,\n    SITE.PATH.COMPETITION,\n    SITE.PATH.TEST,\n    SITE.PATH.TESTPILOT,\n].some(pathMatches);\n\nexport const isReadingThread = !isInEditMode && [\n    SITE.PATH.THREAD,\n    SITE.PATH.POST,\n].some(pathMatches);\n\nexport const isReadingForumThread = isReadingThread && document.location.pathname.startsWith(SITE.PATH.FORUM);\n","import { is, isLike, isNull } from \"ts-type-guards\";\r\nexport var Status;\r\n(function (Status) {\r\n    Status[\"OK\"] = \"OK\";\r\n    Status[\"ABSENT\"] = \"ABSENT\";\r\n    Status[\"TYPE_ERROR\"] = \"TYPE_ERROR\";\r\n    Status[\"JSON_ERROR\"] = \"JSON_ERROR\";\r\n    Status[\"STORAGE_ERROR\"] = \"STORAGE_ERROR\";\r\n    Status[\"NUMBER_ERROR\"] = \"NUMBER_ERROR\";\r\n})(Status || (Status = {}));\r\nconst LOCAL_STORAGE = () => localStorage;\r\nconst SESSION_STORAGE = () => sessionStorage;\r\nexport function get(key, fallback) {\r\n    return getFrom(LOCAL_STORAGE, key, fallback);\r\n}\r\nexport function get_session(key, fallback) {\r\n    return getFrom(SESSION_STORAGE, key, fallback);\r\n}\r\nexport function set(key, value) {\r\n    return setIn(LOCAL_STORAGE, key, value);\r\n}\r\nexport function set_session(key, value) {\r\n    return setIn(SESSION_STORAGE, key, value);\r\n}\r\nexport function remove(key) {\r\n    return removeIn(LOCAL_STORAGE, key);\r\n}\r\nexport function remove_session(key) {\r\n    return removeIn(SESSION_STORAGE, key);\r\n}\r\nfunction getFrom(storage, key, fallback) {\r\n    try {\r\n        const savedValue = readFrom(storage(), key, fallback);\r\n        if (isNull(savedValue)) {\r\n            return {\r\n                status: \"ABSENT\",\r\n                value: fallback,\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                status: \"OK\",\r\n                value: savedValue,\r\n            };\r\n        }\r\n    }\r\n    catch (err) {\r\n        const status = (is(SyntaxError)(err) ? \"JSON_ERROR\"\r\n            :\r\n                is(TypeError)(err) ? \"TYPE_ERROR\"\r\n                    :\r\n                        \"STORAGE_ERROR\");\r\n        return {\r\n            status,\r\n            value: fallback,\r\n        };\r\n    }\r\n}\r\nfunction setIn(storage, key, value) {\r\n    try {\r\n        saveIn(storage(), key, value);\r\n        return {\r\n            status: \"OK\",\r\n            value,\r\n        };\r\n    }\r\n    catch (err) {\r\n        const status = (is(RangeError)(err) ? \"NUMBER_ERROR\"\r\n            :\r\n                is(SyntaxError)(err) || is(TypeError)(err) ? \"JSON_ERROR\"\r\n                    :\r\n                        \"STORAGE_ERROR\");\r\n        return {\r\n            status,\r\n            value,\r\n        };\r\n    }\r\n}\r\nfunction removeIn(storage, key) {\r\n    try {\r\n        storage().removeItem(key);\r\n        return {\r\n            status: \"OK\",\r\n            value: true,\r\n        };\r\n    }\r\n    catch (err) {\r\n        return {\r\n            status: \"STORAGE_ERROR\",\r\n            value: false,\r\n        };\r\n    }\r\n}\r\nfunction readFrom(storage, key, reference) {\r\n    if (storage === null) {\r\n        throw new DOMException();\r\n    }\r\n    const readValue = storage.getItem(key);\r\n    if (isNull(readValue)) {\r\n        return null;\r\n    }\r\n    const parsedValue = JSON.parse(readValue);\r\n    if (isLike(reference)(parsedValue)) {\r\n        return parsedValue;\r\n    }\r\n    throw new TypeError(`Saved value had wrong type.`);\r\n}\r\nfunction saveIn(storage, key, value) {\r\n    const replacer = (_key, v) => {\r\n        if (typeof v === \"number\" && !Number.isFinite(v)) {\r\n            throw new RangeError(v.toString());\r\n        }\r\n        return v;\r\n    };\r\n    const stringifiedValue = JSON.stringify(value, replacer);\r\n    if (storage === null) {\r\n        throw new DOMException();\r\n    }\r\n    storage.setItem(key, stringifiedValue);\r\n}\r\n//# sourceMappingURL=index.js.map","export function fromMaybe(fallback, x) {\r\n    return x === undefined ? fallback : x;\r\n}\r\nfunction replacer(key, value) {\r\n    switch (true) {\r\n        case Number.isNaN(value): return \"NaN\";\r\n        case value === Infinity: return \"Infinity\";\r\n        case value === -Infinity: return \"-Infinity\";\r\n        default: return value;\r\n    }\r\n}\r\nexport function stringify(x) {\r\n    return JSON.stringify(x, replacer);\r\n}\r\n//# sourceMappingURL=Utilities.js.map","import { isString } from \"ts-type-guards\";\r\nimport { fromMaybe, stringify, } from \"../Utilities\";\r\nexport function prependConstraints(cs, data) {\r\n    data.constraints = cs.concat(fromMaybe([], data.constraints));\r\n}\r\nexport class Preference {\r\n    constructor(data) {\r\n        if (data.key === \"\") {\r\n            throw new TypeError(`Empty preference key in this ${this.getClassName()}:\\n${stringify(data)}`);\r\n        }\r\n        this.key = data.key;\r\n        this.default = data.default;\r\n        this.label = data.label;\r\n        this.description = fromMaybe(\"\", data.description);\r\n        this.constraints = fromMaybe([], data.constraints);\r\n        this.dependencies = fromMaybe([], data.dependencies);\r\n        this.extras = fromMaybe({}, data.extras);\r\n        const validationResult = this.validate(data.default);\r\n        if (isString(validationResult)) {\r\n            this.invalidValue(data.default, validationResult);\r\n        }\r\n    }\r\n    validate(value) {\r\n        const constraints = this.constraints;\r\n        for (let i = 0, len = constraints.length; i < len; i++) {\r\n            const constraint = constraints[i];\r\n            if (!constraint.requirement(value)) {\r\n                return constraint.message(value);\r\n            }\r\n        }\r\n        return { value };\r\n    }\r\n    toValid(value) {\r\n        return isString(this.validate(value)) ? this.default : value;\r\n    }\r\n    toString() {\r\n        return `${this.getClassName()} '${this.key}'`;\r\n    }\r\n    invalidValue(value, message) {\r\n        throw new Error(`${stringify(value)} is not a valid value for ${this}. Reason: ${message}`);\r\n    }\r\n}\r\n//# sourceMappingURL=Preference.js.map","import * as Storage from \"ts-storage\";\r\nimport { is, isString } from \"ts-type-guards\";\r\nimport { Preference, } from \"./preferences/Preference\";\r\nimport { stringify } from \"./Utilities\";\r\nexport var Status;\r\n(function (Status) {\r\n    Status[Status[\"OK\"] = 0] = \"OK\";\r\n    Status[Status[\"INVALID_VALUE\"] = 1] = \"INVALID_VALUE\";\r\n    Status[Status[\"TYPE_ERROR\"] = 2] = \"TYPE_ERROR\";\r\n    Status[Status[\"JSON_ERROR\"] = 3] = \"JSON_ERROR\";\r\n    Status[Status[\"STORAGE_ERROR\"] = 4] = \"STORAGE_ERROR\";\r\n})(Status || (Status = {}));\r\nconst SIMPLE_RESPONSE_HANDLER = (summary, _) => summary.response;\r\nexport class PreferenceManager {\r\n    constructor(preferences, localStoragePrefix, responseHandler = SIMPLE_RESPONSE_HANDLER) {\r\n        this.localStoragePrefix = localStoragePrefix;\r\n        this.responseHandler = responseHandler;\r\n        this.cache = new Map();\r\n        const seenKeys = [];\r\n        const allPreferences = flatten(preferences);\r\n        allPreferences.forEach(p => {\r\n            const key = p.key;\r\n            if (seenKeys.includes(key)) {\r\n                throw new Error(`Duplicate preference key ${stringify(key)}.`);\r\n            }\r\n            this.cache.set(p, p.default);\r\n            seenKeys.push(key);\r\n        });\r\n        allPreferences.forEach(p => {\r\n            p.dependencies.forEach(dependency => {\r\n                if (this.cache.get(dependency.preference) === undefined) {\r\n                    throw new Error(`Dependency error in ${p}: ${unknown(dependency.preference)}`);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    get(preference) {\r\n        return this.getWith(this.responseHandler, preference);\r\n    }\r\n    set(preference, value) {\r\n        this.setWith(this.responseHandler, preference, value);\r\n    }\r\n    getWith(responseHandler, preference) {\r\n        return responseHandler({\r\n            action: \"get\",\r\n            preference,\r\n            response: this.getRaw(preference),\r\n        }, this).value;\r\n    }\r\n    setWith(responseHandler, preference, value) {\r\n        responseHandler({\r\n            action: \"set\",\r\n            preference,\r\n            response: this.setRaw(preference, value),\r\n        }, this);\r\n    }\r\n    reset(preference) {\r\n        this.getFromCacheOrThrowIfUnknown(preference);\r\n        Storage.remove(this.localStoragePrefix + preference.key);\r\n    }\r\n    resetAll() {\r\n        for (const p of this.cache.keys()) {\r\n            this.reset(p);\r\n        }\r\n    }\r\n    shouldBeAvailable(p) {\r\n        const isMet = (d) => d.condition(this.getRaw(d.preference).value);\r\n        return p.dependencies.every(isMet);\r\n    }\r\n    getRaw(preference) {\r\n        const cachedValue = this.getFromCacheOrThrowIfUnknown(preference);\r\n        const response = Storage.get(this.localStoragePrefix + preference.key, preference.default);\r\n        if (response.status === \"OK\") {\r\n            const savedValue = response.value;\r\n            const validationResult = preference.validate(savedValue);\r\n            return (isString(validationResult)\r\n                ? {\r\n                    status: 1,\r\n                    value: preference.toValid(savedValue),\r\n                    saved: savedValue,\r\n                }\r\n                : {\r\n                    status: 0,\r\n                    value: savedValue,\r\n                });\r\n        }\r\n        return {\r\n            status: fromStorageStatus(response.status),\r\n            value: cachedValue,\r\n        };\r\n    }\r\n    setRaw(preference, value) {\r\n        this.getFromCacheOrThrowIfUnknown(preference);\r\n        if (isString(preference.validate(value))) {\r\n            return {\r\n                status: 1,\r\n                value,\r\n            };\r\n        }\r\n        this.cache.set(preference, value);\r\n        const response = Storage.set(this.localStoragePrefix + preference.key, value);\r\n        return {\r\n            status: fromStorageStatus(response.status),\r\n            value: response.value,\r\n        };\r\n    }\r\n    getFromCacheOrThrowIfUnknown(preference) {\r\n        const cachedValue = this.cache.get(preference);\r\n        if (cachedValue === undefined) {\r\n            throw new Error(unknown(preference));\r\n        }\r\n        return cachedValue;\r\n    }\r\n}\r\nfunction unknown(p) {\r\n    return `Unknown preference:\\n\\n${stringify(p)}.`;\r\n}\r\nfunction flatten(tree) {\r\n    return Object.values(tree).reduce((acc, node) => acc.concat(is(Preference)(node) ? node : flatten(node._)), []);\r\n}\r\nfunction fromStorageStatus(s) {\r\n    switch (s) {\r\n        case \"OK\": return 0;\r\n        case \"ABSENT\": return 0;\r\n        case \"NUMBER_ERROR\": return 1;\r\n        case \"TYPE_ERROR\": return 2;\r\n        case \"JSON_ERROR\": return 3;\r\n        case \"STORAGE_ERROR\": return 4;\r\n    }\r\n}\r\n//# sourceMappingURL=PreferenceManager.js.map","import * as log from \"./log\";\nexport function subscriptable(handler) {\n    const changeListeners = new Set();\n    return {\n        subscribe: (listener) => { changeListeners.add(listener); },\n        unsubscribe: (listener) => { changeListeners.delete(listener); },\n        handler: (summary, preferences) => {\n            if (summary.action === \"set\") {\n                changeListeners.forEach(f => f(summary.preference));\n            }\n            return handler(summary, preferences);\n        },\n    };\n}\nexport function loggingResponseHandler(summary, preferences) {\n    const response = summary.response;\n    switch (response.status) {\n        case 0:\n            return response;\n        case 1:\n            if (summary.action === \"get\") {\n                log.warning(`The saved value for preference '${summary.preference.key}' (${JSON.stringify(response.saved)}) was invalid. Replacing it with ${JSON.stringify(response.value)}.`);\n                preferences.set(summary.preference, response.value);\n            }\n            if (summary.action === \"set\") {\n                log.warning(`Could not set value ${JSON.stringify(response.value)} for preference '${summary.preference.key}' because it was invalid.`);\n            }\n            return response;\n        case 2:\n            if (summary.action === \"get\") {\n                log.warning(`The saved value for preference '${summary.preference.key}' had the wrong type. Replacing it with ${JSON.stringify(response.value)}.`);\n                preferences.set(summary.preference, response.value);\n            }\n            return response;\n        case 3:\n            if (summary.action === \"get\") {\n                log.warning(`The saved value for preference '${summary.preference.key}' could not be parsed. Replacing it with ${JSON.stringify(response.value)}.`);\n                preferences.set(summary.preference, response.value);\n            }\n            return response;\n        case 4:\n            switch (summary.action) {\n                case \"get\":\n                    log.error(`Could not read preference '${summary.preference.key}' because localStorage could not be accessed. Using value ${JSON.stringify(summary.preference.default)}.`);\n                    break;\n                case \"set\":\n                    log.error(`Could not save value ${JSON.stringify(summary.response.value)} for preference '${summary.preference.key}' because localStorage could not be accessed.`);\n                    break;\n                default:\n                    assertUnreachable(summary.action);\n            }\n            return response;\n        default:\n            return assertUnreachable(response.status);\n    }\n}\nexport function noopResponseHandler(summary, _) {\n    return summary.response;\n}\nfunction assertUnreachable(x) {\n    throw new Error(\"assertUnreachable: \" + x);\n}\n","export const AUTHOR = \"Soitora\" as const;\nexport const URL = {\n    stylesheet: \"https://soitora.com/SweClockers-Dark/sweclockers-dark.css\",\n    info: \"/forum/trad/1515628\",\n} as const;\n","export function start(tagName, parameter) {\r\n    return `[${tagName}${parameter === undefined ? \"\" : `=\"${parameter}\"`}]`;\r\n}\r\nexport function end(tagName) {\r\n    return `[/${tagName}]`;\r\n}\r\nexport function empty(tagName, parameter) {\r\n    return start(tagName, parameter) + end(tagName);\r\n}\r\n//# sourceMappingURL=index.js.map","export function supportsUndo(userAgent: string): boolean {\n    /*\n    Hard to know for sure, but Gecko browsers don't support document.execCommand as of 2020-07-18 (Firefox 78).\n    https://bugzilla.mozilla.org/show_bug.cgi?id=1220696\n    \"Why not use feature detection?\" Because document.execCommand can't be feature-detected:\n\n        \"Note: Only returns true if part of a user interaction. Don't try using the return value to verify browser support before calling a command.\"\n\n    https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand#Return_value\n\n    Android doesn't support undo in general.\n    */\n\n    // Make sure the preference labels referencing this function match the implementation.\n    return ![\n        // Having functions, rather than their return values, in this list means we can reap the full benefits of short-circuiting (however important that may or may not be).\n        isGecko,\n        isAndroid,\n    ].some(f => f(userAgent));\n}\n\nexport function isGecko(userAgent: string): boolean {\n    // Many browsers have \"Gecko\" in their user agent strings, but I believe only Gecko ones have the eight-digit suffix.\n    return /Gecko\\/\\d{8}/.test(userAgent);\n}\n\nexport function isAndroid(userAgent: string): boolean {\n    return userAgent.includes(\"Android \");\n}\n","// This file cannot contain Webpack-resolved imports (e.g. \"~src/foo\").\n\nimport * as BB from \"bbcode-tags\";\n\nimport * as browser from \"./browser\";\nimport * as CONFIG from \"./config\";\nimport * as SITE from \"./site\";\nimport { InsertButtonDescription } from \"./types\";\n\nfunction genitive(name: string): string {\n    return [\"s\", \"x\", \"z\"].some(letter => name.endsWith(letter)) ? name : name + \"s\";\n}\n\nfunction darkThemeBy(author: string): string {\n    return `${genitive(author)} mrka tema`;\n}\n\nconst mention_everyone_label = `Nmn alla`;\nconst my_posts = `Mina inlgg`;\nconst down_for_maintenance = `Nere fr underhll`;\nconst draft_mode_toggle_label = `Utkast`;\nconst draft_mode_description = `Slipp posta ofrdiga inlgg av misstag`;\n\nconst OBVIOUS = `Som det lter`;\n\nexport const general = {\n    seconds: `sekunder`,\n    loading: `Laddar `,\n    dark_theme_toggle_tooltip: (author: string) => `${darkThemeBy(author)} p/av`,\n    preferences_link: CONFIG.USERSCRIPT_NAME,\n    signout_confirmation: `r du sker p att du vill logga ut?`,\n    draft_mode_toggle_label,\n    draft_mode_toggle_tooltip: draft_mode_description,\n    draft_mode_enabled_tooltip: `Kryssa ur \"${draft_mode_toggle_label}\" fr att posta`,\n    improved_url_button_url: `Adress (URL):`,\n    improved_url_button_text: `Lnktext:`,\n    restore_draft_label: `terstll`,\n    restore_draft_tooltip: `terstll autosparat utkast`,\n    restore_draft_question: `Vill du terstlla fljande utkast?`,\n    restore_draft_confirm: `Din nuvarande text kommer ersttas. r du sker?`,\n    nbsps_confirm: (n: number) => `${n} mellanslag kommer ersttas med hrda mellanslag. r du sker?`,\n    generic_lines_confirm: (n: number) => `${n} markerad${n > 1 ? \"e rader\" : \" rad\"} kommer formateras. r du sker?`,\n    quote_signature_label: `Citera med sign.`,\n    quote_signature_tooltip: `Citera inlgget och dess signatur`,\n    quote_signature_tooltip_no_signature: (author: string) => `${author} har ingen signatur`,\n    mention_everyone_label,\n    mention_everyone_tooltip: `Nmn alla trddeltagare p den hr sidan i ett nytt inlgg`,\n    uninteresting_subforum: (subforumName: string) => `Du har markerat kategorin ${subforumName} som ointressant.`,\n    pm_link_label: \"&nbsp;PM\",\n    go_to_post: `G till inlgget`,\n    link_to_top_tooltip: `G till toppen`,\n    textarea_size_small: `Liten textruta`,\n    textarea_size_large: `Stor textruta`,\n    tooltip_h: `Rubrik`,\n    tooltip_table: `Tabell`,\n    down_for_maintenance,\n    my_posts,\n} as const;\n\nexport const preferences = {\n    _: {\n        NO_LABEL: ``,\n        shortcut_label: `BSC`,\n        title: `Instllningar fr Better SweClockers`,\n        back_to_sweclockers: `Tillbaka till ${SITE.NAME}`,\n        save_notice: `Instllningarna sparas automatiskt, men endast lokalt p den hr enheten.`,\n        failed_to_fetch_categories: `Kunde inte hmta forumkategorier.`,\n        in_quick_reply_form: `i formulret <em>Snabbsvar</em>`,\n        in_quick_reply_form_description: `Lngst ner i trdar`,\n    },\n\n    general: {\n        label: `Allmnt`,\n        lock_heights: `Ls hjden p reklam etc`,\n        lock_heights_description: `Frhindrar att sidans innehll hoppar nr t ex reklam laddas in`,\n        improved_corrections: `Bttre rttelsegrnssnitt`,\n        improved_corrections_description: `Gr det enklare att skicka in rttelser`,\n        insert_preferences_shortcut: `Genvg till instllningar fr ${CONFIG.USERSCRIPT_NAME}`,\n        insert_preferences_shortcut_description: `Visa en lnk till ${CONFIG.USERSCRIPT_NAME} instllningsmeny hgst upp`,\n        replace_followed_threads_link: `Erstt lnken <em>Fljda trdar</em> med <em>${my_posts}</em>`,\n        replace_followed_threads_link_description: OBVIOUS,\n        remember_location_in_market: `Kom ihg min plats i marknaden`,\n        remember_location_in_market_description: `Slipp fylla i ln och stad varje gng du skapar en annons`,\n    },\n\n    forum_threads: {\n        label: `Forumtrdar`,\n        improved_pagination_buttons: `Bttre blddringsknappar`,\n        improved_pagination_buttons_description: `Strre knappar som r lttare att klicka p`,\n        insert_link_to_top: `Lnk till toppen lngst ner`,\n        insert_link_to_top_description: OBVIOUS,\n        highlight_own_posts: `Framhv egna inlgg extra tydligt`,\n        highlight_own_posts_description: `Gr den orangea kanten p egna inlgg tjockare`,\n        insert_pm_links: `PM-knappar`,\n        insert_pm_links_description: `Skicka PM till en anvndare direkt frn deras inlgg`,\n        mention_everyone_button: `<em>${mention_everyone_label}</em>-knapp`,\n        mention_everyone_button_description: `Nmn alla trddeltagare p den aktuella sidan (framfrallt anvndbart i annonskommentarer)`,\n        quote_signature_buttons: `<em>Citera med signatur</em>-knappar`,\n        quote_signature_buttons_description: `Citera ett inlgg inklusive dess signatur`,\n        quote_signature_message: `Meddelande vid citering med signatur`,\n        quote_signature_message_description: `Fylls i automatiskt nr du citerar med signatur`,\n        quote_signature_message_default: `Nu bestr trdens vrde ven nr du byter signatur.`,\n    },\n\n    edit_mode: {\n        label: `Redigeringslge`,\n        autosave_draft: `Spara utkast automatiskt`,\n        autosave_draft_description: `Skydda dina inlgg mot blskrmar, strmavbrott och andra missden`,\n        draft_mode_toggle: `Kryssrutan <em>${draft_mode_toggle_label}</em>`,\n        draft_mode_toggle_description: draft_mode_description,\n        textarea_size_save: `Kom ihg textrutans storlek`,\n        textarea_size_save_description: `Behll samma storlek p textrutan mellan sidladdningar`,\n        textarea_size_toggle: `Knappar fr att vxla storlek p textrutan`,\n        textarea_size_toggle_description: `Toggla textrutans storlek precis ovanfr den`,\n        textarea_size_small: `mellan`,\n        textarea_size_large: `och`,\n        textarea_size_unit: `px`,\n        monospace_font: `<span style=\"font-family: monospace\">Monospace</span>-font i textrutan`,\n        monospace_font_description: `Underlttar formatering av kod och dylikt`,\n        keyboard_shortcuts: `Kortkommandon fr att skicka (<kbd>Ctrl</kbd> + <kbd>S</kbd>), frhandsgranska (<kbd>Ctrl</kbd> + <kbd>P</kbd>) och lnka (<kbd>Ctrl</kbd> + <kbd>K</kbd>)`,\n        keyboard_shortcuts_description: `Skicka, frhandsgranska och lnka med tangentbordet`,\n        insert_tab: `Tab-tangenten infogar`,\n        insert_tab_description: `Anvnd Tab-tangenten i textrutan`,\n        insert_tab_spaces: (n: number) => `${n} blanksteg`,\n        insert_tab_tab: `tabbtecken`,\n        improved_builtin_editing_tools: `Frbttrade inbyggda redigeringsverktyg`,\n        improved_builtin_editing_tools_description: `Mer intuitiv funktionalitet och ngra-std (i webblsare som stder det)`,\n        insert_heading_toolbar_button: `Knapp fr att formatera som rubrik`,\n        insert_heading_toolbar_button_description: `Knappen infogar BB-taggen ${BB.start(SITE.TAG.h)}`,\n        insert_table_toolbar_button: `Knapp fr att infoga tabell`,\n        insert_table_toolbar_button_description: `Knappen infogar en komplett tabell`,\n        remember_caret_position: `Kom ihg markrens position vid frhandsgranskning`,\n        remember_caret_position_description: `Fortstt skriva precis dr du var nr du frhandsgranskat ett inlgg`,\n        remove_mobile_site_disclaimer: `Ta bort <small><em>${SITE.MOBILE_SITE_DISCLAIMER.sentFrom} ${SITE.MOBILE_SITE_DISCLAIMER.mobileSiteDomain}</em></small>`,\n        remove_mobile_site_disclaimer_description: `Ta automatiskt bort ${SITE.MOBILE_SITE_DISCLAIMER.mobileSiteDomain}-disclaimern frn citat`,\n    },\n\n    editing_tools: {\n        label: `Utkade formateringsverktyg`,\n        enable: `Aktivera utkade formateringsverktyg`,\n        enable_description: `En hel samling extra formateringsverktyg fr att underltta inlggsskrivandet`,\n        position: {\n            label: `Placering`,\n            description: OBVIOUS,\n            above: `Ovanfr textfltet`,\n            below: `Under textfltet`,\n        },\n        special_characters: `Verktyg fr specialtecken`,\n        meta: `Verktyg fr tillagd och borttagen text`,\n        code: `Kodrelaterade verktyg`,\n        math: `Matematikrelaterade verktyg`,\n        whitespace: `Whitespaceverktyg`,\n        definitions: `Verktyg fr definitioner`,\n        embed: `Verktyg fr lnkar, bilder och skresultat`,\n        search_engine: {\n            label: `Skmotor`,\n            description: `Vilken skmotor som ska anvndas fr lnkar till skresultat`,\n        },\n        doge: `very doge buttons`,\n        doge_description: `            wow`,\n        color_palette: `Frgpaletten`,\n        color_palette_description: `ndra textfrg snabbt och enkelt`,\n        smileys: `Smileys`,\n    },\n\n    dark_theme: {\n        label: (author: string, infoUrl: string) => `${darkThemeBy(author)} (<a target=\"_blank\" href=\"${infoUrl}\">forumtrd</a>)`,\n        show_toggle: `Manuell aktivering`,\n        show_toggle_description: `Toggla manuellt det mrka temat med en ikon hgst upp p sidan`,\n        auto: `Automatisk aktivering`,\n        auto_description: `Aktivera det mrka temat automatiskt under nattens timmar`,\n        between: `mellan`,\n        and: `och`,\n        interval: `Uppdateringsintervall`,\n        interval_description: `Hur ofta ${CONFIG.USERSCRIPT_NAME} ska kolla vad klockan r`,\n    },\n\n    customize_content: {\n        label: `Anpassa innehll`,\n        carousel: `Bildspelsvyn hgst upp`,\n        social_media: `Knappar fr sociala medier`,\n        guides: `Guider`,\n        popular_galleries: `Bubblare i Galleriet`,\n        new_in_forum_side: `Nytt i forumet (till hger)`,\n        new_in_market: `Senaste privatannonserna`,\n        new_in_test_lab: `Nytt i testlabbet`,\n        in_the_store: `Just nu i butiken`,\n        popular_at_prisjakt: `Populrast p Prisjakt`,\n        new_tech_jobs: `Nya teknikjobb`,\n        external_news: `Externa nyheter`,\n        more_articles: `Fler artiklar (under varje artikel)`,\n        latest_news: `Senaste nyheterna (lngst ner)`,\n        new_in_forum_main: `Nytt i forumet (lngst ner)`,\n        footer: `Sidfot`,\n    },\n\n    advanced: {\n        label: `Avancerat`,\n        prevent_accidental_signout: `Frga vid utloggning`,\n        prevent_accidental_signout_description: `Undvik att logga ut av misstag`,\n        prevent_accidental_unload: `Frga vid navigering frn redigeringslge`,\n        prevent_accidental_unload_description: `Vrdefullt om du rkar klicka p fel lnk mitt i ett inlgg`,\n        improved_image_controls: `Bttre zoom- och lnkikoner i bilder`,\n        improved_image_controls_description: `Visa ikoner framfr bilder endast nr du hovrar ver dem`,\n        disable_scroll_restoration: `Frhindra webblsaren frn att komma ihg scrollning`,\n        disable_scroll_restoration_description: `Kan vara praktiskt fr tangentbordssurfare`,\n        down_for_maintenance: `${down_for_maintenance} varje natt mellan 4:30 och 5:10`,\n        down_for_maintenance_description: `Never forget!`,\n        proofread_articles: {\n            label: `Markera mjliga fel i artiklar`,\n            description: `Exempelvis hrda mellanslag och tankstreck`,\n            always: `Alltid`,\n            corrections: `I rttelsegrnssnittet`,\n            never: `Aldrig`,\n        },\n        proofread_forum_posts: `Markera mjliga fel i foruminlgg (i redigeringslge)`,\n        proofread_forum_posts_description: `Samma som ovan, fast i forumet`,\n        undo_support: (browser.supportsUndo, { // Make sure the labels match the actual support check (referenced here to facilitate a `git grep` search).\n            label: `Nr ett verktyg infogar text`,\n            description: `Om din webblsare inte lter dig ngra tgrder utfrda med redigeringsverktygen kan ${CONFIG.USERSCRIPT_NAME} skydda markerad text mot oavsiktlig radering om du rkar trycka p fel knapp`,\n            replace_selected: `Erstt markerad text  rekommenderas i alla webblsare med fullgott ngra-std`,\n            keep_selected: `Behll markerad text  rekommenderas i <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1220696\">Firefox/Gecko</a> samt p Android`, // Make sure the text matches the actual support check.\n        }),\n        developer_mode: `Utvecklarlge`,\n        developer_mode_description: `Visa fel och varningar lngst ner p skrmen`,\n        custom_css_enable: `Infoga egen CSS:`,\n        custom_css_enable_description: `Anpassa layout och utseende precis som du vill`,\n        custom_css_warning: `Klistra aldrig in kod som du inte litar p!`,\n    },\n\n    keyboard: `Kortkommandon`,\n\n    interests: {\n        label: `Intressen`,\n    },\n} as const;\n\nexport const editing_tools = {\n    size_label: `<big>A</big><small>A</small>`,\n    size_tooltip: `Textstorlek`,\n    color_tooltip: `Textfrg`,\n    font_tooltip: `Typsnitt`,\n    mark_label: `<mark>mark</mark>`,\n    mark_tooltip: `Markerad/framhvd text`,\n    abbr_label: SITE.TAG.abbr,\n    abbr_tooltip: `Frkortning`,\n    quote_tooltip: `Forumcitat`,\n    bq_label: `bq`,\n    bq_tooltip: `Allmnt blockcitat`,\n    spoiler_tooltip: `Spoilers`,\n    expander_tooltip: `Lnga textstycken`,\n    noparse_tooltip: `Inaktivera BB-kod i en viss del av texten`,\n    pre_tooltip: `Visa indrag och mellanrum som de r`,\n    cmd_tooltip: `Inlinekod`,\n    code_tooltip: `Kodstycke`,\n    math_label: `<big><i>x</i></big>`,\n    math_tooltip: `Matematiska formler och uttryck`,\n    sub_label: `<span></span><sub><i>x</i></sub>`,\n    sub_tooltip: `Nedsnkt text`,\n    sup_label: `<span></span><sup><i>x</i></sup>`,\n    sup_tooltip: `Upphjd text`,\n    nbsps_label: ``,\n    nbsps_tooltip: `Erstt alla mellanslag med hrda mellanslag i markerad text`,\n    url_tooltip: `Klickbar lnk`,\n    img_tooltip: `Bdda in bilder`,\n    search_link_tooltip: `Lnka till en skning p markerad text`,\n    shibe_label: `shibe`,\n    shibe_tooltip: `wow`,\n    doge_label: `doge`,\n    doge_tooltip: `pls click`,\n    split_quote_tooltip: `Splitta ett citat mitt i`,\n    edit_label: `Edit`,\n    edit_tooltip: `Infoga en redigeringsnotis`,\n    ins_label: `<ins class=\"${SITE.CLASS.bbIns}\">${SITE.TAG.ins}</ins>`,\n    ins_tooltip: `Tillagd text`,\n    del_label: `<del class=\"${SITE.CLASS.bbDel}\">${SITE.TAG.del}</del>`,\n    del_tooltip: `Borttagen text`,\n    dl_label: SITE.TAG.dl,\n    dl_tooltip: `Definitionslista`,\n    dt_label: SITE.TAG.dt,\n    dt_tooltip: `Term att definiera/beskriva (mste ligga inuti en ${BB.start(SITE.TAG.dl)})`,\n    dd_label: SITE.TAG.dd,\n    dd_tooltip: `Termens definition/beskrivning (mste ligga inuti en ${BB.start(SITE.TAG.dl)} och efter en ${BB.start(SITE.TAG.dt)})`,\n} as const;\n\nexport const special_characters: readonly InsertButtonDescription[] = [\n    { insert: \"\\u2011\", tooltip: \"Hrt bindestreck (tillter ej radbrytning)\" },\n    { insert: \"\", tooltip: \"Kort tankstreck (talstreck; intervall)\" },\n    { insert: \"\", tooltip: \"Lngt tankstreck\" },\n    { insert: \"\", tooltip: \"Uteslutningstecken (Ellipsis)\" },\n    { insert: \"\", tooltip: \"Ungefr lika med\" },\n    { insert: \"\", tooltip: \"Minustecken\" },\n    { insert: \"\", tooltip: \"Multiplikationstecken\" },\n    { insert: \"\", tooltip: \"Halvhg punkt (multiplikationstecken)\" },\n    { insert: \"\", tooltip: \"Gradtecken\" },\n    { insert: \"\\u202FC\", tooltip: \"Grader celsius (inkl. hrt blanksteg)\" },\n    { insert: CONFIG.NBSP, label: \"NBSP\", tooltip: \"Hrt blanksteg (tillter ej radbrytning)\" },\n    { insert: \"\\u202F\", label: \"NNBSP\", tooltip: \"Smalt hrt blanksteg (tillter ej radbrytning, anvnds som enhets- och tusentalsseparator)\" },\n    { insert: \"\", tooltip: \"Upphjd tva\" },\n    { insert: \"\", tooltip: \"Primtecken (fot; minuter)\" },\n    { insert: \"\", tooltip: \"Dubbelprimtecken (tum; sekunder)\" },\n    { insert: \"\", tooltip: \"Bock\" },\n    { insert: \"\", tooltip: \"Hgerpil\" },\n    { insert: \"\", tooltip: \"Varumrke (trademark)\" },\n];\n\nexport const developer_mode = {\n    nothing_logged: `Nothing has been logged.`,\n    tooltip: {\n        error: (n: number) => `${n} fel`,\n        warning: (n: number) => `${n} varning${n === 1 ? \"\" : \"ar\"}`,\n    },\n} as const;\n","import { Preference } from \"./Preference\";\r\nexport class BooleanPreference extends Preference {\r\n    getClassName() { return \"BooleanPreference\"; }\r\n}\r\n//# sourceMappingURL=BooleanPreference.js.map","import { isString } from \"ts-type-guards\";\r\nimport { stringify } from \"../Utilities\";\r\nimport { Preference, prependConstraints, } from \"./Preference\";\r\nexport class MultichoicePreference extends Preference {\r\n    constructor(data) {\r\n        const options = data.options;\r\n        const CONSTRAINTS = [\r\n            {\r\n                requirement: v => options.some(o => o.value === v),\r\n                message: v => `${stringify(v)} is not among the available options.`,\r\n            },\r\n        ];\r\n        prependConstraints(CONSTRAINTS, data);\r\n        super(data);\r\n        if (options.length < 2) {\r\n            throw new Error(`Parameter 'options' has less than two elements in ${this}.`);\r\n        }\r\n        const seenOptionValues = [];\r\n        options.forEach(option => {\r\n            const validationResult = this.validate(option.value);\r\n            if (isString(validationResult)) {\r\n                throw new Error(`Option value ${stringify(option.value)} in ${this} is invalid. Reason: ${validationResult}`);\r\n            }\r\n            if (seenOptionValues.indexOf(option.value) > -1) {\r\n                throw new Error(`Multiple options with value ${stringify(option.value)} in ${this}.`);\r\n            }\r\n            seenOptionValues.push(option.value);\r\n        });\r\n        this.options = options;\r\n    }\r\n    getClassName() { return \"MultichoicePreference\"; }\r\n    toValid(value) {\r\n        return this.default;\r\n    }\r\n}\r\n//# sourceMappingURL=MultichoicePreference.js.map","import { fromMaybe } from \"../Utilities\";\r\nimport { Preference, prependConstraints, } from \"./Preference\";\r\nexport class StringPreference extends Preference {\r\n    constructor(data) {\r\n        const minLength = fromMaybe(0, data.minLength);\r\n        const maxLength = fromMaybe(Infinity, data.maxLength);\r\n        const CONSTRAINTS = [];\r\n        if (!data.multiline) {\r\n            CONSTRAINTS.push({\r\n                requirement: v => !v.includes(\"\\n\"),\r\n                message: v => `Line breaks are not allowed.`,\r\n            });\r\n        }\r\n        if (minLength > 0) {\r\n            CONSTRAINTS.push({\r\n                requirement: v => v.length >= minLength,\r\n                message: v => `Minimum length is ${minLength} characters.`,\r\n            });\r\n        }\r\n        if (maxLength < Infinity) {\r\n            CONSTRAINTS.push({\r\n                requirement: v => v.length <= maxLength,\r\n                message: v => `Maximum length ${maxLength} exceeded.`,\r\n            });\r\n        }\r\n        prependConstraints(CONSTRAINTS, data);\r\n        super(data);\r\n        if (minLength < 0) {\r\n            throw new Error(`Parameter 'minLength' cannot be negative, but it was ${minLength} in ${this}.`);\r\n        }\r\n        this.multiline = data.multiline;\r\n        this.maxLength = maxLength;\r\n        this.minLength = minLength;\r\n    }\r\n    getClassName() { return \"StringPreference\"; }\r\n    toValid(s) {\r\n        const truncated = s.substring(0, this.maxLength);\r\n        return super.toValid(this.multiline\r\n            ? truncated\r\n            : truncated.replace(StringPreference.REGEX_LINE_BREAKS, \" \"));\r\n    }\r\n    fromString(s) {\r\n        return this.validate(s);\r\n    }\r\n}\r\nStringPreference.REGEX_LINE_BREAKS = /\\n+/g;\r\n//# sourceMappingURL=StringPreference.js.map","import {\n    BooleanPreference,\n    MultichoicePreference,\n    StringPreference,\n} from \"ts-preferences\";\n\nimport * as browser from \"~src/browser\";\nimport * as CONFIG from \"~src/config\";\nimport * as Proofreading from \"~src/operations/proofreading\";\nimport * as T from \"~src/text\";\n\nconst custom_css_enable = new BooleanPreference({\n    key: \"custom_css_enable\",\n    default: false,\n    label: T.preferences.advanced.custom_css_enable,\n    description: T.preferences.advanced.custom_css_enable_description,\n});\n\nexport default {\n    prevent_accidental_signout: new BooleanPreference({\n        key: \"prevent_accidental_signout\",\n        default: true,\n        label: T.preferences.advanced.prevent_accidental_signout,\n        description: T.preferences.advanced.prevent_accidental_signout_description,\n    }),\n    prevent_accidental_unload: new BooleanPreference({\n        key: \"prevent_accidental_unload\",\n        default: true,\n        label: T.preferences.advanced.prevent_accidental_unload,\n        description: T.preferences.advanced.prevent_accidental_unload_description,\n    }),\n    improved_image_controls: new BooleanPreference({\n        key: \"improved_image_controls\",\n        default: true,\n        label: T.preferences.advanced.improved_image_controls,\n        description: T.preferences.advanced.improved_image_controls_description,\n    }),\n    disable_scroll_restoration: new BooleanPreference({\n        key: \"disable_scroll_restoration\",\n        default: false,\n        label: T.preferences.advanced.disable_scroll_restoration,\n        description: T.preferences.advanced.disable_scroll_restoration_description,\n    }),\n    down_for_maintenance: new BooleanPreference({\n        key: \"down_for_maintenance\",\n        default: false,\n        label: T.preferences.advanced.down_for_maintenance,\n        description: T.preferences.advanced.down_for_maintenance_description,\n    }),\n    proofread_articles: new MultichoicePreference({\n        key: \"proofread_articles\",\n        default: Proofreading.Options.NEVER,\n        label: T.preferences.advanced.proofread_articles.label,\n        description: T.preferences.advanced.proofread_articles.description,\n        options: [\n            {\n                value: Proofreading.Options.ALWAYS,\n                label: T.preferences.advanced.proofread_articles.always,\n            },\n            {\n                value: Proofreading.Options.CORRECTIONS,\n                label: T.preferences.advanced.proofread_articles.corrections,\n            },\n            {\n                value: Proofreading.Options.NEVER,\n                label: T.preferences.advanced.proofread_articles.never,\n            },\n        ],\n    }),\n    proofread_forum_posts: new BooleanPreference({\n        key: \"proofread_forum_posts\",\n        default: false,\n        label: T.preferences.advanced.proofread_forum_posts,\n        description: T.preferences.advanced.proofread_forum_posts_description,\n    }),\n    undo_support: new MultichoicePreference({\n        // Could have been a BooleanPreference, but it was hard to come up with an understandable label and description then.\n        key: \"undo_support\",\n        default: browser.supportsUndo(navigator.userAgent),\n        label: T.preferences.advanced.undo_support.label,\n        description: T.preferences.advanced.undo_support.description,\n        options: [\n            {\n                value: true,\n                label: T.preferences.advanced.undo_support.replace_selected,\n            },\n            {\n                value: false,\n                label: T.preferences.advanced.undo_support.keep_selected,\n            },\n        ],\n    }),\n    developer_mode: new BooleanPreference({\n        key: \"developer_mode\",\n        default: false,\n        label: T.preferences.advanced.developer_mode,\n        description: T.preferences.advanced.developer_mode_description,\n    }),\n    custom_css_enable,\n    custom_css_code: new StringPreference({\n        key: \"custom_css_code\",\n        default: \"\",\n        label: T.preferences._.NO_LABEL,\n        description: T.preferences.advanced.custom_css_enable_description,\n        multiline: true,\n        extras: { class: CONFIG.CLASS.codeInput },\n        dependencies: [\n            {\n                preference: custom_css_enable,\n                condition: (v: boolean) => v,\n            },\n        ],\n    }),\n} as const;\n","import {\n    BooleanPreference,\n} from \"ts-preferences\";\n\nimport * as T from \"~src/text\";\n\nexport default {\n    carousel: new BooleanPreference({\n        key: \"customize_content_carousel\",\n        default: true,\n        label: T.preferences.customize_content.carousel,\n    }),\n    social_media: new BooleanPreference({\n        key: \"customize_content_social_media\",\n        default: true,\n        label: T.preferences.customize_content.social_media,\n    }),\n    guides: new BooleanPreference({\n        key: \"customize_content_guides\",\n        default: true,\n        label: T.preferences.customize_content.guides,\n    }),\n    popular_galleries: new BooleanPreference({\n        key: \"customize_content_popular_galleries\",\n        default: true,\n        label: T.preferences.customize_content.popular_galleries,\n    }),\n    new_in_forum_side: new BooleanPreference({\n        key: \"customize_content_new_in_forum_side\",\n        default: true,\n        label: T.preferences.customize_content.new_in_forum_side,\n    }),\n    new_in_market: new BooleanPreference({\n        key: \"customize_content_new_in_market\",\n        default: true,\n        label: T.preferences.customize_content.new_in_market,\n    }),\n    new_in_test_lab: new BooleanPreference({\n        key: \"customize_content_new_in_test_lab\",\n        default: true,\n        label: T.preferences.customize_content.new_in_test_lab,\n    }),\n    in_the_store: new BooleanPreference({\n        key: \"customize_content_in_the_store\",\n        default: true,\n        label: T.preferences.customize_content.in_the_store,\n    }),\n    popular_at_prisjakt: new BooleanPreference({\n        key: \"customize_content_popular_at_prisjakt\",\n        default: true,\n        label: T.preferences.customize_content.popular_at_prisjakt,\n    }),\n    new_tech_jobs: new BooleanPreference({\n        key: \"customize_content_new_tech_jobs\",\n        default: true,\n        label: T.preferences.customize_content.new_tech_jobs,\n    }),\n    external_news: new BooleanPreference({\n        key: \"customize_content_external_news\",\n        default: true,\n        label: T.preferences.customize_content.external_news,\n    }),\n    more_articles: new BooleanPreference({\n        key: \"customize_content_more_articles\",\n        default: true,\n        label: T.preferences.customize_content.more_articles,\n    }),\n    latest_news: new BooleanPreference({\n        key: \"customize_content_latest_news\",\n        default: true,\n        label: T.preferences.customize_content.latest_news,\n    }),\n    new_in_forum_main: new BooleanPreference({\n        key: \"customize_content_new_in_forum_main\",\n        default: true,\n        label: T.preferences.customize_content.new_in_forum_main,\n    }),\n    footer: new BooleanPreference({\n        key: \"customize_content_footer\",\n        default: true,\n        label: T.preferences.customize_content.footer,\n    }),\n} as const;\n","import { isString } from \"ts-type-guards\";\r\nimport { Preference, prependConstraints, } from \"./Preference\";\r\nexport class NumericPreference extends Preference {\r\n    static postParse(p, parsed) {\r\n        return (isString(parsed)\r\n            ? parsed\r\n            : p.validate(parsed.value));\r\n    }\r\n    constructor(data) {\r\n        const CONSTRAINTS = [\r\n            {\r\n                requirement: Number.isFinite,\r\n                message: v => `${v} is not a finite number.`,\r\n            },\r\n        ];\r\n        prependConstraints(CONSTRAINTS, data);\r\n        super(data);\r\n    }\r\n}\r\n//# sourceMappingURL=NumericPreference.js.map","import { NumericPreference } from \"./NumericPreference\";\r\nimport { prependConstraints } from \"./Preference\";\r\nexport class IntegerPreference extends NumericPreference {\r\n    constructor(data) {\r\n        const CONSTRAINTS = [\r\n            IntegerPreference.CONSTRAINT_INTEGER,\r\n        ];\r\n        prependConstraints(CONSTRAINTS, data);\r\n        super(data);\r\n    }\r\n    getClassName() { return \"IntegerPreference\"; }\r\n    static parse(s) {\r\n        const parsed = parseInt(s, 10);\r\n        return (Number.isNaN(parsed)\r\n            ? `\"${s}\" is not an integer.`\r\n            : { value: parsed });\r\n    }\r\n    toValid(value) {\r\n        return super.toValid(Math.round(value));\r\n    }\r\n    fromString(s) {\r\n        return NumericPreference.postParse(this, IntegerPreference.parse(s));\r\n    }\r\n}\r\nIntegerPreference.CONSTRAINT_INTEGER = {\r\n    requirement: Number.isInteger,\r\n    message: v => `${v} is not an integer.`,\r\n};\r\n//# sourceMappingURL=IntegerPreference.js.map","import { NumericPreference } from \"./NumericPreference\";\r\nimport { prependConstraints, } from \"./Preference\";\r\nexport class RangePreference extends NumericPreference {\r\n    constructor(data) {\r\n        const min = data.min;\r\n        const max = data.max;\r\n        const CONSTRAINTS = [\r\n            {\r\n                requirement: v => v >= min,\r\n                message: v => `${v} is smaller than minimum value ${min}.`,\r\n            },\r\n            {\r\n                requirement: v => v <= max,\r\n                message: v => `${v} is greater than maximum value ${max}.`,\r\n            },\r\n        ];\r\n        prependConstraints(CONSTRAINTS, data);\r\n        super(data);\r\n        if (!(Number.isFinite(min) && Number.isFinite(max))) {\r\n            throw new Error(`Parameters 'min' and 'max' must be finite numbers, but they were ${min} and ${max} in ${this}.`);\r\n        }\r\n        if (min > max) {\r\n            throw new Error(`Parameter 'min' cannot be greater than parameter 'max', but they were ${min} and ${max} in ${this}.`);\r\n        }\r\n        this.min = min;\r\n        this.max = max;\r\n    }\r\n    toValid(value) {\r\n        return super.toValid(Math.max(this.min, Math.min(this.max, value)));\r\n    }\r\n}\r\n//# sourceMappingURL=RangePreference.js.map","import { IntegerPreference } from \"./IntegerPreference\";\r\nimport { NumericPreference } from \"./NumericPreference\";\r\nimport { prependConstraints } from \"./Preference\";\r\nimport { RangePreference } from \"./RangePreference\";\r\nexport class IntegerRangePreference extends RangePreference {\r\n    getClassName() { return \"IntegerRangePreference\"; }\r\n    constructor(data) {\r\n        const CONSTRAINTS = [\r\n            IntegerPreference.CONSTRAINT_INTEGER,\r\n        ];\r\n        prependConstraints(CONSTRAINTS, data);\r\n        super(data);\r\n        if (!Number.isInteger(data.min) || !Number.isInteger(data.max)) {\r\n            throw new TypeError(`Parameters 'min' and 'max' must be integers, but they were ${data.min} and ${data.max} in ${this}.`);\r\n        }\r\n    }\r\n    toValid(value) {\r\n        return super.toValid(Math.round(value));\r\n    }\r\n    fromString(s) {\r\n        return NumericPreference.postParse(this, IntegerPreference.parse(s));\r\n    }\r\n}\r\n//# sourceMappingURL=IntegerRangePreference.js.map","import * as ms from \"milliseconds\";\nimport {\n    IntegerRangePreference,\n} from \"ts-preferences\";\n\nexport class TimePreference extends IntegerRangePreference {\n    public getClassName() { return \"TimePreference\"; }\n\n    public stringify(value: number): string {\n        const time = this.toValid(value);\n        return [\n            Math.floor(time / ms.hours(1)),\n            Math.floor((time % ms.hours(1)) / ms.minutes(1)),\n        ].map(x => x.toString().padStart(2, \"0\")).join(\":\");\n    }\n\n    public fromString(s: string) {\n        const match = s.match(/^(\\d{2}):(\\d{2})$/); // HH:MM\n        if (match === null) {\n            return `HH:MM expected (saw \"${s}\").`;\n        } else {\n            const hh = match[1];\n            const mm = match[2];\n            return { value: ms.hours(parseInt(hh)) + ms.minutes(parseInt(mm)) };\n        }\n    }\n}\n","import * as ms from \"milliseconds\";\nimport {\n    BooleanPreference,\n    IntegerRangePreference,\n} from \"ts-preferences\";\n\nimport * as CONFIG from \"~src/config\";\nimport * as T from \"~src/text\";\n\nimport { TimePreference } from \"./TimePreference\";\n\nconst auto = new BooleanPreference({\n    key: \"dark_theme_auto\",\n    default: true,\n    label: T.preferences.dark_theme.auto,\n    description: T.preferences.dark_theme.auto_description,\n    extras: { class: [ CONFIG.CLASS.inlinePreference, CONFIG.CLASS.primaryInlinePreference ] },\n});\n\nconst dependencies_auto = [\n    {\n        preference: auto,\n        condition: (v: boolean) => v,\n    },\n];\n\nexport default {\n    active: new BooleanPreference({\n        key: \"dark_theme_active\",\n        default: false,\n        label: T.preferences._.NO_LABEL,\n        extras: { implicit: true },\n    }),\n    last_autoset_state: new BooleanPreference({\n        key: \"dark_theme_last_autoset_state\",\n        default: false,\n        label: T.preferences._.NO_LABEL,\n        extras: { implicit: true },\n    }),\n    show_toggle: new BooleanPreference({\n        key: \"dark_theme_show_toggle\",\n        default: true,\n        label: T.preferences.dark_theme.show_toggle,\n        description: T.preferences.dark_theme.show_toggle_description,\n    }),\n    auto,\n    time_on: new TimePreference({\n        key: \"dark_theme_time_on\",\n        default: ms.hours(21),\n        label: T.preferences.dark_theme.between,\n        description: T.preferences.dark_theme.auto_description,\n        min: 0,\n        max: ms.days(1),\n        dependencies: dependencies_auto,\n        extras: { class: CONFIG.CLASS.inlinePreference },\n    }),\n    time_off: new TimePreference({\n        key: \"dark_theme_time_off\",\n        default: ms.hours(7),\n        label: T.preferences.dark_theme.and,\n        description: T.preferences.dark_theme.auto_description,\n        min: 0,\n        max: ms.days(1),\n        dependencies: dependencies_auto,\n        extras: { class: CONFIG.CLASS.inlinePreference },\n    }),\n    interval: new IntegerRangePreference({\n        key: \"dark_theme_interval\",\n        default: 10,\n        label: T.preferences.dark_theme.interval,\n        description: T.preferences.dark_theme.interval_description,\n        min: 1,\n        max: 600,\n        extras: { suffix: T.general.seconds },\n    }),\n} as const;\n","import {\n    BooleanPreference,\n    IntegerRangePreference,\n    MultichoicePreference,\n} from \"ts-preferences\";\n\nimport * as CONFIG from \"~src/config\";\nimport * as T from \"~src/text\";\n\nconst textarea_size_toggle = new BooleanPreference({\n    key: \"textarea_size_toggle\",\n    default: true,\n    label: T.preferences.edit_mode.textarea_size_toggle,\n    description: T.preferences.edit_mode.textarea_size_toggle_description,\n    extras: { class: [ CONFIG.CLASS.inlinePreference, CONFIG.CLASS.primaryInlinePreference ] },\n});\n\nconst dependencies_textarea_size_toggle = [\n    {\n        preference: textarea_size_toggle,\n        condition: (v: boolean) => v,\n    },\n];\n\nconst DEFAULT_TEXTAREA_SIZE = 360;\nconst SPACE = \" \", TAB = \"\\t\";\n\nexport default {\n    autosave_draft: new BooleanPreference({\n        key: \"autosave_draft\",\n        default: true,\n        label: T.preferences.edit_mode.autosave_draft,\n        description: T.preferences.edit_mode.autosave_draft_description,\n    }),\n    draft_mode_toggle: new BooleanPreference({\n        key: \"draft_mode_toggle\",\n        default: true,\n        label: T.preferences.edit_mode.draft_mode_toggle,\n        description: T.preferences.edit_mode.draft_mode_toggle_description,\n    }),\n    textarea_size: new IntegerRangePreference({\n        key: \"textarea_size\",\n        default: DEFAULT_TEXTAREA_SIZE,\n        min: 0, max: Number.MAX_VALUE,\n        label: T.preferences._.NO_LABEL,\n        extras: { implicit: true },\n    }),\n    textarea_size_toggle,\n    textarea_size_small: new IntegerRangePreference({\n        key: \"textarea_size_small\",\n        default: 250,\n        min: 50, max: 2000,\n        label: T.preferences.edit_mode.textarea_size_small,\n        description: T.preferences.edit_mode.textarea_size_toggle_description,\n        dependencies: dependencies_textarea_size_toggle,\n        extras: { class: CONFIG.CLASS.inlinePreference },\n    }),\n    textarea_size_large: new IntegerRangePreference({\n        key: \"textarea_size_large\",\n        default: 750,\n        min: 50, max: 2000,\n        label: T.preferences.edit_mode.textarea_size_large,\n        description: T.preferences.edit_mode.textarea_size_toggle_description,\n        dependencies: dependencies_textarea_size_toggle,\n        extras: { class: CONFIG.CLASS.inlinePreference, suffix: T.preferences.edit_mode.textarea_size_unit },\n    }),\n    monospace_font: new BooleanPreference({\n        key: \"monospace_font\",\n        default: false,\n        label: T.preferences.edit_mode.monospace_font,\n        description: T.preferences.edit_mode.monospace_font_description,\n        extras: { class: [ CONFIG.CLASS.inlinePreference, CONFIG.CLASS.primaryInlinePreference ] },\n    }),\n    monospace_font_in_quick_reply_form: new BooleanPreference({\n        key: \"monospace_font_in_quick_reply_form\",\n        default: false,\n        label: T.preferences._.in_quick_reply_form,\n        description: T.preferences._.in_quick_reply_form_description,\n        extras: { class: CONFIG.CLASS.inlinePreference },\n    }),\n    improved_builtin_editing_tools: new BooleanPreference({\n        key: \"improved_builtin_editing_tools\",\n        default: true,\n        label: T.preferences.edit_mode.improved_builtin_editing_tools,\n        description: T.preferences.edit_mode.improved_builtin_editing_tools_description,\n    }),\n    insert_heading_toolbar_button: new BooleanPreference({\n        key: \"insert_heading_toolbar_button\",\n        default: true,\n        label: T.preferences.edit_mode.insert_heading_toolbar_button,\n        description: T.preferences.edit_mode.insert_heading_toolbar_button_description,\n    }),\n    insert_table_toolbar_button: new BooleanPreference({\n        key: \"insert_table_toolbar_button\",\n        default: true,\n        label: T.preferences.edit_mode.insert_table_toolbar_button,\n        description: T.preferences.edit_mode.insert_table_toolbar_button_description,\n    }),\n    keyboard_shortcuts: new BooleanPreference({\n        key: \"keyboard_shortcuts\",\n        default: false,\n        label: T.preferences.edit_mode.keyboard_shortcuts,\n        description: T.preferences.edit_mode.keyboard_shortcuts_description,\n        extras: { class: [ CONFIG.CLASS.inlinePreference, CONFIG.CLASS.primaryInlinePreference ] },\n    }),\n    keyboard_shortcuts_in_quick_reply: new BooleanPreference({\n        key: \"keyboard_shortcuts_in_quick_reply\",\n        default: false,\n        label: T.preferences._.in_quick_reply_form,\n        description: T.preferences._.in_quick_reply_form_description,\n        extras: { class: CONFIG.CLASS.inlinePreference },\n    }),\n    insert_tab: new BooleanPreference({\n        key: \"insert_tab\",\n        default: true,\n        label: T.preferences.edit_mode.insert_tab,\n        description: T.preferences.edit_mode.insert_tab_description,\n        extras: { class: [CONFIG.CLASS.inlinePreference, CONFIG.CLASS.primaryInlinePreference] },\n    }),\n    insert_tab_content: new MultichoicePreference({\n        key: \"insert_tab_content\",\n        default: TAB,\n        label: T.preferences._.NO_LABEL,\n        options: [\n            {\n                value: TAB,\n                label: T.preferences.edit_mode.insert_tab_tab as string, // Without the type assertion, too small a type is inferred.\n            },\n        ].concat(\n            [ 2, 3, 4 ].map(n => ({\n                value: SPACE.repeat(n),\n                label: T.preferences.edit_mode.insert_tab_spaces(n),\n            }))\n        ),\n        extras: { class: [CONFIG.CLASS.inlinePreference] },\n    }),\n    remember_caret_position: new BooleanPreference({\n        key: \"remember_caret_position\",\n        default: true,\n        label: T.preferences.edit_mode.remember_caret_position,\n        description: T.preferences.edit_mode.remember_caret_position_description,\n    }),\n    remove_mobile_site_disclaimer: new BooleanPreference({\n        key: \"remove_mobile_site_disclaimer\",\n        default: true,\n        label: T.preferences.edit_mode.remove_mobile_site_disclaimer,\n        description: T.preferences.edit_mode.remove_mobile_site_disclaimer_description,\n    }),\n} as const;\n","var n,l,u,i,t,o,r,f={},e=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(n,l){for(var u in l)n[u]=l[u];return n}function a(n){var l=n.parentNode;l&&l.removeChild(n)}function v(n,l,u){var i,t,o,r=arguments,f={};for(o in l)\"key\"==o?i=l[o]:\"ref\"==o?t=l[o]:f[o]=l[o];if(arguments.length>3)for(u=[u],o=3;o<arguments.length;o++)u.push(r[o]);if(null!=u&&(f.children=u),\"function\"==typeof n&&null!=n.defaultProps)for(o in n.defaultProps)void 0===f[o]&&(f[o]=n.defaultProps[o]);return h(n,f,i,t,null)}function h(l,u,i,t,o){var r={type:l,props:u,key:i,ref:t,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++n.__v:o};return null!=n.vnode&&n.vnode(r),r}function y(){return{current:null}}function p(n){return n.children}function d(n,l){this.props=n,this.context=l}function _(n,l){if(null==l)return n.__?_(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?_(n):null}function w(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return w(n)}}function k(l){(!l.__d&&(l.__d=!0)&&u.push(l)&&!g.__r++||t!==n.debounceRendering)&&((t=n.debounceRendering)||i)(g)}function g(){for(var n;g.__r=u.length;)n=u.sort(function(n,l){return n.__v.__b-l.__v.__b}),u=[],n.some(function(n){var l,u,i,t,o,r,f;n.__d&&(r=(o=(l=n).__v).__e,(f=l.__P)&&(u=[],(i=s({},o)).__v=o.__v+1,t=$(f,o,i,l.__n,void 0!==f.ownerSVGElement,null!=o.__h?[r]:null,u,null==r?_(o):r,o.__h),j(u,o),t!=r&&w(o)))})}function m(n,l,u,i,t,o,r,c,s,v){var y,d,w,k,g,m,b,A=i&&i.__k||e,P=A.length;for(s==f&&(s=null!=r?r[0]:P?_(i,0):null),u.__k=[],y=0;y<l.length;y++)if(null!=(k=u.__k[y]=null==(k=l[y])||\"boolean\"==typeof k?null:\"string\"==typeof k||\"number\"==typeof k?h(null,k,null,null,k):Array.isArray(k)?h(p,{children:k},null,null,null):null!=k.__e||null!=k.__c?h(k.type,k.props,k.key,null,k.__v):k)){if(k.__=u,k.__b=u.__b+1,null===(w=A[y])||w&&k.key==w.key&&k.type===w.type)A[y]=void 0;else for(d=0;d<P;d++){if((w=A[d])&&k.key==w.key&&k.type===w.type){A[d]=void 0;break}w=null}g=$(n,k,w=w||f,t,o,r,c,s,v),(d=k.ref)&&w.ref!=d&&(b||(b=[]),w.ref&&b.push(w.ref,null,k),b.push(d,k.__c||g,k)),null!=g?(null==m&&(m=g),s=x(n,k,w,A,r,g,s),v||\"option\"!=u.type?\"function\"==typeof u.type&&(u.__d=s):n.value=\"\"):s&&w.__e==s&&s.parentNode!=n&&(s=_(w))}if(u.__e=m,null!=r&&\"function\"!=typeof u.type)for(y=r.length;y--;)null!=r[y]&&a(r[y]);for(y=P;y--;)null!=A[y]&&L(A[y],A[y]);if(b)for(y=0;y<b.length;y++)I(b[y],b[++y],b[++y])}function b(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(Array.isArray(n)?n.some(function(n){b(n,l)}):l.push(n)),l}function x(n,l,u,i,t,o,r){var f,e,c;if(void 0!==l.__d)f=l.__d,l.__d=void 0;else if(t==u||o!=r||null==o.parentNode)n:if(null==r||r.parentNode!==n)n.appendChild(o),f=null;else{for(e=r,c=0;(e=e.nextSibling)&&c<i.length;c+=2)if(e==o)break n;n.insertBefore(o,r),f=r}return void 0!==f?f:o.nextSibling}function A(n,l,u,i,t){var o;for(o in u)\"children\"===o||\"key\"===o||o in l||C(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||u[o]===l[o]||C(n,o,l[o],u[o],i)}function P(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=null==u?\"\":\"number\"!=typeof u||c.test(l)?u:u+\"px\"}function C(n,l,u,i,t){var o,r,f;if(t&&\"className\"==l&&(l=\"class\"),\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof i&&(n.style.cssText=i=\"\"),i)for(l in i)u&&l in u||P(n.style,l,\"\");if(u)for(l in u)i&&u[l]===i[l]||P(n.style,l,u[l])}else\"o\"===l[0]&&\"n\"===l[1]?(o=l!==(l=l.replace(/Capture$/,\"\")),(r=l.toLowerCase())in n&&(l=r),l=l.slice(2),n.l||(n.l={}),n.l[l+o]=u,f=o?N:z,u?i||n.addEventListener(l,f,o):n.removeEventListener(l,f,o)):\"list\"!==l&&\"tagName\"!==l&&\"form\"!==l&&\"type\"!==l&&\"size\"!==l&&\"download\"!==l&&\"href\"!==l&&!t&&l in n?n[l]=null==u?\"\":u:\"function\"!=typeof u&&\"dangerouslySetInnerHTML\"!==l&&(l!==(l=l.replace(/xlink:?/,\"\"))?null==u||!1===u?n.removeAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase()):n.setAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase(),u):null==u||!1===u&&!/^ar/.test(l)?n.removeAttribute(l):n.setAttribute(l,u))}function z(l){this.l[l.type+!1](n.event?n.event(l):l)}function N(l){this.l[l.type+!0](n.event?n.event(l):l)}function T(n,l,u){var i,t;for(i=0;i<n.__k.length;i++)(t=n.__k[i])&&(t.__=n,t.__e&&(\"function\"==typeof t.type&&t.__k.length>1&&T(t,l,u),l=x(u,t,t,n.__k,null,t.__e,l),\"function\"==typeof n.type&&(n.__d=l)))}function $(l,u,i,t,o,r,f,e,c){var a,v,h,y,_,w,k,g,b,x,A,P=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(c=i.__h,e=u.__e=i.__e,u.__h=null,r=[e]),(a=n.__b)&&a(u);try{n:if(\"function\"==typeof P){if(g=u.props,b=(a=P.contextType)&&t[a.__c],x=a?b?b.props.value:a.__:t,i.__c?k=(v=u.__c=i.__c).__=v.__E:(\"prototype\"in P&&P.prototype.render?u.__c=v=new P(g,x):(u.__c=v=new d(g,x),v.constructor=P,v.render=M),b&&b.sub(v),v.props=g,v.state||(v.state={}),v.context=x,v.__n=t,h=v.__d=!0,v.__h=[]),null==v.__s&&(v.__s=v.state),null!=P.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=s({},v.__s)),s(v.__s,P.getDerivedStateFromProps(g,v.__s))),y=v.props,_=v.state,h)null==P.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(null==P.getDerivedStateFromProps&&g!==y&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(g,x),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(g,v.__s,x)||u.__v===i.__v){v.props=g,v.state=v.__s,u.__v!==i.__v&&(v.__d=!1),v.__v=u,u.__e=i.__e,u.__k=i.__k,v.__h.length&&f.push(v),T(u,e,l);break n}null!=v.componentWillUpdate&&v.componentWillUpdate(g,v.__s,x),null!=v.componentDidUpdate&&v.__h.push(function(){v.componentDidUpdate(y,_,w)})}v.context=x,v.props=g,v.state=v.__s,(a=n.__r)&&a(u),v.__d=!1,v.__v=u,v.__P=l,a=v.render(v.props,v.state,v.context),v.state=v.__s,null!=v.getChildContext&&(t=s(s({},t),v.getChildContext())),h||null==v.getSnapshotBeforeUpdate||(w=v.getSnapshotBeforeUpdate(y,_)),A=null!=a&&a.type==p&&null==a.key?a.props.children:a,m(l,Array.isArray(A)?A:[A],u,i,t,o,r,f,e,c),v.base=u.__e,u.__h=null,v.__h.length&&f.push(v),k&&(v.__E=v.__=null),v.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=H(i.__e,u,i,t,o,r,f,c);(a=n.diffed)&&a(u)}catch(l){u.__v=null,(c||null!=r)&&(u.__e=e,u.__h=!!c,r[r.indexOf(e)]=null),n.__e(l,u,i)}return u.__e}function j(l,u){n.__c&&n.__c(u,l),l.some(function(u){try{l=u.__h,u.__h=[],l.some(function(n){n.call(u)})}catch(l){n.__e(l,u.__v)}})}function H(n,l,u,i,t,o,r,c){var s,a,v,h,y,p=u.props,d=l.props;if(t=\"svg\"===l.type||t,null!=o)for(s=0;s<o.length;s++)if(null!=(a=o[s])&&((null===l.type?3===a.nodeType:a.localName===l.type)||n==a)){n=a,o[s]=null;break}if(null==n){if(null===l.type)return document.createTextNode(d);n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",l.type):document.createElement(l.type,d.is&&{is:d.is}),o=null,c=!1}if(null===l.type)p===d||c&&n.data===d||(n.data=d);else{if(null!=o&&(o=e.slice.call(n.childNodes)),v=(p=u.props||f).dangerouslySetInnerHTML,h=d.dangerouslySetInnerHTML,!c){if(null!=o)for(p={},y=0;y<n.attributes.length;y++)p[n.attributes[y].name]=n.attributes[y].value;(h||v)&&(h&&(v&&h.__html==v.__html||h.__html===n.innerHTML)||(n.innerHTML=h&&h.__html||\"\"))}A(n,d,p,t,c),h?l.__k=[]:(s=l.props.children,m(n,Array.isArray(s)?s:[s],l,u,i,\"foreignObject\"!==l.type&&t,o,r,f,c)),c||(\"value\"in d&&void 0!==(s=d.value)&&(s!==n.value||\"progress\"===l.type&&!s)&&C(n,\"value\",s,p.value,!1),\"checked\"in d&&void 0!==(s=d.checked)&&s!==n.checked&&C(n,\"checked\",s,p.checked,!1))}return n}function I(l,u,i){try{\"function\"==typeof l?l(u):l.current=u}catch(l){n.__e(l,i)}}function L(l,u,i){var t,o,r;if(n.unmount&&n.unmount(l),(t=l.ref)&&(t.current&&t.current!==l.__e||I(t,null,u)),i||\"function\"==typeof l.type||(i=null!=(o=l.__e)),l.__e=l.__d=void 0,null!=(t=l.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(l){n.__e(l,u)}t.base=t.__P=null}if(t=l.__k)for(r=0;r<t.length;r++)t[r]&&L(t[r],u,i);null!=o&&a(o)}function M(n,l,u){return this.constructor(n,u)}function O(l,u,i){var t,r,c;n.__&&n.__(l,u),r=(t=i===o)?null:i&&i.__k||u.__k,l=v(p,null,[l]),c=[],$(u,(t?u:i||u).__k=l,r||f,f,void 0!==u.ownerSVGElement,i&&!t?[i]:r?null:u.childNodes.length?e.slice.call(u.childNodes):null,c,i||f,t),j(c,l)}function S(n,l){O(n,l,o)}function q(n,l,u){var i,t,o,r=arguments,f=s({},n.props);for(o in l)\"key\"==o?i=l[o]:\"ref\"==o?t=l[o]:f[o]=l[o];if(arguments.length>3)for(u=[u],o=3;o<arguments.length;o++)u.push(r[o]);return null!=u&&(f.children=u),h(n.type,f,i||n.key,t||n.ref,null)}function B(n,l){var u={__c:l=\"__cC\"+r++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n,u,i){return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(k)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n={__e:function(n,l){for(var u,i,t,o=l.__h;l=l.__;)if((u=l.__c)&&!u.__)try{if((i=u.constructor)&&null!=i.getDerivedStateFromError&&(u.setState(i.getDerivedStateFromError(n)),t=u.__d),null!=u.componentDidCatch&&(u.componentDidCatch(n),t=u.__d),t)return l.__h=o,u.__E=u}catch(l){n=l}throw n},__v:0},l=function(n){return null!=n&&void 0===n.constructor},d.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=s({},this.state),\"function\"==typeof n&&(n=n(s({},u),this.props)),n&&s(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),k(this))},d.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),k(this))},d.prototype.render=p,u=[],i=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g.__r=0,o=f,r=0;export{O as render,S as hydrate,v as createElement,v as h,p as Fragment,y as createRef,l as isValidElement,d as Component,q as cloneElement,B as createContext,b as toChildArray,L as __u,n as options};\n//# sourceMappingURL=preact.module.js.map\n","function insertTextFirefox(field, text) {\n    // Found on https://www.everythingfrontend.com/posts/insert-text-into-textarea-at-cursor-position.html \n    field.setRangeText(text, field.selectionStart || 0, field.selectionEnd || 0, 'end' // Without this, the cursor is either at the beginning or `text` remains selected\n    );\n    field.dispatchEvent(new InputEvent('input', {\n        data: text,\n        inputType: 'insertText',\n        isComposing: false // TODO: fix @types/jsdom, this shouldn't be required\n    }));\n}\n/** Inserts `text` at the cursors position, replacing any selection, with **undo** support and by firing the `input` event. */\nexport function insert(field, text) {\n    var document = field.ownerDocument;\n    var initialFocus = document.activeElement;\n    if (initialFocus !== field) {\n        field.focus();\n    }\n    if (!document.execCommand('insertText', false, text)) {\n        insertTextFirefox(field, text);\n    }\n    if (initialFocus === document.body) {\n        field.blur();\n    }\n    else if (initialFocus instanceof HTMLElement && initialFocus !== field) {\n        initialFocus.focus();\n    }\n}\n/** Replaces the entire content, equivalent to `field.value = text` but with **undo** support and by firing the `input` event. */\nexport function set(field, text) {\n    field.select();\n    insert(field, text);\n}\n/** Get the selected text in a field or an empty string if nothing is selected. */\nexport function getSelection(field) {\n    return field.value.slice(field.selectionStart, field.selectionEnd);\n}\n/** Adds the `wrappingText` before and after fields selection (or cursor). If `endWrappingText` is provided, it will be used instead of `wrappingText` at on the right. */\nexport function wrapSelection(field, wrap, wrapEnd) {\n    var selectionStart = field.selectionStart, selectionEnd = field.selectionEnd;\n    var selection = getSelection(field);\n    insert(field, wrap + selection + (wrapEnd !== null && wrapEnd !== void 0 ? wrapEnd : wrap));\n    // Restore the selection around the previously-selected text\n    field.selectionStart = selectionStart + wrap.length;\n    field.selectionEnd = selectionEnd + wrap.length;\n}\n/** Finds and replaces strings and regex in the fields value, like `field.value = field.value.replace()` but better */\nexport function replace(field, searchValue, replacer) {\n    /** Remembers how much each match offset should be adjusted */\n    var drift = 0;\n    field.value.replace(searchValue, function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        // Select current match to replace it later\n        var matchStart = drift + args[args.length - 2];\n        var matchLength = args[0].length;\n        field.selectionStart = matchStart;\n        field.selectionEnd = matchStart + matchLength;\n        var replacement = typeof replacer === 'string' ? replacer : replacer.apply(void 0, args);\n        insert(field, replacement);\n        // Select replacement. Without this, the cursor would be after the replacement\n        field.selectionStart = matchStart;\n        drift += replacement.length - matchLength;\n        return replacement;\n    });\n}\n","import * as BB from \"bbcode-tags\";\nimport * as textFieldEdit from \"text-field-edit\";\nimport { isNumber } from \"ts-type-guards\";\n\nimport * as CONFIG from \"~src/config\";\n\ntype InsertionResult = Readonly<{\n    textareaContent: string,\n    startOfInserted: number,\n    endOfInserted: number,\n}>\n\ntype Insertion = Readonly<{\n    string: string,\n    replace: boolean,\n}>\n\ntype WrapAction = Readonly<{\n    cursor: CursorBehavior,\n    before: string,\n    after: string,\n}>\n\ntype TagWrapAction = Readonly<{\n    tag: string,\n    parameterized: boolean,\n    block: boolean,\n}>\n\nexport type Action = (textarea: HTMLTextAreaElement, undoSupport: boolean) => void\n\nexport type CursorBehavior = number | \"KEEP_SELECTION\"\n\nexport function indent(s: string): string {\n    return CONFIG.CONTENT.indentation + s;\n}\n\nexport function wrapIn(textarea: HTMLTextAreaElement, w: WrapAction): void {\n    const replacement = w.before + selectedTextIn(textarea) + w.after;\n    // Since wrapping doesn't delete any text, undo support is not relevant and replacing is always safe.\n    const insertionResult = insertPure(textarea, { string: replacement, replace: true });\n    // We must use textFieldEdit.wrapSelection, because if we use insertPure + textFieldEdit.set, the entire textarea content gets selected when the user issues an undo command.\n    textFieldEdit.wrapSelection(textarea, w.before, w.after);\n    // Since we use the insertion result here, it must represent the same modification of the textarea content as textFieldEdit.wrapSelection.\n    if (isNumber(w.cursor)) {\n        placeCursorIn(textarea, insertionResult.startOfInserted + w.cursor);\n    } else {\n        selectRangeIn(textarea, insertionResult.startOfInserted + w.before.length, insertionResult.endOfInserted - w.after.length);\n    }\n}\n\nexport function wrap_verbatim(w: WrapAction): Action {\n    return (textarea, _) => wrapIn(textarea, w);\n}\n\nexport function wrap_tag(w: TagWrapAction): Action {\n    const spacing = w.block ? \"\\n\" : \"\";\n    return wrap_verbatim({\n        before: BB.start(w.tag, w.parameterized ? \"\" : undefined) + spacing,\n        after: spacing + BB.end(w.tag),\n        cursor: (\n            w.parameterized\n                ? 1 + w.tag.length + 2 // 1 for '[', 2 for '=\"'\n                : \"KEEP_SELECTION\"\n        ),\n    });\n}\n\nexport function selectedTextIn(textarea: HTMLTextAreaElement): string {\n    return textarea.value.substring(textarea.selectionStart, textarea.selectionEnd);\n}\n\n// Simple insertion. Selected text is kept in the absence of undo support to protect against accidental deletion.\nexport function insert(str: string): Action {\n    return (textarea, undoSupport) => insertIn(textarea, { string: str, replace: undoSupport });\n}\n\nexport function insertIn(textarea: HTMLTextAreaElement, insertion: Insertion): void {\n    // The caller of this function is fully responsible for deciding whether to replace selected text or not.\n    // textFieldEdit.insert replaces selected text, so if that's not desired, we'll first unselect it such that the insertion is done after the selection.\n    if (!insertion.replace) {\n        placeCursorIn(textarea, textarea.selectionEnd);\n    }\n    // We must use textFieldEdit.insert, because if we use insertPure + textFieldEdit.set, the entire textarea content gets selected when the user issues an undo command.\n    textFieldEdit.insert(textarea, insertion.string);\n    textarea.focus();\n}\n\nfunction insertPure(textarea: HTMLTextAreaElement, insertion: Insertion): InsertionResult {\n    const text = textarea.value;\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const startOfInsertedText = insertion.replace ? start : end;\n    return {\n        textareaContent: text.substring(0, startOfInsertedText) + insertion.string + text.substring(end),\n        startOfInserted: startOfInsertedText,\n        endOfInserted: startOfInsertedText + insertion.string.length,\n    };\n}\n\nexport function placeCursorIn(textarea: HTMLTextAreaElement, position: number): void {\n    selectRangeIn(textarea, position, position);\n}\n\nexport function selectRangeIn(textarea: HTMLTextAreaElement, start: number, end: number): void {\n    textarea.setSelectionRange(start, end);\n    textarea.focus(); // Must be after setSelectionRange to avoid scrolling to the bottom of the textarea in Chrome.\n}\n","import * as CONFIG from \"~src/config\";\nimport * as T from \"~src/text\";\n\nimport { insertIn, selectedTextIn } from \"../logic/textarea\";\n\nconst SPACE = / /g;\nconst CONSECUTIVE_SPACES = / +/g;\n\nexport default function(textarea: HTMLTextAreaElement, undoSupport: boolean) {\n    const selectedText = selectedTextIn(textarea);\n    let n: false | number; // Lets us short-circuit with undo support.\n    if (undoSupport || (n = confirmationNeeded(selectedText), n === false) || confirm(T.general.nbsps_confirm(n))) { // `confirm` is problematic in Chrome (see docs/dialogs.md), but Chrome has full undo support.\n        insertIn(textarea, {\n            string: selectedText.replace(SPACE, CONFIG.NBSP),\n            replace: true,\n        });\n    }\n}\n\n// A heuristic intended to catch cases when the user likely didn't mean to replace spaces with NBSPs and/or it would be cumbersome to restore the change without undo support.\nfunction confirmationNeeded(selectedText: string): false | number {\n    const numberOfSelectedSpaces = selectedText.match(SPACE)?.length || 0;\n    const numberOfSelectedSpaceSegments = selectedText.match(CONSECUTIVE_SPACES)?.length || 0;\n    // Replacing a large number of spread-out spaces with NBSPs is both uncommon and time-consuming to restore.\n    const confirmationNeeded = numberOfSelectedSpaces > 10 && numberOfSelectedSpaceSegments > 3;\n    return confirmationNeeded ? numberOfSelectedSpaces : false;\n}\n","import * as BB from \"bbcode-tags\";\n\nimport { SearchEngine, searchURL } from \"~src/search-engines\";\nimport * as SITE from \"~src/site\";\n\nimport { selectedTextIn, wrapIn } from \"../logic/textarea\";\n\nexport default (engine: SearchEngine) => (textarea: HTMLTextAreaElement, _: boolean) => {\n    const tagName = SITE.TAG.url;\n    const selected = selectedTextIn(textarea);\n    const startTag = BB.start(tagName, searchURL(engine, selected));\n    wrapIn(textarea, {\n        before: startTag,\n        after: BB.end(tagName),\n        cursor: selected === \"\" ? startTag.length - 2 /* for \"] */ : \"KEEP_SELECTION\",\n    });\n};\n","import * as BB from \"bbcode-tags\";\nimport { lines, unlines } from \"lines-unlines\";\n\nimport * as CONFIG from \"~src/config\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nimport { insertIn, selectedTextIn } from \"../logic/textarea\";\n\nexport default function(textarea: HTMLTextAreaElement, undoSupport: boolean): void {\n    const selectedText = selectedTextIn(textarea);\n    const selectedLines = lines(selectedText);\n    if (undoSupport || !shibeConfirmationNeeded(selectedLines) || confirm(T.general.generic_lines_confirm(selectedLines.length))) { // `confirm` is problematic in Chrome (see docs/dialogs.md), but Chrome has full undo support.\n        insertIn(textarea, {\n            string: shibeText(selectedText),\n            replace: true,\n        });\n    }\n}\n\n// A heuristic intended to catch cases when the user likely didn't mean to apply shibe formatting and/or it would be cumbersome to restore the change without undo support.\nfunction shibeConfirmationNeeded(selectedLines: readonly string[]): boolean {\n    const nonEmptyLines = selectedLines.filter(line => line !== \"\");\n    const longestLineLength = Math.max(...nonEmptyLines.map(line => line.length));\n    // Shibe formatting is usually applied to a few short lines of text (\"wow\" etc), and content worth protecting tends to have more and/or longer lines.\n    return nonEmptyLines.length > 5 || longestLineLength > 15;\n}\n\nfunction shibeText(original: string): string {\n    const MAX = 100;\n    return unlines(lines(original).map(\n        line => [\n            BB.start(SITE.TAG.font, CONFIG.CONTENT.shibeFont),\n            BB.start(SITE.TAG.color, CONFIG.CONTENT.shibeColor),\n            BB.start(SITE.TAG.i),\n            CONFIG.NBSP.repeat(randomIntBetween(0, Math.max(0, MAX - line.length))),\n            line,\n            BB.end(SITE.TAG.i),\n            BB.end(SITE.TAG.color),\n            BB.end(SITE.TAG.font),\n        ].join(\"\")\n    ));\n}\n\nfunction randomIntBetween(min: number, max: number): number {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","import * as BB from \"bbcode-tags\";\n\nimport * as CONFIG from \"~src/config\";\nimport * as SITE from \"~src/site\";\nimport { r } from \"~src/utilities\";\n\nimport { insertIn, placeCursorIn } from \"../logic/textarea\";\n\nexport default function(textarea: HTMLTextAreaElement, undoSupport: boolean): void {\n    // Yes, this code is hard to understand. It was conceived using a considerable amount of trial and error.\n    const beforeSelection = textarea.value.substring(0, textarea.selectionStart);\n    const afterSelection = textarea.value.substring(textarea.selectionEnd);\n    const existingNewlinesBeforeSelection = lengthOfGuaranteedMatchIn(beforeSelection, /\\n*$/);\n    const existingNewlinesAfterSelection = lengthOfGuaranteedMatchIn(afterSelection, /^\\n*/);\n    const cursorIsBetweenTwoExistingQuotes = (\n        new RegExp(r`\\[\\/${SITE.TAG.quote}\\]$`, \"i\").test(beforeSelection.trimRight())\n        &&\n        new RegExp(r`^\\[${SITE.TAG.quote}`, \"i\").test(afterSelection.trimLeft())\n    );\n    if (cursorIsBetweenTwoExistingQuotes) {\n        // Just insert empty lines and place the cursor accordingly.\n        const numberOfNewlinesToInsert = Math.max(\n            0, // Using a negative value with String.prototype.repeat is a RangeError.\n            CONFIG.CONTENT.splitQuoteEmptyLines + 1 - existingNewlinesBeforeSelection - existingNewlinesAfterSelection,\n        );\n        // If there are more newlines than we'd like between the quotes, they will be left untouched, because we don't want to mess with deleting content.\n        insertIn(textarea, {\n            string: \"\\n\".repeat(numberOfNewlinesToInsert),\n            replace: undoSupport,\n        });\n        placeCursorIn(textarea, beforeSelection.length - existingNewlinesBeforeSelection + 1); // + 1 to get past the first line break\n    } else {\n        // Add quote tags and place cursor.\n        const startTag = BB.start(SITE.TAG.quote);\n        const endTag = BB.end(SITE.TAG.quote);\n        const extraNewlineBeforeSelectionNeeded = existingNewlinesBeforeSelection === 0;\n        const extraNewlineAfterSelectionNeeded = existingNewlinesAfterSelection === 0;\n        insertIn(textarea, { string: [\n            extraNewlineBeforeSelectionNeeded ? \"\\n\" : \"\",\n            endTag,\n            \"\\n\".repeat(CONFIG.CONTENT.splitQuoteEmptyLines + 1),\n            startTag,\n            extraNewlineAfterSelectionNeeded ? \"\\n\" : \"\",\n        ].join(\"\"), replace: undoSupport });\n        placeCursorIn(textarea, beforeSelection.length + (extraNewlineBeforeSelectionNeeded ? 1 : 0) + endTag.length + 1); // + 1 to get past a line break\n    }\n}\n\nfunction lengthOfGuaranteedMatchIn(s: string, regexThatAlwaysMatches: RegExp): number {\n    // This function should only be used with regexes that always match (which can't be statically checked).\n    return (s.match(regexThatAlwaysMatches) as RegExpMatchArray)[0].length;\n}\n","export type Smiley = readonly [string, string]\n\nexport const SMILEYS: ReadonlyArray<Smiley> = [\n    // Pairs of BBCode code and CSS class:\n    [ \":)\", \"smiley-smile\" ],\n    [ \";)\", \"smiley-wink\" ],\n    [ \":D\", \"smiley-biggrin\" ],\n    [ \":P\", \"smiley-tongue\" ],\n    [ \":O\", \"smiley-surprised\" ],\n    [ \":(\", \"smiley-frown\" ],\n    [ \";(\", \"smiley-cry\" ],\n    [ \":|\", \"smiley-speechless\" ],\n    [ \":arrow:\", \"smiley-arrow\" ],\n    [ \":up:\", \"smiley-up\" ],\n    [ \":down:\", \"smiley-down\" ],\n    [ \":confused:\", \"smiley-confused\" ],\n    [ \":mad:\", \"smiley-mad\" ],\n    [ \":lol:\", \"smiley-lol\" ],\n    [ \":joyful:\", \"smiley-joyful\" ],\n    [ \":cool:\", \"smiley-cool\" ],\n    [ \":ninja:\", \"smiley-ninja\" ],\n    [ \":innocent:\", \"smiley-innocent\" ],\n    [ \":rolleyes:\", \"smiley-rolleyes\" ],\n];\n\nexport function codeFor(smiley: Smiley): string {\n    return smiley[0];\n}\n\nexport function classFor(smiley: Smiley): string {\n    return smiley[1];\n}\n","import * as BB from \"bbcode-tags\";\nimport classNames from \"classnames\";\nimport { lines, unlines } from \"lines-unlines\";\nimport { h, JSX } from \"preact\";\n\nimport * as CONFIG from \"~src/config\";\nimport iconExpander from \"~src/icons/expander.svg\";\nimport iconQuote from \"~src/icons/quote.svg\";\nimport iconSearchLink from \"~src/icons/search-link.svg\";\nimport iconSplitQuote from \"~src/icons/split-quote.svg\";\nimport { SearchEngine } from \"~src/search-engines\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\nimport { InsertButtonDescription } from \"~src/types\";\nimport { fromMaybeUndefined } from \"~src/utilities\";\n\nimport ACTION_REPLACE_SPACES_WITH_NBSPS from \"../actions/replace-spaces-with-nbsps\";\nimport ACTION_SEARCH_LINK from \"../actions/search-link\";\nimport ACTION_SHIBE from \"../actions/shibe\";\nimport ACTION_SPLIT_QUOTE from \"../actions/split-quote\";\n\nimport * as Smileys from \"./smileys\";\nimport { Action, CursorBehavior, insert, insertIn, selectedTextIn, wrap_tag, wrap_verbatim } from \"./textarea\";\n\nexport const BUTTON = {\n    nbsps: generalButton({\n        label: T.editing_tools.nbsps_label,\n        tooltip: T.editing_tools.nbsps_tooltip,\n        action: ACTION_REPLACE_SPACES_WITH_NBSPS,\n    }),\n    url: tagButton({\n        tag: SITE.TAG.url,\n        parameterized: true,\n        tooltip: T.editing_tools.url_tooltip,\n        icon: { type: \"RAW\", image: SITE.ICONS.toolbarIcon(SITE.ICONS.position_toolbar_url) },\n    }),\n    img: generalButton({\n        tooltip: T.editing_tools.img_tooltip,\n        action: ACTION_IMG,\n        icon: { type: \"RAW\", image: SITE.ICONS.toolbarIcon(SITE.ICONS.position_toolbar_img) },\n    }),\n    search: (engine: SearchEngine) => generalButton({\n        tooltip: T.editing_tools.search_link_tooltip,\n        action: ACTION_SEARCH_LINK(engine),\n        icon: { type: \"RAW\", image: iconSearchLink },\n    }),\n    shibe: generalButton({\n        label: T.editing_tools.shibe_label,\n        tooltip: T.editing_tools.shibe_tooltip,\n        class: CONFIG.CLASS.shibe,\n        action: ACTION_SHIBE,\n    }),\n    doge: generalButton({\n        tooltip: T.editing_tools.doge_tooltip,\n        action: insert(CONFIG.CONTENT.doge),\n        icon: { type: \"URL\", image: CONFIG.ICONS.DOGE },\n    }),\n    quote: tagButton({\n        tag: SITE.TAG.quote,\n        parameterized: true,\n        block: true,\n        tooltip: T.editing_tools.quote_tooltip,\n        icon: { type: \"RAW\", image: iconQuote },\n    }),\n    splitQuote: generalButton({\n        tooltip: T.editing_tools.split_quote_tooltip,\n        action: ACTION_SPLIT_QUOTE,\n        icon: { type: \"RAW\", image: iconSplitQuote },\n    }),\n    expander: tagButton({\n        tag: SITE.TAG.expander,\n        tooltip: T.editing_tools.expander_tooltip,\n        block: true,\n        icon: { type: \"RAW\", image: iconExpander },\n    }),\n} as const;\n\nexport const BUTTONS = {\n    meta: [\n        tagButton({ tag: SITE.TAG.ins, label: T.editing_tools.ins_label, tooltip: T.editing_tools.ins_tooltip }),\n        tagButton({ tag: SITE.TAG.del, label: T.editing_tools.del_label, tooltip: T.editing_tools.del_tooltip }),\n    ],\n    code: [\n        tagButton({ tag: SITE.TAG.noparse, tooltip: T.editing_tools.noparse_tooltip, class: CONFIG.CLASS.button_code }),\n        tagButton({ tag: SITE.TAG.pre, tooltip: T.editing_tools.pre_tooltip, block: true, class: CONFIG.CLASS.button_code }),\n        tagButton({ tag: SITE.TAG.cmd, tooltip: T.editing_tools.cmd_tooltip, class: CONFIG.CLASS.button_code }),\n        tagButton({ tag: SITE.TAG.code, tooltip: T.editing_tools.code_tooltip, block: true, class: CONFIG.CLASS.button_code }),\n    ],\n    math: [\n        tagButton({ tag: SITE.TAG.math, label: T.editing_tools.math_label, tooltip: T.editing_tools.math_tooltip, class: CONFIG.CLASS.button_math }),\n        tagButton({ tag: SITE.TAG.sub, label: T.editing_tools.sub_label, tooltip: T.editing_tools.sub_tooltip, class: CONFIG.CLASS.button_math }),\n        tagButton({ tag: SITE.TAG.sup, label: T.editing_tools.sup_label, tooltip: T.editing_tools.sup_tooltip, class: CONFIG.CLASS.button_math }),\n    ],\n    whitespace: [\n        BUTTON.nbsps,\n    ],\n    definitions: [\n        tagButton({ tag: SITE.TAG.dl, label: T.editing_tools.dl_label, tooltip: T.editing_tools.dl_tooltip, block: true }),\n        tagButton({ tag: SITE.TAG.dt, label: T.editing_tools.dt_label, tooltip: T.editing_tools.dt_tooltip }),\n        tagButton({ tag: SITE.TAG.dd, label: T.editing_tools.dd_label, tooltip: T.editing_tools.dd_tooltip }),\n    ],\n    embed: (searchEngine: SearchEngine) => [\n        BUTTON.url,\n        BUTTON.img,\n        BUTTON.search(searchEngine),\n    ],\n    doge: [\n        BUTTON.shibe,\n        BUTTON.doge,\n    ],\n} as const;\n\nexport const COLORS: ReadonlyArray<string> = [\n    \"#D00\",     // dark red\n    \"#C15200\",  // SweClockers orange\n    \"#EE8500\",  // orange\n    \"#EC0\",     // yellow\n    \"#20A000\",  // green\n    \"#789922\",  // >greentext\n    \"#106400\",  // dark green\n    \"#0BC\",     // turquoise\n    \"#24F\",     // light blue\n    \"#1525D0\",  // dark blue\n    \"#9000B5\",  // purple\n    \"black\",\n    \"gray\",\n    \"white\",\n    \"red\",\n    \"yellow\",\n    \"lime\",\n    \"green\",\n    \"aqua\",\n    \"blue\",\n    \"magenta\",\n];\n\ntype Icon = Readonly<{ type: \"RAW\" | \"URL\", image: string }>\n\ntype ButtonDescription = Readonly<{\n    label?: string,\n    tooltip?: string,\n    class?: string,\n    tag: string,\n    parameterized?: boolean,\n    block?: boolean,\n    icon?: Icon,\n    custom?: boolean,\n    cursor?: CursorBehavior,\n    action: Action,\n    style?: string,\n}>\n\ntype TagButtonDescription = Pick<ButtonDescription, \"tag\" | \"label\" | \"tooltip\" | \"class\" | \"icon\" | \"parameterized\" | \"block\">\n\nexport type Button = (textarea: HTMLTextAreaElement, undoSupport: boolean) => JSX.Element\n\nexport function tagButton(button: TagButtonDescription): Button {\n    return generalButton({\n        label: fromMaybeUndefined(button.icon === undefined ? button.tag : \"\", button.label),\n        tooltip: button.tooltip,\n        class: button.class,\n        icon: button.icon,\n        action: wrap_tag({\n            tag: button.tag,\n            parameterized: fromMaybeUndefined(false, button.parameterized),\n            block: fromMaybeUndefined(false, button.block),\n        }),\n    });\n}\n\nexport function insertButton(button: InsertButtonDescription): Button {\n    return generalButton({\n        label: fromMaybeUndefined(button.insert, button.label),\n        tooltip: button.tooltip,\n        action: insert(button.insert),\n    });\n}\n\nexport function colorButton(color: string): Button {\n    return generalButton({\n        label: \"\",\n        tooltip: color,\n        style: `background: ${color};`,\n        action: wrap_verbatim({\n            before: BB.start(SITE.TAG.color, color),\n            after: BB.end(SITE.TAG.color),\n            cursor: \"KEEP_SELECTION\",\n        }),\n    });\n}\n\nexport function smileyButton(smiley: Smileys.Smiley): Button {\n    return generalButton({\n        label: \"\",\n        tooltip: Smileys.codeFor(smiley),\n        custom: true,\n        class: classNames(SITE.CLASS.smiley, Smileys.classFor(smiley)),\n        action: insert(\" \" + Smileys.codeFor(smiley) + \" \"), // Spaces are necessary around a smiley. (Multiple ones collapse.)\n    });\n}\n\nexport function generalButton(button: Pick<ButtonDescription, \"label\" | \"tooltip\" | \"class\" | \"icon\" | \"custom\" | \"action\" | \"style\">): Button {\n    return (textarea, undoSupport) => {\n        const icon = button.icon;\n        const label = (icon === undefined ? \"\" : icon.type === \"URL\" ? `<img src=\"${icon.image}\" />` : icon.image) + fromMaybeUndefined(\"\", button.label);\n        const className = [\n            button.class || \"\",\n            button.custom ? \"\" : SITE.CLASS.button,\n            icon === undefined ? \"\" : \" \" + CONFIG.CLASS.iconButton,\n        ].join(\" \").trim();\n        return (\n            <a\n                dangerouslySetInnerHTML={{__html: label}}\n                title={button.tooltip}\n                class={className}\n                style={button.style}\n                onClick={() => button.action(textarea, undoSupport) }\n                href=\"javascript:void(0)\"\n            />\n        );\n    };\n}\n\nexport function toolbarButton(button: Pick<ButtonDescription, \"tooltip\" | \"class\" | \"action\" | \"style\">): Button {\n    return (textarea, undoSupport) => (\n        <div\n            title={button.tooltip}\n            class={[ SITE.CLASS.toolbarButton, button.class || \"\" ].join(\" \").trim()}\n            style={button.style}\n        >\n            <div class={SITE.CLASS.inner} onClick={() => button.action(textarea, undoSupport)}>\n                <div class={SITE.CLASS.toolbarButtonIcon}></div>\n            </div>\n        </div>\n    );\n}\n\nfunction ACTION_IMG(textarea: HTMLTextAreaElement, undoSupport: boolean): void {\n    const selection = selectedTextIn(textarea);\n    if (!selection.includes(\"\\n\")) {\n        wrap_tag({ tag: SITE.TAG.img, parameterized: false, block: false })(textarea, undoSupport);\n    } else {\n        const imgify = (line: string) => line.trim() === \"\" ? \"\" : BB.start(SITE.TAG.img) + line.trim() + BB.end(SITE.TAG.img);\n        insertIn(textarea, { string: unlines(lines(selection).map(imgify)), replace: true });\n    }\n}\n","export default \"<svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <circle stroke=\\\"#888\\\" stroke-width=\\\"5\\\" r=\\\"20\\\" cx=\\\"41\\\" cy=\\\"23\\\" fill=\\\"none\\\"/>\\n    <line x1=\\\"4\\\" y1=\\\"60\\\" x2=\\\"28\\\" y2=\\\"36\\\" stroke=\\\"#888\\\" stroke-width=\\\"10\\\" />\\n</svg>\\n\";","export default \"<svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\">\\n    <rect x=\\\"1\\\" y=\\\"1\\\" width=\\\"30\\\" height=\\\"30\\\" stroke=\\\"#444\\\" fill=\\\"#d7d5d1\\\" stroke-width=\\\"2\\\"/>\\n    <text x=\\\"4\\\" y=\\\"18\\\" style=\\\"fill: #444; font-family: Georgia, serif; font-size: 20px\\\"></text>\\n    <text       y=\\\"13\\\" style=\\\"fill: #444; font-family: sans-serif; font-size: 4px\\\">\\n        <tspan x=\\\"4\\\" dy=\\\"1.2em\\\">Dumheter</tspan>\\n        <tspan x=\\\"4\\\" dy=\\\"1.2em\\\">som mste</tspan>\\n        <tspan x=\\\"4\\\" dy=\\\"1.2em\\\">besvaras.</tspan>\\n    </text>\\n</svg>\\n\";","export default \"<svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\">\\n    <rect x=\\\"1\\\" y=\\\"-3\\\" width=\\\"30\\\" height=\\\"10\\\" stroke=\\\"#444\\\" fill=\\\"#d7d5d1\\\" stroke-width=\\\"2\\\"/>\\n    <rect x=\\\"1\\\" y=\\\"19\\\" width=\\\"30\\\" height=\\\"22\\\" stroke=\\\"#444\\\" fill=\\\"#d7d5d1\\\" stroke-width=\\\"2\\\"/>\\n    <text x=\\\"0\\\" y=\\\"13\\\" style=\\\"fill: #444; font-family: sans-serif; font-size: 4px\\\">Du har fel.</text>\\n    <text x=\\\"4\\\" y=\\\"36\\\" style=\\\"fill: #444; font-family: Georgia, serif; font-size: 20px\\\"></text>\\n</svg>\\n\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 32 32\\\">\\n    <rect x=\\\"1\\\" y=\\\"1\\\" width=\\\"30\\\" height=\\\"30\\\" stroke=\\\"#888\\\" stroke-width=\\\"2\\\" fill=\\\"#d7d5d1\\\"/>\\n    <polyline points=\\\"0,0  8,4  0,8\\\" fill=\\\"black\\\" transform=\\\"translate(6, 4)\\\"/>\\n    <line x1=\\\"4\\\" x2=\\\"28\\\" y1=\\\"0\\\" y2=\\\"0\\\" transform=\\\"translate(0, 15)\\\" stroke=\\\"#888\\\" stroke-width=\\\"2\\\"/>\\n    <g transform=\\\"translate(10, 23)\\\">\\n        <circle id=\\\"circle\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"2\\\" fill=\\\"#444\\\"/>\\n        <use href=\\\"#circle\\\" xlink:href=\\\"#circle\\\" transform=\\\"translate(6,0)\\\"/>\\n        <use href=\\\"#circle\\\" xlink:href=\\\"#circle\\\" transform=\\\"translate(12,0)\\\"/>\\n    </g>\\n</svg>\\n\";","import { JSX, render } from \"preact\";\nimport { isString } from \"ts-type-guards\";\nimport { log } from \"userscripter\";\n\nimport { truncate } from \"~src/utilities\";\n\n/**\n * A function assumed to insert `placeholder` in `parent`.\n */\ntype InsertIn<Parent extends Element> = (\n    /*\n    This type has an object parameter instead of two plain parameters because otherwise it would be easy to accidentally pass something that's not an actual insertion function.\n    In particular, one could accidentally pass `insertBefore` instead of `insertBefore(reference)` and get no type error.\n    It's still possible to pass something stupid like `console.log` or `() => {}`, but that's hard to prevent and not very likely anyway.\n    We could have parameterized over the type of `placeholder` and required that the return type be that type, but then one might be tempted to pass something like `({ placeholder }) => placeholder`.\n    Using `void` makes it obvious that the function should have at least some side effect.\n    */\n    (_: { parent: Parent, placeholder: Text }) => void\n)\n\ntype Insert = InsertIn<Element>\n\n/**\n * Renders a virtual node at a specific position in a parent element.\n * @param parent The element to render inside.\n * @param insert A function describing where in the parent element the rendered element should be inserted. It will be given `{ parent, placeholder }` and will be assumed to actually insert `placeholder` directly under `parent`.\n * @param vnode The virtual node to render.\n */\nexport function renderIn<Parent extends Element>(\n    parent: Parent,\n    insert: InsertIn<Parent>,\n    vnode: JSX.Element,\n): void {\n    const placeholder = document.createTextNode(\"\"); // Doesn't matter what type of node we use here, because it will be replaced by the rendered element.\n    insert({ parent, placeholder });\n    if (placeholder.parentNode === parent) { // \"If the optional replaceNode parameter is provided, it must be a child of containerNode.\" https://preactjs.com/guide/v10/api-reference/\n        render(vnode, parent, placeholder);\n    } else {\n        const nodeType = isString(vnode.type) ? ` \"${vnode.type}\"` : \"\"; // Cluttered message if it's not a string.\n        const nodeProps = truncate(200, JSON.stringify(vnode.props)); // Cluttered message if it's too long.\n        log.error(`Placeholder for virtual${nodeType} node with properties\\n\\n    ${nodeProps}\\n\\nwas not inserted directly under the intended parent element.`);\n    }\n}\n\nexport const insertAtTheEnd: Insert = (\n    ({ parent, placeholder }) => {\n        parent.append(placeholder);\n    }\n);\n\nexport const insertAtTheBeginning: Insert = (\n    ({ parent, placeholder }) => {\n        parent.prepend(placeholder);\n    }\n);\n\nexport const insertBefore: (reference: Node) => Insert = (\n    reference => ({ parent, placeholder }) => {\n        parent.insertBefore(placeholder, reference);\n    }\n);\n\nexport const insertAfter: (reference: Node) => Insert = (\n    reference => ({ parent, placeholder }) => {\n        parent.insertBefore(placeholder, reference.nextSibling); // If reference.nextSibling is null, reference is the last child and placeholder will be inserted after it.\n    }\n);\n","import {\n    BooleanPreference,\n    MultichoicePreference,\n} from \"ts-preferences\";\n\nimport * as CONFIG from \"~src/config\";\nimport { BUTTONS, Button, insertButton } from \"~src/operations/logic/editing-tools\";\nimport { insertAtTheEnd, renderIn } from \"~src/operations/logic/render\";\nimport { SearchEngine } from \"~src/search-engines\";\nimport * as T from \"~src/text\";\n\n\nfunction buttonsDescription(buttons: readonly Button[]): string {\n    const textarea = document.createElement(\"textarea\");\n    const undoSupport = true; // The buttons are only used for illustrative purposes, not actual text editing.\n    const connectedButtons = buttons.map(b => b(textarea, undoSupport));\n    const div = document.createElement(\"div\");\n    for (const b of connectedButtons) {\n        renderIn(div, insertAtTheEnd, b);\n    }\n    return div.innerHTML;\n}\n\nconst enable = new BooleanPreference({\n    key: \"editing_tools\",\n    default: true,\n    label: T.preferences.editing_tools.enable,\n    description: T.preferences.editing_tools.enable_description,\n    extras: { class: [ CONFIG.CLASS.inlinePreference, CONFIG.CLASS.primaryInlinePreference ] },\n});\n\nconst dependencies = [\n    {\n        preference: enable,\n        condition: (v: boolean) => v,\n    },\n];\n\nexport const enum Position {\n    ABOVE = \"above\", BELOW = \"below\",\n}\n\nexport default {\n    enable,\n    in_quick_reply_form: new BooleanPreference({\n        key: \"editing_tools_in_quick_reply_form\",\n        default: true,\n        label: T.preferences._.in_quick_reply_form,\n        description: T.preferences._.in_quick_reply_form_description,\n        extras: { class: CONFIG.CLASS.inlinePreference },\n    }),\n    position: new MultichoicePreference({\n        key: \"editing_tools_position\",\n        default: Position.BELOW,\n        label: T.preferences.editing_tools.position.label,\n        description: T.preferences.editing_tools.position.description,\n        options: [\n            {\n                value: Position.ABOVE,\n                label: T.preferences.editing_tools.position.above,\n            },\n            {\n                value: Position.BELOW,\n                label: T.preferences.editing_tools.position.below,\n            },\n        ],\n        dependencies,\n    }),\n    special_characters: new BooleanPreference({\n        key: \"editing_tools_special_characters\",\n        default: true,\n        label: T.preferences.editing_tools.special_characters,\n        extras: {\n            more: buttonsDescription(T.special_characters.slice(0, 5).map(insertButton)) + \"\",\n            class: CONFIG.CLASS.editingTools,\n        },\n        dependencies,\n    }),\n    meta: new BooleanPreference({\n        key: \"editing_tools_meta\",\n        default: true,\n        label: T.preferences.editing_tools.meta,\n        extras: {\n            more: buttonsDescription(BUTTONS.meta),\n            class: CONFIG.CLASS.editingTools,\n        },\n        dependencies,\n    }),\n    code: new BooleanPreference({\n        key: \"editing_tools_code\",\n        default: true,\n        label: T.preferences.editing_tools.code,\n        extras: {\n            more: buttonsDescription(BUTTONS.code),\n            class: CONFIG.CLASS.editingTools,\n        },\n        dependencies,\n    }),\n    math: new BooleanPreference({\n        key: \"editing_tools_math\",\n        default: true,\n        label: T.preferences.editing_tools.math,\n        extras: {\n            more: buttonsDescription(BUTTONS.math),\n            class: CONFIG.CLASS.editingTools,\n        },\n        dependencies,\n    }),\n    whitespace: new BooleanPreference({\n        key: \"editing_tools_whitespace\",\n        default: true,\n        label: T.preferences.editing_tools.whitespace,\n        extras: {\n            more: buttonsDescription(BUTTONS.whitespace),\n            class: CONFIG.CLASS.editingTools,\n        },\n        dependencies,\n    }),\n    definitions: new BooleanPreference({\n        key: \"editing_tools_definitions\",\n        default: true,\n        label: T.preferences.editing_tools.definitions,\n        extras: {\n            more: buttonsDescription(BUTTONS.definitions),\n            class: CONFIG.CLASS.editingTools,\n        },\n        dependencies,\n    }),\n    embed: new BooleanPreference({\n        key: \"editing_tools_embed\",\n        default: true,\n        label: T.preferences.editing_tools.embed,\n        extras: {\n            more: buttonsDescription(BUTTONS.embed(SearchEngine.GOOGLE)),\n            class: CONFIG.CLASS.editingTools,\n        },\n        dependencies,\n    }),\n    search_engine: new MultichoicePreference({\n        key: \"search_engine\",\n        default: SearchEngine.GOOGLE,\n        label: T.preferences.editing_tools.search_engine.label,\n        description: T.preferences.editing_tools.search_engine.description,\n        options: [\n            {\n                value: SearchEngine.GOOGLE,\n                label: SearchEngine.GOOGLE,\n            },\n            {\n                value: SearchEngine.DUCKDUCKGO,\n                label: SearchEngine.DUCKDUCKGO,\n            },\n        ],\n    }),\n    doge: new BooleanPreference({\n        key: \"editing_tools_doge\",\n        default: false,\n        label: T.preferences.editing_tools.doge,\n        extras: {\n            more: T.preferences.editing_tools.doge_description,\n            class: [ CONFIG.CLASS.shibe, CONFIG.CLASS.editingTools ].join(\" \"),\n        },\n        dependencies,\n    }),\n    color_palette: new BooleanPreference({\n        key: \"editing_tools_color_palette\",\n        default: true,\n        label: T.preferences.editing_tools.color_palette,\n        description: T.preferences.editing_tools.color_palette_description,\n        extras: { class: CONFIG.CLASS.editingTools },\n        dependencies,\n    }),\n    smileys: new BooleanPreference({\n        key: \"editing_tools_smileys\",\n        default: true,\n        label: T.preferences.editing_tools.smileys,\n        extras: { class: CONFIG.CLASS.editingTools },\n        dependencies,\n    }),\n} as const;\n","import {\n    BooleanPreference,\n    StringPreference,\n} from \"ts-preferences\";\n\nimport * as T from \"~src/text\";\n\nconst quote_signature_buttons = new BooleanPreference({\n    key: \"quote_signature_buttons\",\n    default: true,\n    label: T.preferences.forum_threads.quote_signature_buttons,\n    description: T.preferences.forum_threads.quote_signature_buttons_description,\n});\n\nconst dependencies_quote_signature = [\n    {\n        preference: quote_signature_buttons,\n        condition: (v: boolean) => v,\n    },\n];\n\nexport default {\n    improved_pagination_buttons: new BooleanPreference({\n        key: \"improved_pagination_buttons\",\n        default: true,\n        label: T.preferences.forum_threads.improved_pagination_buttons,\n        description: T.preferences.forum_threads.improved_pagination_buttons_description,\n    }),\n    insert_link_to_top: new BooleanPreference({\n        key: \"insert_link_to_top\",\n        default: true,\n        label: T.preferences.forum_threads.insert_link_to_top,\n        description: T.preferences.forum_threads.insert_link_to_top_description,\n    }),\n    highlight_own_posts: new BooleanPreference({\n        key: \"highlight_own_posts\",\n        default: true,\n        label: T.preferences.forum_threads.highlight_own_posts,\n        description: T.preferences.forum_threads.highlight_own_posts_description,\n    }),\n    insert_pm_links: new BooleanPreference({\n        key: \"insert_pm_links\",\n        default: true,\n        label: T.preferences.forum_threads.insert_pm_links,\n        description: T.preferences.forum_threads.insert_pm_links_description,\n    }),\n    mention_everyone_button: new BooleanPreference({\n        key: \"mention_everyone_button\",\n        default: false,\n        label: T.preferences.forum_threads.mention_everyone_button,\n        description: T.preferences.forum_threads.mention_everyone_button_description,\n    }),\n    quote_signature_buttons,\n    quote_signature_message: new StringPreference({\n        key: \"quote_signature_message\",\n        default: T.preferences.forum_threads.quote_signature_message_default,\n        label: T.preferences.forum_threads.quote_signature_message,\n        description: T.preferences.forum_threads.quote_signature_message_description,\n        multiline: true,\n        dependencies: dependencies_quote_signature,\n    }),\n} as const;\n","import {\n    BooleanPreference,\n    IntegerPreference,\n    StringPreference,\n} from \"ts-preferences\";\n\nimport * as T from \"~src/text\";\n\nexport default {\n    lock_heights: new BooleanPreference({\n        key: \"lock_heights\",\n        default: true,\n        label: T.preferences.general.lock_heights,\n        description: T.preferences.general.lock_heights_description,\n    }),\n    improved_corrections: new BooleanPreference({\n        key: \"improved_corrections\",\n        default: true,\n        label: T.preferences.general.improved_corrections,\n        description: T.preferences.general.improved_corrections_description,\n    }),\n    insert_preferences_shortcut: new BooleanPreference({\n        key: \"insert_preferences_shortcut\",\n        default: true,\n        label: T.preferences.general.insert_preferences_shortcut,\n        description: T.preferences.general.insert_preferences_shortcut_description,\n    }),\n    replace_followed_threads_link: new BooleanPreference({\n        key: \"replace_followed_threads_link\",\n        default: false,\n        label: T.preferences.general.replace_followed_threads_link,\n        description: T.preferences.general.replace_followed_threads_link_description,\n    }),\n    remember_location_in_market: new BooleanPreference({\n        key: \"remember_location_in_market\",\n        default: true,\n        label: T.preferences.general.remember_location_in_market,\n        description: T.preferences.general.remember_location_in_market_description,\n    }),\n    location_region: new IntegerPreference({\n        key: \"location_region\",\n        default: 0, // \"Vlj region:\"\n        label: T.preferences._.NO_LABEL,\n        extras: { implicit: true },\n    }),\n    location_city: new StringPreference({\n        key: \"location_city\",\n        default: \"\",\n        label: T.preferences._.NO_LABEL,\n        multiline: false,\n        extras: { implicit: true },\n    }),\n} as const;\n","import { Preference } from \"./Preference\";\r\nexport class ListPreference extends Preference {\r\n    getClassName() { return \"ListPreference\"; }\r\n}\r\n//# sourceMappingURL=ListPreference.js.map","import { ListPreference } from \"ts-preferences\";\n\nimport * as T from \"~src/text\";\n\nexport default {\n    uninteresting_subforums: new ListPreference<number>({\n        key: \"interests_uninteresting_subforums\",\n        label: T.preferences._.NO_LABEL,\n        default: [],\n    }),\n} as const;\n","export enum Action {\n    PREVIEW = \"preview\",\n    SUBMIT = \"submit\",\n    INSERT_TAB = \"insert_tab\",\n    INSERT_LINK = \"insert_link\",\n}\n","import { ListPreference } from \"ts-preferences\";\n\nimport { Action } from \"~src/actions\";\nimport * as T from \"~src/text\";\n\nexport type ShortcutEntry = Readonly<{\n    shortcut: string,\n    action: Action,\n}>\n\nexport default new ListPreference<ShortcutEntry>({\n    key: \"keyboard\",\n    label: T.preferences._.NO_LABEL,\n    default: [\n        { shortcut: \"mod+k\", action: Action.INSERT_LINK },\n        { shortcut: \"mod+s\", action: Action.SUBMIT },\n        { shortcut: \"mod+p\", action: Action.PREVIEW },\n        { shortcut: \"tab\", action: Action.INSERT_TAB },\n    ],\n    extras: { implicit: true },\n});\n","import { PreferenceManager } from \"ts-preferences\";\nimport { loggingResponseHandler, subscriptable } from \"userscripter/lib/preferences\";\n\nimport * as CONFIG from \"~src/config\";\nimport * as darkTheme from \"~src/dark-theme\";\nimport * as T from \"~src/text\";\nimport U from \"~src/userscript\";\n\nimport advancedPreferences from \"./preferences/advanced\";\nimport customizeContentPreferences from \"./preferences/customize-content\";\nimport darkThemePreferences from \"./preferences/dark-theme\";\nimport editModePreferences from \"./preferences/edit-mode\";\nimport editingToolsPreferences from \"./preferences/editing-tools\";\nimport forumThreadsPreferences from \"./preferences/forum-threads\";\nimport generalPreferences from \"./preferences/general\";\nimport interestsPreferences from \"./preferences/interests\";\nimport keyboardPreferences from \"./preferences/keyboard\";\n\nexport const P = {\n    general: {\n        label: T.preferences.general.label,\n        _: generalPreferences,\n    },\n    forum_threads: {\n        label: T.preferences.forum_threads.label,\n        _: forumThreadsPreferences,\n    },\n    edit_mode: {\n        label: T.preferences.edit_mode.label,\n        _: editModePreferences,\n    },\n    editing_tools: {\n        label: T.preferences.editing_tools.label,\n        _: editingToolsPreferences,\n        extras: { id: CONFIG.ID.editingToolsPreferences },\n    },\n    dark_theme: {\n        label: T.preferences.dark_theme.label(darkTheme.AUTHOR, darkTheme.URL.info),\n        _: darkThemePreferences,\n    },\n    advanced: {\n        label: T.preferences.advanced.label,\n        _: advancedPreferences,\n    },\n    customize_content: {\n        label: T.preferences.customize_content.label,\n        _: customizeContentPreferences,\n    },\n    keyboard: keyboardPreferences,\n    interests: {\n        label: T.preferences.interests.label,\n        _: interestsPreferences,\n    },\n} as const;\n\nexport const responseHandler = subscriptable(loggingResponseHandler);\n\nexport const Preferences = new PreferenceManager(P, U.id + \"-preference-\", responseHandler.handler);\n","import \"css.escape\"; // It is side-effecty.\n\nimport * as SITE from \"~src/site\";\n\nconst C = SITE.CLASS;\n\nconst settingsNavigation = `ul.${C.settingsNavigation}`;\n\nconst actionButtons = `button[name=action]`;\nconst actionButtonsQuickReply = `#quickreply .controls button`;\nconst forumPostContainer = \".\" + SITE.CLASS.forumPosts;\nconst signoutButton = `a[href=\"${SITE.PATH.SIGNOUT}\"]`;\n\nconst textareaToolbarInner = `form .toolbar .tbInner`;\n\nexport default {\n    textarea: \"textarea#\" + CSS.escape(SITE.ID.textarea),\n    textareaToolbarInner,\n    textareaToolbarStrikeButton: textareaToolbarInner + ` .strike`,\n    textareaToolbarUnorderedListButton: textareaToolbarInner + ` .ul`,\n    proofDialogTextarea: `.${SITE.CLASS.proofDialog} textarea`,\n    threadTitle: `h1`,\n    moreArticles: `.mainContent ~ .mainContent`,\n    settingsNavigation,\n    actionButtons,\n    quoteButton: \"a.button.quote\",\n    previewButton: actionButtons + `[value=${SITE.FORM.value.preview}]`,\n    saveButton: actionButtons + `[value=${SITE.FORM.value.submit}]`,\n    saveButtonQuickReply: actionButtonsQuickReply + `:nth-of-type(1)`,\n    previewButtonQuickReply: actionButtonsQuickReply + `:nth-of-type(2)`,\n    forumPostContainer,\n    replyButtonAfterForumPosts: `${forumPostContainer} ~ * .replyToThread`,\n    cityInput: `input[name=\"city\"]`,\n    regionSelect: `select[name=\"location\"]`,\n    sideColumnGuides: `.videoPush.${C.sideBox}`,\n    sideColumnPopularGalleries: `.popularGalleries.${C.sideBox}`,\n    bbParagraph: `.bbParagraph`,\n    forumLink: `.subForums td:first-child > * a[href^=\"/forum/\"]`, // Have to be this specific because there are other random links that we don't want to match.\n    forumPost: \".\" + SITE.CLASS.forumPost,\n    forumPostAuthorLink: `a.name[itemprop=\"author\"]`,\n    linkedForumPost: `.` + SITE.CLASS.forumPost + `.is-linked`,\n    pageNavigationAfterForumPosts: `${forumPostContainer} ~ * .pages`,\n    quickReplyForm: `#quickreply form`,\n    signoutButton,\n    signinButtonOr: (selector: string) => `a[href=\"${SITE.PATH.SIGNIN}\"], ${selector}`, // Order doesn't matter.\n    followedThreadsLinkText: `#${SITE.ID.header} a[href=\"${SITE.PATH.FOLLOWED}\"] span`,\n    proofDialogCloseButton: \".\" + SITE.CLASS.proofDialog + \" .cntClose\",\n} as const;\n","import * as SITE from \"~src/site\";\n\n// Examples include `@Alling: `, `@Alling:` and `@\"---\": `.\nconst REGEX_POSSIBLY_CLEAN_SLATE_REPLY = /^@(\"?)([^\"]+)\\1: ?$/;\n\n// Examples include `@Alling: `, `@Alling:` and `@\"Better SweClockers\": `.\nexport function isCleanSlate_reply(text: string): boolean {\n    const match = text.match(REGEX_POSSIBLY_CLEAN_SLATE_REPLY);\n    return match === null ? false : SITE.isValidUsername(match[2]);\n}\n\nexport function mention(username: string): string {\n    // It's non-trivial to write a sound and complete predicate that decides whether a username needs quotes or not.\n    // One complicating factor is that some disallowed usernames have been allowed before (e.g. \"simon.alling\").\n    // To avoid having to deal with this, we'll just always add quotes.\n    return `@\"${username}\"`;\n}\n","import * as ms from \"milliseconds\";\nimport * as Storage from \"ts-storage\";\nimport { isNumber, isString } from \"ts-type-guards\";\nimport { log } from \"userscripter\";\n\nimport * as CONFIG from \"~src/config\";\nimport { insertAtTheEnd, renderIn } from \"~src/operations/logic/render\";\nimport { P, Preferences } from \"~src/preferences\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nimport { isCleanSlate_reply } from \"./edit-mode\";\nimport { generalButton } from \"./logic/editing-tools\";\nimport { insertIn } from \"./logic/textarea\";\n\n/*\nIf the user visits a linked post and tried to submit a post \"just now\", we will\nassume it's this one, and delete any autosaved draft.\n\nShould be longer than it usually takes to submit a post, but short enough so the\nuser is unlikely to do anything else, or give up waiting, meanwhile.\n*/\nconst MAX_MILLISECONDS_TO_COUNT_AS_JUST_NOW = 3000;\n\n/*\nIf the user visits a linked post that can be determined to have been \"recently\"\ncreated, we will consider it just posted, so we can go ahead and delete any\nautosaved draft.\n\nShould be longer than it usually takes to submit a post, but short enough so the\nuser is unlikely to submit another post meanwhile.\n*/\nconst MAX_MILLISECONDS_TO_COUNT_AS_RECENTLY = ms.seconds(30);\n\nconst AUTOSAVE_INTERVAL_SECONDS = 3;\n\nconst MIN_LENGTH_TO_SAVE = 10;\n\nconst MAX_LENGTH_TO_SHOW = 200; // when asking if draft should be restored\n\nexport const manageAutosaveWatchdog = (undoSupport: boolean) => (e: {\n    textarea: HTMLElement,\n    saveButton: HTMLElement,\n    toolbarInner: HTMLElement,\n}) => {\n    const textarea = e.textarea as HTMLTextAreaElement;\n    // If the user came here by previewing their post, there is nothing saved at this point, because we cleared the draft when they deliberately unloaded the page.\n    maybeOfferToRestoreAutosavedPost(textarea, e.toolbarInner, undoSupport);\n    // Now that we have inserted the restore button or decided not to, we can start autosaving the text in the textarea.\n    enableWatchdog(textarea);\n    e.saveButton.addEventListener(\"click\", () => {\n        const nowInMilliseconds = Date.now();\n        Storage.set_session(CONFIG.KEY.last_time_user_tried_to_submit, nowInMilliseconds);\n    });\n};\n\nexport function clearAutosavedDraftIfObsolete(e: { post: HTMLElement }) {\n    const result = draftIsObsolete(e.post);\n    if (isString(result)) {\n        return result;\n    } else if (result === true) {\n        log.log(`Deleting autosaved draft because the post seems to have been successfully submitted.`);\n        clearAutosavedDraft();\n    }\n}\n\nexport function clearAutosavedDraft() {\n    Storage.remove(CONFIG.KEY.autosaved_draft);\n}\n\nfunction enableWatchdog(textarea: HTMLTextAreaElement) {\n    // Save immediately, regularly and when page is unloaded:\n    saveDraft(textarea);\n    setInterval(() => saveDraft(textarea), ms.seconds(AUTOSAVE_INTERVAL_SECONDS));\n    window.addEventListener(\"beforeunload\", () => saveDraft(textarea));\n    if (Preferences.get(P.advanced._.prevent_accidental_unload)) {\n        // Assuming it works correctly, prevent accidental unload should be enough protection against misclicks.\n        // If the user has confirmed that they want to unload the page, we should consider their saved draft obsolete by virtue of that decision.\n        window.addEventListener(\"unload\", clearAutosavedDraft);\n    }\n}\n\nfunction saveDraft(textarea: HTMLTextAreaElement): void {\n    const text = textarea.value;\n    if (mayBeWorthSaving(text)) {\n        // Trim because SweClockers does:\n        const response = Storage.set(CONFIG.KEY.autosaved_draft, text.trim());\n        if (response.status === Storage.Status.STORAGE_ERROR) {\n            log.error(`Could not save draft.`);\n        }\n    } else {\n        clearAutosavedDraft();\n    }\n}\n\nfunction mayBeWorthSaving(text: string): boolean {\n    return text.length >= MIN_LENGTH_TO_SAVE && !isCleanSlate_reply(text);\n}\n\nfunction maybeOfferToRestoreAutosavedPost(textarea: HTMLTextAreaElement, toolbarInner: HTMLElement, undoSupport: boolean) {\n    const saved = Storage.get(CONFIG.KEY.autosaved_draft, \"\");\n    if (saved.status === Storage.Status.OK && textarea.value !== saved.value) {\n        // There is a saved draft that the user might want to restore.\n        const button = generalButton({\n            label: T.general.restore_draft_label,\n            tooltip: T.general.restore_draft_tooltip,\n            class: CONFIG.CLASS.button_restoreDraft,\n            action: (textarea, undoSupport) => {\n                const draftPreview = shortenedIfLongerThan(MAX_LENGTH_TO_SHOW, saved.value);\n                const question_restore = T.general.restore_draft_question + \"\\n\\n\" + draftPreview;\n                if (confirm(question_restore)) {\n                    // Avoid overwriting current textarea content in the absence of undo support:\n                    if (undoSupport || textarea.value === \"\" || confirm(T.general.restore_draft_confirm)) { // `confirm` is problematic in Chrome (see docs/dialogs.md), but Chrome has full undo support.\n                        textarea.select();\n                        insertIn(textarea, { string: saved.value, replace: true }); // Not replacing would be confusing. Firefox users are protected by the confirmation dialog above.\n                        removeRestoreButton();\n                    }\n                }\n            },\n        });\n        renderIn(toolbarInner, insertAtTheEnd, button(textarea, undoSupport));\n    }\n}\n\nfunction removeRestoreButton() {\n    // A bit ugly, but it does the trick.\n    const buttons = Array.from(document.getElementsByClassName(CONFIG.CLASS.button_restoreDraft));\n    for (const button of buttons) button.remove();\n}\n\nfunction draftIsObsolete(post: HTMLElement): boolean | string {\n    // Check if user came from any page at all:\n    if (document.referrer === \"\") return false;\n\n    // For subsequent checks, first check if authored by user:\n    if (!post.classList.contains(SITE.CLASS.forumPostByCurrentUser)) return false;\n\n    const referrerPath = new URL(document.referrer).pathname;\n    const nowInMilliseconds = Date.now();\n\n    // Check if user tried to submit a post just now:\n    const lastTimeUserTriedToSubmit = Storage.get_session(CONFIG.KEY.last_time_user_tried_to_submit, 0).value;\n    const attemptedSubmitJustNow = nowInMilliseconds < lastTimeUserTriedToSubmit + MAX_MILLISECONDS_TO_COUNT_AS_JUST_NOW;\n    if (attemptedSubmitJustNow) return true;\n\n    // Check if recently created:\n    const creationTimeInSeconds = getCreationTimeInSeconds(post);\n    if (creationTimeInSeconds === null) return couldNotDetermine(\"created\");\n    const postCreatedRecently = nowInMilliseconds < ms.seconds(creationTimeInSeconds) + MAX_MILLISECONDS_TO_COUNT_AS_RECENTLY;\n    const cameFromEditMode = SITE.PATH.EDIT_MODE_FORUM.test(referrerPath); // assuming user came from within SweClockers\n    if (cameFromEditMode && postCreatedRecently) return true;\n\n    // Was not recently created; check if just edited:\n    const matchPostID = post.id.match(/\\d{7,}/); // all post IDs back to at least 2002\n    if (matchPostID === null) return couldNotDetermine(\"edited\");\n    const postID = parseInt(matchPostID[0]);\n    const cameFromEditingThisPost = referrerPath === SITE.PATH.editPost(postID); // assuming user came from within SweClockers\n    const attemptedSubmitRecently = nowInMilliseconds < lastTimeUserTriedToSubmit + MAX_MILLISECONDS_TO_COUNT_AS_RECENTLY;\n    if (cameFromEditingThisPost && attemptedSubmitRecently) return true;\n\n    // As far as we can tell, any saved draft may still be relevant.\n    return false;\n}\n\nfunction couldNotDetermine(kind: \"created\" | \"edited\"): string {\n    return `Could not determine if post was just ${kind}.`;\n}\n\nfunction getCreationTimeInSeconds(post: HTMLElement): number /* UTC */ | null {\n    try {\n        const parseResult = JSON.parse(post.dataset.post || \"\").createTime;\n        return isNumber(parseResult) ? parseResult : null;\n    } catch (_) {\n        return null;\n    }\n}\n\n/*\n(4, \"abcd\")    => \"abcd\"\n(4, \"abcde\")   => \"ab\\n[]\\nde\"\n(5, \"abcde\")   => \"abcde\"\n(5, \"abcdef\")  => \"ab\\n[]\\ndef\"\n*/\nfunction shortenedIfLongerThan(max: number, s: string): string {\n    return (\n        s.length <= max\n            ? s\n            : s.substring(0, max/2) + \"\\n[]\\n\" + s.substring(s.length - max/2)\n    );\n}\n","export default \"<svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\">\\n    <path d=\\\"M28.75,25.75a1,1,0,0,0-1-.56A13.06,13.06,0,0,1,13.6,7.9,12.91,12.91,0,0,1,17,2.73,1,1,0,0,0,16.16,1a15.07,15.07,0,1,0,12.37,25.9A1,1,0,0,0,28.75,25.75Z\\\"/>\\n</svg>\\n\";","import { isString } from \"ts-type-guards\";\n\nimport { r } from \"~src/utilities\";\n\nexport function hideById(i: string): string {\n    return hideBySelector(\"#\" + i);\n}\n\nexport function hideByClass(c: string | readonly string[]): string {\n    return hideBySelector(isString(c) ? \".\"+c : c.map(x => \".\"+x).join(\", \"));\n}\n\nexport function hideBySelector(selector: string): string {\n    return (\n        r`\n${selector} {\n    display: none;\n}\n`\n    );\n}\n","export function timeIsWithin(interval: Readonly<{ start: number, end: number }>) {\n    return (time: Date): boolean => {\n        const t = timeOfDay(time);\n        const start = interval.start;\n        const end = interval.end;\n        return (\n            end < start\n                ? t >= start || t < end\n                : t >= start && t < end\n        );\n    };\n}\n\nfunction timeOfDay(date: Date): number {\n    const startOfToday = new Date();\n    startOfToday.setHours(0);\n    startOfToday.setMinutes(0);\n    startOfToday.setSeconds(0);\n    startOfToday.setMilliseconds(0);\n    return date.getTime() - startOfToday.getTime();\n}\n","import * as ms from \"milliseconds\";\nimport { ALWAYS } from \"userscripter/lib/environment\";\nimport { Stylesheets, stylesheet } from \"userscripter/lib/stylesheets\";\n\nimport * as CONFIG from \"~src/config\";\nimport { isInEditMode, isOnBSCPreferencesPage, isOnSweclockersSettingsPage, isReadingThread } from \"~src/environment\";\nimport STYLE_PROOFREADING from \"~src/lib/proofreading/style.scss\";\nimport { P, Preferences } from \"~src/preferences\";\nimport SELECTOR from \"~src/selectors\";\nimport * as SITE from \"~src/site\";\nimport { hideByClass, hideById, hideBySelector } from \"~src/stylesheets/hide\";\nimport { timeIsWithin } from \"~src/time\";\n\nimport autosaveDraft from \"./stylesheets/autosave-draft.scss\";\nimport darkThemeTogglePreparations from \"./stylesheets/dark-theme-toggle-preparations.scss\";\nimport darkThemeToggle from \"./stylesheets/dark-theme-toggle.scss\";\nimport developerMode from \"./stylesheets/developer-mode.scss\";\nimport doge from \"./stylesheets/doge.scss\";\nimport downForMaintenance from \"./stylesheets/down-for-maintenance.scss\";\nimport editingTools from \"./stylesheets/editing-tools.scss\";\nimport hideFooter from \"./stylesheets/hide-footer.scss\";\nimport highlightOwnPosts from \"./stylesheets/highlight-own-posts.scss\";\nimport improvedCorrections from \"./stylesheets/improved-corrections.scss\";\nimport improvedImageControls from \"./stylesheets/improved-image-controls.scss\";\nimport improvedPaginationButtons from \"./stylesheets/improved-pagination-buttons.scss\";\nimport lockHeights from \"./stylesheets/lock-heights.scss\";\nimport main from \"./stylesheets/main.scss\";\nimport mentionEveryone from \"./stylesheets/mention-everyone.scss\";\nimport preferencesLink from \"./stylesheets/preferences-link.scss\";\nimport preferencesShortcut from \"./stylesheets/preferences-shortcut.scss\";\nimport preferences from \"./stylesheets/preferences.scss\";\nimport replaceFollowedThreadsLink from \"./stylesheets/replace-followed-threads-link.scss\";\nimport textareaSizeToggle from \"./stylesheets/textarea-size-toggle.scss\";\nimport uninterestingSubforums from \"./stylesheets/uninteresting-subforums.scss\";\n\nfunction isTimeForMaintenance() {\n    const start = ms.hours(4) + ms.minutes(30);\n    const end   = ms.hours(5) + ms.minutes(10);\n    return timeIsWithin({ start, end })(new Date());\n}\n\nfunction i(x: string): string {\n    return CONFIG.PREFIX_ID + \"stylesheet-\" + x;\n}\n\nconst STYLESHEETS = {\n    main: stylesheet({\n        condition: ALWAYS,\n        css: main,\n    }),\n    developer_mode: stylesheet({\n        condition: () => Preferences.get(P.advanced._.developer_mode),\n        css: developerMode,\n    }),\n    dark_theme_toggle_preparations: stylesheet({\n        condition: () => Preferences.get(P.dark_theme._.show_toggle),\n        css: darkThemeTogglePreparations,\n        id: i(\"dark-theme-toggle-preparations\"),\n    }),\n    dark_theme_toggle: stylesheet({\n        condition: () => Preferences.get(P.dark_theme._.show_toggle),\n        css: darkThemeToggle,\n    }),\n    doge: stylesheet({\n        condition: ALWAYS,\n        css: doge,\n    }),\n    preferences_link: stylesheet({\n        condition: _ => isOnSweclockersSettingsPage,\n        css: preferencesLink,\n    }),\n    preferences: stylesheet({\n        condition: _ => isOnBSCPreferencesPage,\n        css: preferences,\n    }),\n    preferences_shortcut: stylesheet({\n        condition: () => Preferences.get(P.general._.insert_preferences_shortcut),\n        css: preferencesShortcut,\n    }),\n    lock_heights: stylesheet({\n        condition: () => Preferences.get(P.general._.lock_heights),\n        css: lockHeights,\n    }),\n    improved_pagination_buttons: stylesheet({\n        condition: () => Preferences.get(P.forum_threads._.improved_pagination_buttons),\n        css: improvedPaginationButtons,\n    }),\n    improved_corrections: stylesheet({\n        condition: () => Preferences.get(P.general._.improved_corrections),\n        css: improvedCorrections,\n    }),\n    highlight_own_posts: stylesheet({\n        condition: () => Preferences.get(P.forum_threads._.highlight_own_posts),\n        css: highlightOwnPosts,\n    }),\n    editing_tools: stylesheet({\n        condition: ALWAYS,\n        css: editingTools,\n    }),\n    textarea_size_toggle: stylesheet({\n        condition: ALWAYS,\n        css: textareaSizeToggle,\n    }),\n    monospace_font: stylesheet({\n        condition: () => isInEditMode && Preferences.get(P.edit_mode._.monospace_font),\n        css: `#${CONFIG.ID.document} ${SELECTOR.textarea} { font-family: monospace; }`,\n    }),\n    monospace_font_in_quick_reply_form: stylesheet({\n        condition: () => isReadingThread && Preferences.get(P.edit_mode._.monospace_font_in_quick_reply_form),\n        css: `#${CONFIG.ID.document} ${SELECTOR.textarea} { font-family: monospace; }`,\n    }),\n    textarea_size_toggle_textarea_height: stylesheet({\n        condition: () => isInEditMode && Preferences.get(P.edit_mode._.textarea_size_toggle),\n        css: `#${CONFIG.ID.document} ${SELECTOR.textarea} { height: ${Preferences.get(P.edit_mode._.textarea_size)}px; }`,\n    }),\n    autosave_draft: stylesheet({\n        condition: () => isInEditMode && Preferences.get(P.edit_mode._.autosave_draft),\n        css: autosaveDraft,\n    }),\n    improved_image_controls: stylesheet({\n        condition: () => Preferences.get(P.advanced._.improved_image_controls),\n        css: improvedImageControls,\n    }),\n    uninteresting_subforums: stylesheet({\n        condition: ALWAYS,\n        css: uninterestingSubforums,\n    }),\n    replace_followed_threads_link: stylesheet({\n        condition: () => Preferences.get(P.general._.replace_followed_threads_link),\n        css: replaceFollowedThreadsLink,\n    }),\n    proofread_forum_posts: stylesheet({\n        condition: () => isInEditMode && Preferences.get(P.advanced._.proofread_forum_posts),\n        css: STYLE_PROOFREADING,\n        id: i(\"proofread-forum-posts\"),\n    }),\n    down_for_maintenance: stylesheet({\n        condition: () => !isOnBSCPreferencesPage && isTimeForMaintenance() && Preferences.get(P.advanced._.down_for_maintenance),\n        css: downForMaintenance,\n    }),\n    custom_css: stylesheet({\n        condition: () => Preferences.get(P.advanced._.custom_css_enable),\n        css: Preferences.get(P.advanced._.custom_css_code),\n    }),\n    mention_everyone: stylesheet({\n        condition: () => Preferences.get(P.forum_threads._.mention_everyone_button),\n        css: mentionEveryone,\n    }),\n\n    // Customize content:\n    customize_content_carousel: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.carousel),\n        css: hideById(SITE.ID.carousel),\n    }),\n    customize_content_social_media: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.social_media),\n        css: hideByClass(SITE.CLASS.socialMediaButtons),\n    }),\n    customize_content_guides: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.guides),\n        css: hideBySelector(SELECTOR.sideColumnGuides),\n    }),\n    customize_content_popular_galleries: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.popular_galleries),\n        css: hideBySelector(SELECTOR.sideColumnPopularGalleries),\n    }),\n    customize_content_new_in_forum_side: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.new_in_forum_side),\n        css: hideById(SITE.ID.newInForumWidget_side),\n    }),\n    customize_content_new_in_market: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.new_in_market),\n        css: hideById(SITE.ID.newInMarketWidget),\n    }),\n    customize_content_new_in_test_lab: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.new_in_test_lab),\n        css: hideById(SITE.ID.newInTestLabWidget),\n    }),\n    customize_content_in_the_store: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.in_the_store),\n        css: hideById(SITE.ID.inTheStoreWidget),\n    }),\n    customize_content_popular_at_prisjakt: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.popular_at_prisjakt),\n        css: hideById(SITE.ID.popularAtPrisjaktWidget),\n    }),\n    customize_content_new_tech_jobs: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.new_tech_jobs),\n        css: hideById(SITE.ID.newTechJobsWidget),\n    }),\n    customize_content_external_news: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.external_news),\n        css: hideById(SITE.ID.externalNewsWidget),\n    }),\n    customize_content_more_articles: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.more_articles),\n        css: hideBySelector(SELECTOR.moreArticles),\n    }),\n    customize_content_latest_news: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.latest_news),\n        css: hideById(SITE.ID.latestNewsWidget),\n    }),\n    customize_content_new_in_forum_main: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.new_in_forum_main),\n        css: hideById(SITE.ID.newInForumWidget_main),\n    }),\n    customize_content_footer: stylesheet({\n        condition: () => false === Preferences.get(P.customize_content._.footer),\n        css: hideFooter,\n    }),\n} as const;\n\n// This trick uncovers type errors in STYLESHEETS while retaining the static knowledge of its properties (so we can still write e.g. STYLESHEETS.foo):\nconst _: Stylesheets = STYLESHEETS; void _;\n\nexport default STYLESHEETS;\n","import * as ms from \"milliseconds\";\nimport { h } from \"preact\";\nimport { isNull } from \"ts-type-guards\";\nimport { disable } from \"userscripter/lib/stylesheets\";\n\nimport * as CONFIG from \"~src/config\";\nimport * as darkTheme from \"~src/dark-theme\";\nimport iconDarkThemeToggle from \"~src/icons/dark-theme-toggle.svg\";\nimport { insertAfter, renderIn } from \"~src/operations/logic/render\";\nimport { P, Preferences } from \"~src/preferences\";\nimport STYLESHEETS from \"~src/stylesheets\";\nimport * as T from \"~src/text\";\nimport { timeIsWithin } from \"~src/time\";\nimport { withMaybe } from \"~src/utilities\";\n\nexport function insertToggle(e: {\n    menuLockToggle: HTMLElement,\n}) {\n    renderIn(e.menuLockToggle.parentElement as Element, insertAfter(e.menuLockToggle), (\n        // Derived from the menu lock toggle.\n        <li class=\"menu-lock menu-lock-active\">\n            <div\n                class=\"menu-lock-click\"\n                title={T.general.dark_theme_toggle_tooltip(darkTheme.AUTHOR)}\n                onClick={() => set(!Preferences.get(P.dark_theme._.active))}\n            />\n            <span class=\"menu-lock\">\n                <svg class=\"icon\" dangerouslySetInnerHTML={{ __html: iconDarkThemeToggle }} />\n            </span>\n        </li>\n    ));\n    disable(STYLESHEETS.dark_theme_toggle_preparations);\n}\n\nexport function manage(): void {\n    if (Preferences.get(P.dark_theme._.active)) {\n        apply(true);\n        moveToEndWhenHeadAppears(); // Because we insert the dark theme stylesheet as early as physically possible (to avoid a bright flash on page load; see issue #62), SweClockers' own styles will be inserted _after_ it in the DOM tree and take precedence over it, which we can't expect it to be designed for. Therefore, we move it as soon as we can.\n    }\n    if (Preferences.get(P.dark_theme._.auto)) {\n        sheldon();\n        setInterval(sheldon, ms.seconds(Preferences.get(P.dark_theme._.interval)));\n    }\n}\n\nfunction moveToEndWhenHeadAppears() {\n    new MutationObserver((mutations, observer) => {\n        for (const mutation of mutations) {\n            if (mutation.type === \"childList\" && mutation.target === document.documentElement) {\n                for (const node of mutation.addedNodes) {\n                    if (node === document.head) {\n                        observer.disconnect();\n                        withMaybe(document.getElementById(CONFIG.ID.darkThemeStylesheet), element => document.documentElement.appendChild(element));\n                    }\n                }\n            }\n        }\n    }).observe(document.documentElement, {\n        attributes: false,\n        childList: true,\n        subtree: false,\n    });\n}\n\nfunction apply(newState: boolean): void {\n    const url = withCacheInvalidation(darkTheme.URL.stylesheet, new Date());\n    if (newState) {\n        if (isNull(document.getElementById(CONFIG.ID.darkThemeStylesheet))) {\n            // Not document.head because it can be null, e.g. in a background tab in Firefox:\n            const link = document.createElement(\"link\");\n            link.rel = \"stylesheet\";\n            link.href = url;\n            link.id = CONFIG.ID.darkThemeStylesheet;\n            document.documentElement.appendChild(link);\n        }\n    } else {\n        withMaybe(document.getElementById(CONFIG.ID.darkThemeStylesheet), element => element.remove());\n    }\n}\n\nfunction set(newState: boolean): void {\n    Preferences.set(P.dark_theme._.active, newState);\n    apply(newState);\n}\n\nfunction sheldon(): void {\n    // Sheldon cannot do the same thing twice in a row, because the user must be able to override him.\n    const whatSheldonWants = timeIsWithin({\n        start: Preferences.get(P.dark_theme._.time_on),\n        end: Preferences.get(P.dark_theme._.time_off),\n    })(new Date());\n    const whatSheldonDidLast = Preferences.get(P.dark_theme._.last_autoset_state);\n    if (whatSheldonWants !== whatSheldonDidLast) {\n        Preferences.set(P.dark_theme._.last_autoset_state, whatSheldonWants);\n        set(whatSheldonWants);\n    }\n    // If the dark theme was toggled (auto or not) in another tab, Sheldon must toggle it here as well:\n    apply(Preferences.get(P.dark_theme._.active));\n}\n\nfunction withCacheInvalidation(url: string, date: Date): string {\n    const yyyy = date.getFullYear();\n    const mm = (date.getMonth() + 1 /* 0-indexed */).toString().padStart(2, \"0\");\n    const dd = date.getDate().toString().padStart(2, \"0\");\n    return `${url}?v=${yyyy}${mm}${dd}`;\n}\n","import * as Storage from \"ts-storage\";\n\nimport * as CONFIG from \"~src/config\";\nimport * as T from \"~src/text\";\n\nexport default (e: {\n    saveButton: HTMLElement,\n    previewButton: HTMLElement,\n}) => {\n    const saveButton = e.saveButton as HTMLButtonElement; // Selector should ensure this.\n    const checkbox = document.createElement(\"input\");\n    checkbox.type = \"checkbox\";\n    const label = document.createElement(\"label\");\n    label.classList.add(CONFIG.CLASS.checkbox);\n    label.title = T.general.draft_mode_toggle_tooltip;\n    label.appendChild(checkbox);\n    const text = document.createTextNode(T.general.draft_mode_toggle_label);\n    label.appendChild(text);\n    const response = Storage.get_session(CONFIG.KEY.draft_mode, false);\n    if (![ Storage.Status.ABSENT, Storage.Status.OK ].includes(response.status)) {\n        return `Could not read draft mode state (error type: ${response.status}).`;\n    }\n    const draftModeEnabled = response.value;\n    checkbox.checked = draftModeEnabled;\n    checkbox.addEventListener(\"change\", toggle(checkbox, saveButton));\n    (e.previewButton).insertAdjacentElement(\"afterend\", label);\n    apply(draftModeEnabled, saveButton);\n};\n\nfunction toggle(checkbox: HTMLInputElement, saveButton: HTMLButtonElement): EventHandlerNonNull {\n    return _ => {\n        const draftModeEnabled = checkbox.checked;\n        Storage.set_session(CONFIG.KEY.draft_mode, draftModeEnabled);\n        apply(draftModeEnabled, saveButton);\n    };\n}\n\nfunction apply(draftModeEnabled: boolean, saveButton: HTMLButtonElement): void {\n    saveButton.disabled = draftModeEnabled;\n    saveButton.title = draftModeEnabled ? T.general.draft_mode_enabled_tooltip : \"\";\n}\n","import { compose } from \"@typed/compose\";\nimport classNames from \"classnames\";\nimport { h, JSX } from \"preact\";\n\nimport * as CONFIG from \"~src/config\";\nimport { insertAfter, insertBefore, renderIn } from \"~src/operations/logic/render\";\nimport { P, Preferences } from \"~src/preferences\";\nimport { Position } from \"~src/preferences/editing-tools\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nimport { BUTTON, BUTTONS, Button, COLORS, colorButton, insertButton, smileyButton, tagButton } from \"./logic/editing-tools\";\nimport { SMILEYS } from \"./logic/smileys\";\n\nexport default (undoSupport: boolean) => (e: { textarea: HTMLElement }) => {\n    const textarea = e.textarea;\n    const position = Preferences.get(P.editing_tools._.position);\n    const insertBeforeOrAfter = position === Position.ABOVE ? insertBefore : insertAfter;\n    const textareaParent = textarea.parentElement as HTMLElement;\n    renderIn(textareaParent, insertBeforeOrAfter(textarea), (\n        <EditingTools textarea={textarea as HTMLTextAreaElement} config={getEditingToolsConfig()} undoSupport={undoSupport} />\n    ));\n};\n\ninterface EditingToolsConfig {\n    special_characters: boolean\n    meta: boolean\n    code: boolean\n    math: boolean\n    whitespace: boolean\n    definitions: boolean\n    embed: boolean\n    doge: boolean\n    color_palette: boolean\n    smileys: boolean\n}\n\n// Needs to be a function because it's used \"live\" in the preferences menu:\nexport function getEditingToolsConfig(): EditingToolsConfig {\n    return {\n        special_characters: Preferences.get(P.editing_tools._.special_characters),\n        meta: Preferences.get(P.editing_tools._.meta),\n        code: Preferences.get(P.editing_tools._.code),\n        math: Preferences.get(P.editing_tools._.math),\n        whitespace: Preferences.get(P.editing_tools._.whitespace),\n        definitions: Preferences.get(P.editing_tools._.definitions),\n        embed: Preferences.get(P.editing_tools._.embed),\n        doge: Preferences.get(P.editing_tools._.doge),\n        color_palette: Preferences.get(P.editing_tools._.color_palette),\n        smileys: Preferences.get(P.editing_tools._.smileys),\n    } as const;\n}\n\nexport function EditingTools(props: {\n    textarea: HTMLTextAreaElement,\n    disabled?: boolean,\n    config: EditingToolsConfig,\n    undoSupport: boolean,\n}): JSX.Element {\n    // A \"connected\" button has been connected to the textarea.\n    const connected = (b: Button) => b(props.textarea, props.undoSupport);\n    const connectedTagButton = compose(connected, tagButton);\n    const connectedInsertButton = compose(connected, insertButton);\n    const connectedColorButton = compose(connected, colorButton);\n    const connectedSmileyButton = compose(connected, smileyButton);\n    return (\n        <div id={CONFIG.ID.editingTools} class={classNames(\n            CONFIG.CLASS.editingTools,\n            { [CONFIG.CLASS.disabled]: props.disabled },\n            SITE.CLASS.bbcode, // so we can easily mimic forum post styles in our buttons\n        )}>\n            {props.config.special_characters ? (\n                <fieldset>\n                    {T.special_characters.map(connectedInsertButton)}\n                </fieldset>\n            ) : null}\n            {connectedTagButton({ tag: SITE.TAG.size, label: T.editing_tools.size_label, tooltip: T.editing_tools.size_tooltip, parameterized: true })}\n            {connectedTagButton({ tag: SITE.TAG.color, parameterized: true, tooltip: T.editing_tools.color_tooltip, class: CONFIG.CLASS.button_color })}\n            {connectedTagButton({ tag: SITE.TAG.font, tooltip: T.editing_tools.font_tooltip, parameterized: true })}\n            {connectedTagButton({ tag: SITE.TAG.mark, label: T.editing_tools.mark_label, tooltip: T.editing_tools.mark_tooltip })}\n            {connectedTagButton({ tag: SITE.TAG.abbr, label: T.editing_tools.abbr_label, parameterized: true, tooltip: T.editing_tools.abbr_tooltip })}\n            {connected(BUTTON.quote)}\n            {connected(BUTTON.splitQuote)}\n            {connectedTagButton({ tag: SITE.TAG.bq, label: \"\", tooltip: T.editing_tools.bq_tooltip, block: true, icon: { type: \"RAW\", image: CONFIG.ICONS.BLOCKQUOTE }, class: CONFIG.CLASS.button_blockquote })}\n            {connected(BUTTON.expander)}\n            {connectedTagButton({ tag: SITE.TAG.spoiler, tooltip: T.editing_tools.spoiler_tooltip, block: true, class: CONFIG.CLASS.button_spoiler })}\n            {connectedInsertButton({ insert: CONFIG.CONTENT.edit, tooltip: T.editing_tools.edit_tooltip, label: T.editing_tools.edit_label })}\n            {props.config.meta ? BUTTONS.meta.map(connected) : []}\n            {props.config.code ? BUTTONS.code.map(connected) : []}\n            {props.config.math ? BUTTONS.math.map(connected) : []}\n            {props.config.whitespace ? BUTTONS.whitespace.map(connected) : []}\n            {props.config.definitions ? BUTTONS.definitions.map(connected) : []}\n            {props.config.embed ? BUTTONS.embed(Preferences.get(P.editing_tools._.search_engine)).map(connected) : []}\n            {props.config.doge ? BUTTONS.doge.map(connected) : []}\n            {props.config.color_palette ? (\n                <fieldset class={CONFIG.CLASS.colorPalette}>\n                    {COLORS.map(connectedColorButton)}\n                </fieldset>\n            ) : null}\n            {props.config.smileys ? (\n                <fieldset class={CONFIG.CLASS.smileys}>\n                    {SMILEYS.map(connectedSmileyButton)}\n                </fieldset>\n            ) : null}\n        </div>\n    );\n}\n","import { insertAtTheEnd, renderIn } from \"~src/operations/logic/render\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nimport { toolbarButton } from \"./logic/editing-tools\";\nimport { wrap_tag } from \"./logic/textarea\";\n\nexport default (undoSupport: boolean) => (e: {\n    textarea: HTMLElement,\n    strikeButton: HTMLElement,\n}) => {\n    const parent = e.strikeButton.parentElement as Element;\n    renderIn(parent, insertAtTheEnd, (\n        headingToolbarButton(e.textarea as HTMLTextAreaElement, undoSupport)\n    ));\n};\n\nconst headingToolbarButton = toolbarButton({\n    action: wrap_tag({ tag: SITE.TAG.h, parameterized: false, block: false }),\n    class: SITE.CLASS.toolbarHeadingButton,\n    tooltip: T.general.tooltip_h,\n    style: \"background: none;\", // to override gray background for .header\n});\n","import * as BB from \"bbcode-tags\";\nimport { lines, unlines } from \"lines-unlines\";\nimport { is } from \"ts-type-guards\";\nimport { log } from \"userscripter\";\n\nimport { insertIn, selectRangeIn, selectedTextIn } from \"~src/operations/logic/textarea\";\nimport SELECTOR from \"~src/selectors\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\ndeclare namespace Beta { const Forms: any; }\ndeclare namespace Taiga { const Strings: any; }\n\nexport default (undoSupport: boolean) => () => {\n    /*\n    This operation must run \"early\" (before DOMContentLoaded), because otherwise it can't override the default action for the URL button.\n    However, it should not run _too_ early, because it fails if SweClockers' script hasn't yet defined Beta.\n\n    I haven't managed to make this operation work at all in Firefox; the default action is just not overridden.\n    */\n    try { // If SweClockers change their \"API\", we want to fail gracefully.\n        Beta.Forms.Toolbar.Buttons.HyperlinkButton.prototype.insertTemplate = () => {\n            const textarea = document.querySelector(SELECTOR.textarea);\n            if (!is(HTMLTextAreaElement)(textarea)) {\n                log.error(`Could not find textarea.`);\n                return;\n            }\n            const selectedText = selectedTextIn(textarea);\n            const selectedLines = lines(selectedText);\n            if (selectedLines.length > 1) {\n                // Multiline mode (closely resembling SweClockers' native behavior).\n                let n: false | number; // Lets us short-circuit with undo support.\n                if (undoSupport || (n = confirmationNeeded(selectedLines), n === false) || confirm(T.general.generic_lines_confirm(n))) {\n                    const formattedLines = selectedLines.map(line => (\n                        Taiga.Strings.sprintf(\n                            BB.start(SITE.TAG.url) + \"%s\" + BB.end(SITE.TAG.url),\n                            Taiga.Strings.trim(line),\n                        )\n                    ));\n                    insertIn(textarea, {\n                        string: unlines(formattedLines),\n                        replace: true,\n                    });\n                }\n            } else {\n                const suggestedLinkUrl = isUrlLike(selectedText) ? selectedText : \"\"; // Same behavior as SweClockers.\n                const suggestedLinkText = selectedText;\n                const providedLinkUrl = prompt(T.general.improved_url_button_url, suggestedLinkUrl);\n                if (providedLinkUrl === null) {\n                    return; // Canceling altogether if the user cancels the prompt feels intuitive.\n                }\n                const providedLinkText = prompt(T.general.improved_url_button_text, suggestedLinkText);\n                if (providedLinkText === null) {\n                    return; // Canceling altogether if the user cancels the prompt feels intuitive.\n                }\n                const finalLinkUrl = providedLinkUrl;\n                const finalLinkText = providedLinkText === \"\" ? finalLinkUrl : providedLinkText;\n                const selectionStart = textarea.selectionStart; // Must be calculated before any modification is made.\n                const startTag = BB.start(SITE.TAG.url, finalLinkUrl);\n                // We _could_ just wrap if the final link text equals the selectedText text, but AFAICT it wouldn't give us any benefits versus inserting and then selecting.\n                insertIn(textarea, {\n                    string: startTag + finalLinkText + BB.end(SITE.TAG.url),\n                    replace: true, // Risk of accidental deletion is low because the user is given two prompts before anything is modified in the textarea.\n                });\n                const newSelectionStart = selectionStart + startTag.length;\n                const newSelectionEnd = newSelectionStart + finalLinkText.length;\n                selectRangeIn(textarea, newSelectionStart, newSelectionEnd);\n            }\n        };\n    } catch (err) {\n        return err.toString(); // String conversion is necessary for the error to be handled properly by Userscripter.\n    }\n};\n\n// A heuristic intended to catch cases when the user likely didn't mean to format links and/or it would be cumbersome to restore the change without undo support.\nfunction confirmationNeeded(selectedLines: readonly string[]): false | number {\n    return (\n        selectedLines.length > 5 && !selectedLines.every(isUrlLike)\n            ? selectedLines.length\n            : false\n    );\n}\n\nfunction isUrlLike(s: string): boolean {\n    // The regex is copied from SweClockers.\n    return /^([a-z]+:\\/\\/|www\\.)/i.test(s);\n}\n","import * as SITE from \"~src/site\";\nimport { withMaybe } from \"~src/utilities\";\n\nexport default (e: { correctionsLink: HTMLElement }) => {\n    e.correctionsLink.addEventListener(\"click\", event => {\n        withMaybe(document.querySelector(\".\" + SITE.CLASS.proofDialog), proofDialog => {\n            event.stopImmediatePropagation();\n            const textarea = proofDialog.querySelector(\"textarea\");\n            if (textarea instanceof HTMLElement) {\n                textarea.focus();\n            }\n        });\n    }, true);\n};\n","import SELECTOR from \"~src/selectors\";\nimport * as SITE from \"~src/site\";\nimport { withMaybe } from \"~src/utilities\";\n\n// mousedown because it must be guaranteed to fire before beforeunload:\nexport const BUTTON_CLICK_EVENT = \"mousedown\";\n\n// I prefer this to fiddling with event listeners:\nlet shouldPreventUnload = false;\n\nexport function postOrMessage(e: {\n    textarea: HTMLElement,\n    _actionButtons: HTMLElement, // because we want to extract them using document.querySelectorAll\n}) {\n    // We need to prevent unload if the user has modified the content of the\n    // textarea or if they came here by clicking the preview button.\n    window.addEventListener(\"beforeunload\", handleBeforeUnload);\n    const textarea = e.textarea as HTMLTextAreaElement;\n    const changeListener = () => {\n        enableListener();\n        textarea.removeEventListener(\"input\", changeListener);\n    };\n    textarea.addEventListener(\"input\", changeListener);\n    for (const button of document.querySelectorAll(SELECTOR.actionButtons)) {\n        button.addEventListener(BUTTON_CLICK_EVENT, disableListener);\n    }\n    // If a post preview exists, then the user came here by previewing, so there\n    // is information to be lost even before they have touched the textarea:\n    withMaybe(document.getElementById(SITE.ID.postPreview), enableListener);\n}\n\nexport function corrections() {\n    // This function cannot take the corrections textarea as part of its `e`\n    // parameter, because said textarea does not exist until user requests it.\n    // We will prevent unload if the textarea exists and has some content; that\n    // should be good enough.\n    window.addEventListener(\"beforeunload\", event => {\n        const textarea = document.querySelector(`.${SITE.CLASS.proofDialog} textarea`) as HTMLTextAreaElement | null;\n        // If the correction has been submitted, the textarea is not visible\n        // anymore because one of its ancestors has display: none, in which case\n        // textarea.offsetParent === null.\n        if (textarea !== null && textarea.value !== \"\" && textarea.offsetParent !== null) {\n            preventUnload(event);\n        }\n    });\n}\n\nfunction handleBeforeUnload(event: Event) {\n    if (shouldPreventUnload) preventUnload(event);\n}\n\nfunction preventUnload(event: Event) {\n    event.preventDefault();\n    return event.returnValue = true;\n}\n\nfunction enableListener() {\n    shouldPreventUnload = true;\n}\n\nfunction disableListener() {\n    shouldPreventUnload = false;\n}\n","import { BUTTON_CLICK_EVENT } from \"~src/operations/prevent-accidental-unload\";\n\nexport function clickOn(element: HTMLElement): void {\n    // Prevent accidental unload listens for these events:\n    element.dispatchEvent(new Event(BUTTON_CLICK_EVENT));\n    // click() is necessary for the button to be triggered; dispatching\n    // mousedown and then mouseup is not.\n    element.click();\n}\n","import * as Mousetrap from \"mousetrap\";\n\nimport { Action } from \"~src/actions\";\nimport { clickOn } from \"~src/operations/logic/click\";\nimport { P, Preferences } from \"~src/preferences\";\nimport * as SITE from \"~src/site\";\n\nimport { insertIn, wrap_tag } from \"../logic/textarea\";\n\nconst keyboardShortcuts = Preferences.get(P.keyboard);\n\nexport function submit(e: {\n    textarea: HTMLElement,\n    saveButton: HTMLElement,\n}) {\n    bindKeyboardShortcut(\n        Action.SUBMIT,\n        _ => clickOn(e.saveButton),\n        { preventDefault: true },\n    );\n}\n\nexport function preview(e: {\n    textarea: HTMLElement,\n    previewButton: HTMLElement,\n}) {\n    bindKeyboardShortcut(\n        Action.PREVIEW,\n        _ => clickOn(e.previewButton),\n        { preventDefault: true },\n    );\n}\n\nexport const insertLink = (undoSupport: boolean) => (e: {\n    textarea: HTMLElement,\n}) => {\n    bindKeyboardShortcut(\n        Action.INSERT_LINK,\n        _ => wrap_tag({ tag: SITE.TAG.url, parameterized: true, block: false })(e.textarea as HTMLTextAreaElement, undoSupport),\n        { preventDefault: true },\n    );\n};\n\nexport const insertTab = (content: string, undoSupport: boolean) => (e: {\n    textarea: HTMLElement,\n}) => {\n    bindKeyboardShortcut(\n        Action.INSERT_TAB,\n        event => {\n            if (document.activeElement === e.textarea) {\n                event.preventDefault();\n                insertIn(e.textarea as HTMLTextAreaElement, { string: content, replace: undoSupport });\n            }\n        },\n        { preventDefault: false },\n    );\n};\n\nfunction bindKeyboardShortcut(\n    action: Action,\n    handler: (event: Event) => void,\n    options: {\n        preventDefault: boolean,\n    },\n) {\n    for (const entry of keyboardShortcuts) {\n        if (entry.action === action) {\n            Mousetrap.bind(entry.shortcut, event => {\n                if (options.preventDefault) {\n                    event.preventDefault();\n                }\n                handler(event);\n            });\n        }\n    }\n}\n","import { h } from \"preact\";\n\nimport { insertAtTheEnd, renderIn } from \"~src/operations/logic/render\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nexport default (e: { parent: HTMLElement }) => {\n    renderIn(e.parent, insertAtTheEnd, (\n        <a href=\"javascript:window.scrollTo(0, 0)\" title={T.general.link_to_top_tooltip}>\n            <svg class={SITE.CLASS.icon} style=\"transform: rotate(-90deg);\">\n                <use xlinkHref=\"/gfx/iconmap.svg?v=20221125#icon_double_arrow_right\" />\n            </svg>\n        </a>\n    ));\n};\n","import unique from \"array-uniq\";\nimport { h, JSX } from \"preact\";\n\nimport * as CONFIG from \"~src/config\";\nimport { mention } from \"~src/operations/edit-mode\";\nimport { insertBefore, renderIn } from \"~src/operations/logic/render\";\nimport  SELECTOR from \"~src/selectors\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nexport default (e: {\n    forumPostContainer: HTMLElement,\n    quickReplyForm: HTMLElement,\n    replyButton: HTMLElement,\n}) => {\n    const button = mentionEveryoneButton({\n        message: usersToMention(e.forumPostContainer).map(mention).join(\" \"),\n        replyURL: (e.quickReplyForm as HTMLFormElement).getAttribute(\"action\") || \"\",\n        csrf: session.getCsrfToken(),\n    });\n    if (document.querySelector(`${SELECTOR.forumPost} ${SELECTOR.forumPostAuthorLink}`) === null) {\n        // Broken thread participant detection.\n        return \"Could not detect thread participants\";\n    }\n    renderIn(e.replyButton.parentElement as Element, insertBefore(e.replyButton), button);\n};\n\nfunction usersToMention(forumPostContainer: HTMLElement): string[] {\n    const postBySomeoneElse = SELECTOR.forumPost + `:not(.${SITE.CLASS.forumPostByCurrentUser})`;\n    const selector = `${postBySomeoneElse} ${SELECTOR.forumPostAuthorLink}`;\n    const nameLinks = Array.from(forumPostContainer.querySelectorAll(selector));\n    return unique(nameLinks.map(e => (e.textContent as string).trim()));\n}\n\nfunction mentionEveryoneButton(props: {\n    message: string,\n    replyURL: string,\n    csrf: string,\n}): JSX.Element {\n    return (\n        <form method=\"POST\" action={props.replyURL} class={CONFIG.CLASS.mentionEveryoneButton}>\n            <input name={SITE.FORM.name.message} type=\"hidden\" value={props.message} />\n            <input name={SITE.FORM.name.csrfToken} type=\"hidden\" value={props.csrf} />\n            <input name={SITE.FORM.name.action} type=\"hidden\" value={SITE.FORM.value.preview} />\n            <button\n                type=\"submit\"\n                class={SITE.CLASS.button}\n                title={T.general.mention_everyone_tooltip}\n            >\n                {T.general.mention_everyone_label}\n            </button>\n        </form>\n    );\n}\n\ndeclare namespace session {\n    function getCsrfToken(): string\n}\n","import { isBoolean, isNumber, isString, isSymbol, isNull, isUndefined, isPrimitive, isNonPrimitive, is, isLike } from \"./is\";\nexport function onlyBooleans(xs) {\n    return xs.filter(isBoolean);\n}\nexport function onlyNumbers(xs) {\n    return xs.filter(isNumber);\n}\nexport function onlyStrings(xs) {\n    return xs.filter(isString);\n}\nexport function onlySymbols(xs) {\n    return xs.filter(isSymbol);\n}\nexport function onlyNulls(xs) {\n    return xs.filter(isNull);\n}\nexport function onlyUndefineds(xs) {\n    return xs.filter(isUndefined);\n}\nexport function onlyPrimitives(xs) {\n    return xs.filter(isPrimitive);\n}\nexport function onlyObjects(xs) {\n    return xs.filter(isNonPrimitive);\n}\nexport function only(type) {\n    return (xs) => xs.filter(is(type));\n}\nexport function onlyLike(reference) {\n    return (xs) => xs.filter(isLike(reference));\n}\n//# sourceMappingURL=only.js.map","import * as BB from \"bbcode-tags\";\nimport { Fragment, h } from \"preact\";\nimport { isString, only } from \"ts-type-guards\";\nimport { log } from \"userscripter\";\n\nimport * as CONFIG from \"~src/config\";\nimport ICON from \"~src/icons/pm.svg\";\nimport { insertAtTheEnd, renderIn } from \"~src/operations/logic/render\";\nimport SELECTOR from \"~src/selectors\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\nimport { r } from \"~src/utilities\";\n\nexport default () => {\n    const forumPosts = document.getElementsByClassName(SITE.CLASS.forumPost);\n    const ourUserID = SITE.getUserID();\n    if (ourUserID === undefined) {\n        return couldNotExtract(\"current user's ID\");\n    }\n    const threadTitle = document.querySelector(SELECTOR.threadTitle)?.textContent;\n    if (!isString(threadTitle)) {\n        return couldNotExtract(\"thread title\");\n    }\n    for (const post of only(HTMLElement)(Array.from(forumPosts))) {\n        try {\n            const profileDetails = post.querySelector(\".\" + SITE.CLASS.forumPostProfileDetails);\n            const quoteButton = post.querySelector<HTMLAnchorElement>(SELECTOR.quoteButton);\n            const authorName = post.querySelector(SELECTOR.forumPostAuthorLink)?.textContent;\n            if (!isString(authorName)) return couldNotExtractFromPost(\"author name\", post.id);\n            if (profileDetails === null) return couldNotExtractFromPost(\"profile details\", post.id);\n            if (quoteButton === null) return couldNotExtractFromPost(\"quote button\", post.id);\n            renderIn(profileDetails, insertAtTheEnd, (\n                <button\n                    dangerouslySetInnerHTML={{__html: ICON + T.general.pm_link_label}}\n                    onClick={() => {\n                        fetch(quoteButton.href, { credentials: \"same-origin\" }) // https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters\n                            .then(response => response.text())\n                            .then(responseContent => {\n                                const responseDocument = new DOMParser().parseFromString(responseContent, \"text/html\");\n                                const quoteTextarea = responseDocument.querySelector(\"textarea\");\n                                if (quoteTextarea === null) {\n                                    throw couldNotExtract(\"textarea from fetch response\");\n                                }\n                                const form = document.createElement(\"form\");\n                                form.hidden = true;\n                                form.method = \"post\";\n                                form.action = SITE.PATH.newPrivateMessage(ourUserID);\n                                renderIn(form, insertAtTheEnd, (\n                                    <>\n                                        <input name={SITE.FORM.name.recipients} value={authorName} />\n                                        <input name={SITE.FORM.name.title} value={threadTitle} />\n                                        <input name={SITE.FORM.name.csrfToken} value={session.getCsrfToken()} />\n                                        <input name={SITE.FORM.name.action} value=\"doPreview\" />\n                                        <textarea name={SITE.FORM.name.message}>\n                                            {withLinksInsteadOfPostIDs(quoteTextarea.textContent || \"\")}\n                                        </textarea>\n                                    </>\n                                ));\n                                profileDetails.appendChild(form); // Otherwise: \"Form submission canceled because the form is not connected\"\n                                form.submit();\n                            })\n                            .catch(log.error);\n                    }}\n                    class={[ SITE.CLASS.button, CONFIG.CLASS.iconButton, CONFIG.CLASS.pmButton ].join(\" \")}\n                ></button>\n            ));\n        } catch (err) {\n            return err;\n        }\n    }\n};\n\n/*\nThe generated quote BBCode, when used in a PM, creates a link to a PM, but we want to link to a forum post.\nSo we need to transform\n\n    [quote postid=\"123456\" ...]\n    Message\n    [/quote]\n\ninto\n\n    [quote ...]\n    Message\n\n    [url=\"/forum/post/123456\"]G till inlgget[/url]\n    [/quote]\n\nNote that the input may contain multiple quotes.\n*/\nconst REGEX_GENERATED_QUOTE = new RegExp([\n    // NB: The capture groups here are used below to assemble the adjusted BBCode.\n    r`^(\\[${SITE.TAG.quote}) postid=\"(\\d+)\"( userid=\"\\d+\" name=\"[^\"]+\"\\])$`, // start tag\n    r`([\\s\\S]*?)`, // message (\"?\" to stop at [/quote])\n    r`^(\\[/${SITE.TAG.quote}\\])$`, // end tag\n].join(\"\"), \"gm\"); // \"s\" didn't work for me to match newlines using \".\".\n\nfunction withLinksInsteadOfPostIDs(raw: string): string {\n    return raw.replace(REGEX_GENERATED_QUOTE, [\n        \"$1$3\", // start tag\n        \"$4\", // message\n        \"\\n\" + linkToForumPost(\"$2\") + \"\\n\",\n        \"$5\", // end tag\n    ].join(\"\"));\n}\n\nfunction linkToForumPost(id: string): string {\n    return [\n        BB.start(SITE.TAG.url, SITE.PATH.forumPost(id)),\n        BB.start(SITE.TAG.b),\n        T.general.go_to_post,\n        BB.end(SITE.TAG.b),\n        BB.end(SITE.TAG.url),\n    ].join(\"\");\n}\n\nfunction couldNotExtract(what: string): string {\n    return `Could not extract ${what}.`;\n}\n\nfunction couldNotExtractFromPost(what: string, htmlId: string): string {\n    return couldNotExtract(`${what} from post with id=\"${htmlId}\"`);\n}\n\ndeclare namespace session {\n    function getCsrfToken(): string\n}\n","import { NumericPreference } from \"./NumericPreference\";\r\nexport class DoublePreference extends NumericPreference {\r\n    getClassName() { return \"DoublePreference\"; }\r\n    static parse(s) {\r\n        const parsed = parseFloat(s);\r\n        return (Number.isNaN(parsed)\r\n            ? `\"${s}\" is not a number.`\r\n            : { value: parsed });\r\n    }\r\n    fromString(s) {\r\n        return NumericPreference.postParse(this, DoublePreference.parse(s));\r\n    }\r\n}\r\n//# sourceMappingURL=DoublePreference.js.map","import { DoublePreference } from \"./DoublePreference\";\r\nimport { NumericPreference } from \"./NumericPreference\";\r\nimport { RangePreference } from \"./RangePreference\";\r\nexport class DoubleRangePreference extends RangePreference {\r\n    getClassName() { return \"DoubleRangePreference\"; }\r\n    fromString(s) {\r\n        return NumericPreference.postParse(this, DoublePreference.parse(s));\r\n    }\r\n}\r\n//# sourceMappingURL=DoubleRangePreference.js.map","import classNames from \"classnames\";\nimport { Component, JSX, h } from \"preact\";\nimport {\n    AllowedTypes,\n    BooleanPreference,\n    DoublePreference,\n    DoubleRangePreference,\n    FromString,\n    IntegerPreference,\n    IntegerRangePreference,\n    ListPreference,\n    MultichoicePreference,\n    Preference,\n    PreferenceGroup,\n    PreferencesObject,\n    StringPreference,\n} from \"ts-preferences\";\nimport { is, isNull, isString, only } from \"ts-type-guards\";\nimport { log } from \"userscripter\";\n\nimport * as CONFIG from \"~src/config\";\nimport { EditingTools, getEditingToolsConfig } from \"~src/operations/editing-tools\";\nimport { P, Preferences, responseHandler } from \"~src/preferences\";\nimport { TimePreference } from \"~src/preferences/TimePreference\";\nimport SELECTOR from \"~src/selectors\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nconst PID = <T extends AllowedTypes>(p: Preference<T>) => CONFIG.ID.preferenceIdPrefix + p.key;\n\ntype GeneratorOutput = JSX.Element | readonly JSX.Element[]\n\nconst RANGE_MAX_STEP = 0.1;\nconst RANGE_MIN_NUMBER_OF_STEPS = 100;\n\nexport const GENERATORS = {\n    Boolean: Generator_Boolean,\n    String: Generator_String,\n    Integer: Generator_Integer,\n    Double: Generator_Double,\n    Time: Generator_Time,\n    IntegerRange: Generator_IntegerRange,\n    DoubleRange: Generator_DoubleRange,\n    Multichoice: Generator_Multichoice,\n} as const;\n\ntype Generators = typeof GENERATORS;\n\nfunction fromStringEventHandler<\n    E extends HTMLElement & { value: string },\n    T extends AllowedTypes,\n    P extends Preference<T> & FromString<T>,\n>(p: P): EventHandlerNonNull {\n    return (e: Event) => {\n        const parsed = p.fromString((e.target as E).value);\n        if (isString(parsed)) {\n            log.warning(parsed);\n        } else {\n            Preferences.set(p, parsed.value);\n        }\n    };\n}\n\nexport class PreferencesForm extends Component {\n    public render() {\n        return (\n            <form id={CONFIG.USERSCRIPT_ID}>\n                <header>\n                    <a href={document.referrer || \"/\"} title={T.preferences._.back_to_sweclockers}>\n                        <img src={CONFIG.URL_LOGO} alt={CONFIG.USERSCRIPT_NAME} />\n                    </a>\n                </header>\n                {Entries(GENERATORS, P)}\n                <footer>\n                    <p>{T.preferences._.save_notice}</p>\n                    <p>\n                        <a href={document.referrer || \"/\"} title={T.preferences._.back_to_sweclockers}>\n                            {T.preferences._.back_to_sweclockers}\n                        </a>\n                    </p>\n                </footer>\n            </form>\n        );\n    }\n\n    public componentDidMount() {\n        // The listener can't be a method, because then `this` is undefined in it.\n        responseHandler.subscribe(() => {\n            this.forceUpdate();\n        });\n    }\n}\n\nfunction Entries(generators: Generators, ps: PreferencesObject): readonly (JSX.Element | null)[] {\n    return Object.keys(ps).map(k => Entry(generators, ps[k]));\n}\n\nfunction Entry<T extends AllowedTypes>(generators: Generators, p: Preference<T> | PreferenceGroup): JSX.Element | null {\n    return (\n        p instanceof Preference\n            ? (\n                p.extras.implicit // should not be part of the preferences menu\n                    ? null\n                    : (\n                        <div class={classNames(CONFIG.CLASS.preference, p.extras.class)} title={p.description}>\n                            {InputElement(generators, p)}\n                            {isString(p.extras.suffix) ? <HtmlLabel for={PID(p)} html={p.extras.suffix} /> : null}\n                            {\n                                p.extras.more !== undefined\n                                    ? <aside dangerouslySetInnerHTML={{__html: p.extras.more}} />\n                                    : null\n                            }\n                        </div>\n                    )\n            ) : (\n                <fieldset class={SITE.CLASS.fieldset}>\n                    <HtmlLegend html={p.label} />\n                    {Entries(generators, p._)}\n                    {\n                        p.extras && p.extras.id === CONFIG.ID.editingToolsPreferences\n                            ? <EditingTools\n                                textarea={document.createElement(\"textarea\")}\n                                config={getEditingToolsConfig()}\n                                disabled={!Preferences.get(P.editing_tools._.enable)}\n                                undoSupport={Preferences.get(P.advanced._.undo_support)}\n                            />\n                            : null\n                    }\n                </fieldset>\n            )\n    );\n}\n\nfunction InputElement<T extends AllowedTypes>(generators: Generators, p: Preference<T>): GeneratorOutput {\n    // Order can be super-important here due to the semantics of instanceof with respect to subclasses.\n    if (is(BooleanPreference)(p)) {\n        return generators.Boolean(p);\n    }\n    if (is(StringPreference)(p)) {\n        return generators.String(p);\n    }\n    if (is(IntegerPreference)(p)) {\n        return generators.Integer(p);\n    }\n    if (is(DoublePreference)(p)) {\n        return generators.Double(p);\n    }\n    if (is(TimePreference)(p)) {\n        return generators.Time(p);\n    }\n    if (is(IntegerRangePreference)(p)) {\n        return generators.IntegerRange(p);\n    }\n    if (is(DoubleRangePreference)(p)) {\n        return generators.DoubleRange(p);\n    }\n    if (is(MultichoicePreference)(p)) {\n        return generators.Multichoice(p);\n    }\n    if (is(ListPreference)(p) && p === P.interests._.uninteresting_subforums) {\n        return <Interests p={p} />;\n    }\n    throw new Error(`Unsupported preference: ${p}`); // This kills the entire preferences GUI, so we have a test catching it.\n}\n\nfunction Generator_Boolean(p: BooleanPreference): GeneratorOutput {\n    return LabeledInput(\n        <input type=\"checkbox\" id={PID(p)} checked={Preferences.get(p)} onChange={e => {\n            Preferences.set(p, (e.target as HTMLInputElement).checked);\n        }} />,\n        p.label,\n    );\n}\n\nfunction Generator_String(p: StringPreference): GeneratorOutput {\n    return (\n        p.label === T.preferences._.NO_LABEL ? [] : [ <PreferenceLabel preference={p} /> ]\n    ).concat([\n        (p.multiline\n            ?\n            <textarea\n                id={PID(p)}\n                value={Preferences.get(p)}\n                onChange={fromStringEventHandler<HTMLTextAreaElement, string, StringPreference>(p)}\n            ></textarea>\n            :\n            <input\n                type=\"text\"\n                id={PID(p)}\n                value={Preferences.get(p)}\n                onChange={fromStringEventHandler<HTMLInputElement, string, StringPreference>(p)}\n            />\n        ),\n    ]);\n}\n\nfunction Generator_Integer(p: IntegerPreference): GeneratorOutput {\n    return [\n        <PreferenceLabel preference={p} />,\n        <input\n            type=\"number\"\n            id={PID(p)}\n            value={Preferences.get(p).toString()}\n            onChange={fromStringEventHandler<HTMLInputElement, number, IntegerPreference>(p)}\n        />,\n    ];\n}\n\nfunction Generator_Double(p: DoublePreference): GeneratorOutput {\n    return [\n        <PreferenceLabel preference={p} />,\n        <input\n            type=\"number\"\n            id={PID(p)}\n            value={Preferences.get(p).toString()}\n            step={RANGE_MAX_STEP}\n            onChange={fromStringEventHandler<HTMLInputElement, number, DoublePreference>(p)}\n        />,\n    ];\n}\n\nfunction Generator_Time(p: TimePreference): GeneratorOutput {\n    return [\n        <PreferenceLabel preference={p} />,\n        <input\n            type=\"time\"\n            id={PID(p)}\n            value={p.stringify(Preferences.get(p))}\n            onChange={fromStringEventHandler<HTMLInputElement, number, TimePreference>(p)}\n        />,\n    ];\n}\n\nfunction Generator_IntegerRange(p: IntegerRangePreference): GeneratorOutput {\n    return [\n        <PreferenceLabel preference={p} />,\n        <input\n            type=\"number\"\n            id={PID(p)}\n            value={Preferences.get(p).toString()}\n            min={p.min}\n            max={p.max}\n            onChange={fromStringEventHandler<HTMLInputElement, number, IntegerRangePreference>(p)}\n        />,\n    ];\n}\n\nfunction Generator_DoubleRange(p: DoubleRangePreference): GeneratorOutput {\n    return [\n        <PreferenceLabel preference={p} />,\n        <input\n            type=\"number\"\n            id={PID(p)}\n            value={Preferences.get(p).toString()}\n            min={p.min}\n            max={p.max}\n            step={stepSize(p.min, p.max).toString()}\n            onChange={fromStringEventHandler<HTMLInputElement, number, DoubleRangePreference>(p)}\n        />,\n    ];\n}\n\nfunction stepSize(min: number, max: number): number {\n    return Math.min(\n        RANGE_MAX_STEP,\n        Math.pow(10, Math.floor(Math.log10(max - min))) / RANGE_MIN_NUMBER_OF_STEPS\n    );\n}\n\nfunction Generator_Multichoice<T extends AllowedTypes>(p: MultichoicePreference<T>): GeneratorOutput {\n    const MAX_RADIO_BUTTONS = 4;\n    const savedValue = Preferences.get(p);\n    const options = p.options;\n    return options.length <= MAX_RADIO_BUTTONS\n        ? (\n            <fieldset class={CONFIG.CLASS.radioButtonPreference}>\n                <HtmlLabel html={p.label} />\n                {options.map(option =>\n                    RadioButton({\n                        p: p,\n                        label: option.label,\n                        value: option.value,\n                        checked: option.value === savedValue,\n                    })\n                )}\n            </fieldset>\n        ) : [\n            <HtmlLabel html={p.label} />,\n            <select onChange={e => {\n                const index = (e.target as HTMLSelectElement).selectedIndex;\n                if (index >= 0 && index < options.length) {\n                    Preferences.set(p, options[index].value);\n                }\n            }}>\n                {options.map(option => <option selected={option.value === savedValue}>{option.label}</option>)}\n            </select>,\n        ];\n}\n\nfunction RadioButton<T extends AllowedTypes>({ p, label, value, checked }: { p: MultichoicePreference<T>, label: string, value: T, checked: boolean }): JSX.Element {\n    const radioButtonId = PID(p) + \"-\" + label;\n    return LabeledInput(\n        <input\n            type=\"radio\"\n            id={radioButtonId}\n            name={PID(p)}\n            checked={checked}\n            onChange={e => {\n                if ((e.target as HTMLInputElement).checked) {\n                    Preferences.set(p, value);\n                }\n            }}\n        />,\n        label,\n    );\n}\n\nfunction LabeledInput(input: JSX.Element, label: string): JSX.Element {\n    return (\n        // Cannot use HtmlLabel because we want to have the <input> inside the <label> to avoid a line break between them.\n        <label class={ CONFIG.CLASS.labeledInput }>\n            { input }\n            <span dangerouslySetInnerHTML={{ __html: label }} />\n        </label>\n    );\n}\n\nfunction extractForumLinkData(forumLink: HTMLAnchorElement): ForumCategory | null {\n    const match = forumLink.href.match(SITE.PATH.FORUM_CATEGORY);\n    const label = forumLink.textContent;\n    if (isNull(match) || isNull(label)) { return null; }\n    const id = parseInt(match[1]);\n    return {\n        id,\n        name: label,\n        isSubforum: (forumLink.parentElement as Element).classList.contains(SITE.CLASS.subforums),\n    };\n}\n\ninterface ForumCategory {\n    id: number\n    name: string\n    isSubforum?: boolean\n}\n\nfunction isDefined<T>(x: T | undefined): x is T {\n    return x !== undefined;\n}\n\ntype InterestsState = {\n    fetch: {\n        status: \"success\", categories: readonly ForumCategory[],\n    } | {\n        status: \"loading\",\n    } | {\n        status: \"failure\",\n    },\n}\n\nclass Interests extends Component<{ p: ListPreference<number> }, InterestsState> {\n    public state: InterestsState = { fetch: { status: \"loading\" } }\n\n    public componentDidMount() {\n        /*\n        A relative path such as \"/forum\" works in Violentmonkey and Tampermonkey\n        in both Chrome and Firefox, but not in Greasemonkey (Firefox).\n        \"https://\" + SITE.HOSTNAME + path doesn't work in Chrome due to CORS.\n        window.location.origin + path works in all five mentioned scenarios, as\n        well as in Safari on iOS 12.3.\n        */\n        fetch(window.location.origin + SITE.PATH.FORUM)\n            .then(response => response.text())\n            .then(responseContent => {\n                const responseDocument = new DOMParser().parseFromString(responseContent, \"text/html\");\n                const links = responseDocument.querySelectorAll(SELECTOR.forumLink);\n                this.setState({ fetch: {\n                    status: \"success\",\n                    categories: (\n                        only(HTMLAnchorElement)(Array.from(links))\n                            .filter(link => SITE.PATH.FORUM_CATEGORY.test(link.href))\n                            .map(forumLink => {\n                                const linkData = extractForumLinkData(forumLink);\n                                if (isNull(linkData)) {\n                                    log.error(`Could not extract forum link data from this link:`);\n                                    console.error(forumLink);\n                                    return undefined;\n                                }\n                                return linkData;\n                            })\n                            .filter(isDefined)\n                    ),\n                }});\n            }).catch(reason => {\n                log.error(reason);\n                this.setState({ fetch: { status: \"failure\" }});\n            });\n    }\n\n    public render() {\n        const p = this.props.p;\n        const uninteresting = Preferences.get(p);\n        const response = this.state.fetch;\n        switch (response.status) {\n            case \"loading\":\n                return T.general.loading;\n            case \"success\":\n                return (\n                    <ul id={CONFIG.ID.interestsPreferences}>\n                        {response.categories.map(category => {\n                            const id = category.id;\n                            const checkboxId = PID(p) + \"-\" + id;\n                            return (\n                                <li class={classNames({ [CONFIG.CLASS.subforum]: category.isSubforum })} key={id}>\n                                    <input type=\"checkbox\" id={checkboxId} checked={!uninteresting.includes(id)} onChange={e => {\n                                        const newUninteresting = uninteresting.filter(x => x !== id).concat((e.target as HTMLInputElement).checked ? [] : id);\n                                        Preferences.set(p, newUninteresting);\n                                    }} />\n                                    <HtmlLabel html={category.name} for={checkboxId} />\n                                </li>\n                            );\n                        })}\n                    </ul>\n                );\n            case \"failure\":\n                return T.preferences._.failed_to_fetch_categories;\n        }\n    }\n}\n\nclass PreferenceLabel<T extends AllowedTypes> extends Component<{ preference: Preference<T> }> {\n    public render() {\n        return <HtmlLabel for={PID(this.props.preference)} html={this.props.preference.label} />;\n    }\n}\n\nclass HtmlLabel extends Component<{ html: string, for?: string }> {\n    public render() {\n        return <label for={this.props.for} dangerouslySetInnerHTML={{ __html: this.props.html }} />;\n    }\n}\n\nclass HtmlLegend extends Component<{ html: string }> {\n    public render() {\n        return <legend dangerouslySetInnerHTML={{ __html: this.props.html }}></legend>;\n    }\n}\n","import { h } from \"preact\";\n\nimport { insertAtTheEnd, renderIn } from \"~src/operations/logic/render\";\nimport { PreferencesForm } from \"~src/preferences-menu\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\nimport { yyyymmdd } from \"~src/utilities\";\n\nexport default () => {\n    document.title = T.preferences._.title;\n    document.documentElement.appendChild((() => {\n        const link = document.createElement(\"link\");\n        link.rel = \"stylesheet\";\n        link.href = SITE.STYLESHEET_URL(yyyymmdd(new Date()));\n        return link;\n    })());\n    renderIn(document.body, insertAtTheEnd, <PreferencesForm />);\n};\n","export const id = (x) => x;\r\nexport function compose(f, g) {\r\n    return x => f(g(x));\r\n}\r\nexport function fmap(f) {\r\n    return mx => mx === null ? null : f(mx);\r\n}\r\n//# sourceMappingURL=utilities.js.map","import escapeRegex from \"escape-string-regexp\";\r\nimport { fmap, } from \"./utilities\";\r\nexport const NO_INFO = null;\r\nexport function literalRule(core) {\r\n    const literal = fmap(literalRegex);\r\n    return (before, after) => simpleRule(core)(literal(before), literal(after));\r\n}\r\nexport function simpleRule(core) {\r\n    return (before, after) => matchRule(core)(before, literalRegex(core.bad), after);\r\n}\r\nexport function matchRule(core) {\r\n    return (before, match, after) => (Object.assign({ before,\r\n        match,\r\n        after }, core));\r\n}\r\nexport function regexRule(core) {\r\n    return regex => (Object.assign({ before: null, match: regex, after: null }, core));\r\n}\r\nfunction literalRegex(s) {\r\n    return new RegExp(escapeRegex(s));\r\n}\r\n//# sourceMappingURL=rules.js.map","import { literalRule, matchRule, regexRule, simpleRule, } from \"highlight-mistakes\";\nconst DESC_NBSP = {\n    bad: \" \",\n    good: \"\\u00A0\",\n    info: \"hrt mellanslag\",\n};\nconst DESC_NBH = {\n    bad: \"-\",\n    good: \"\",\n    info: \"hrt bindestreck\",\n};\nconst DESC_END = {\n    bad: \"-\",\n    good: \"\",\n    info: \"tankstreck\",\n};\nconst literalNBSP = literalRule(DESC_NBSP);\nconst simpleNBSP = simpleRule(DESC_NBSP);\nconst matchNBSP = matchRule(DESC_NBSP);\nconst regexNBSP = regexRule(DESC_NBSP);\nconst literalNBH = literalRule(DESC_NBH);\nconst simpleNBH = simpleRule(DESC_NBH);\nconst matchNBH = matchRule(DESC_NBH);\nconst regexNBH = regexRule(DESC_NBH);\nconst literalEND = literalRule(DESC_END);\nconst simpleEND = simpleRule(DESC_END);\nconst matchEND = matchRule(DESC_END);\nconst regexEND = regexRule(DESC_END);\nexport const PATTERNS_MISTAKE_NB_SPACE = [\n    /\\d(?: \\d{3})+/,\n    /[A-Z][A-Za-z]+ \\d+\\.\\d+/,\n    /USB Type/,\n    /4K UHD/,\n    /Core i\\d/,\n    /\\d \\d{4}/,\n    /Geforce (?:G|R)TX\\-/,\n    /Ryzen \\d+\\-/,\n    /(?:G|R)TX \\d+(?: Ti)?/,\n    /Vega \\d+/,\n    /R\\d \\d+/,\n    /DVI(?:[-][DI])? DL\\b/,\n    /[^.:]\\u0020[A-Z][a-z]+ \\d{1,3}(?!\\u00A0)\\b/,\n];\nconst NUMBER = /(?:^|[^\\u00A0])\\d(?:\\u00A0\\d{3})*(?:,\\d+)?/;\nconst RULES_NB_SPACE = [\n    simpleNBSP(/[A-Z][A-Za-z]+/, /\\d+\\.\\d+/),\n    simpleNBSP(/\\d/, /(?=\\d{3})/),\n    simpleNBSP(NUMBER, /(?:[nmcdk]|[KMGTP]i?)?(?:s|g|m|Hz|b|bit|B|fps|FPS|V|W|Wh|kr|USD|EUR|C|%|st|dBA?)(?=$|[^\\w])/),\n    simpleNBSP(NUMBER, /(?:nano|mikro|milli|centi|deci|hekto|kilo|mega|giga|tera|peta)?(?:sekund(?:er)?|gram|meter|hertz|bit|byte|tum|bilder|volt|watt|wattimmar|kronor|dollar|euro|procent|stycken|decibel|r)(?:$|[^\\w])/),\n    matchNBSP(/[^:.] [A-Z][a-z]+/, / (?=\\d)/, /\\d{1,3}(?=[.,;: ])/),\n    simpleNBSP(/4K/, /UHD/),\n    simpleNBSP(/USB/, /Type/),\n    simpleNBSP(/Windows/, /95|98|ME|2000|XP|Vista|7|8(?:\\.1)?|10/),\n    simpleNBSP(/PCI/, /Express/),\n    simpleNBSP(/Core/, /i\\d/),\n    simpleNBSP(/\\d/, /\\d{4}/),\n    regexNBSP(/[GR]TX \\d{3,4}(?: Ti)?/),\n    simpleNBSP(/Geforce/, /[GR]TX-/),\n    simpleNBSP(/Ryzen/, /\\d+-/),\n    simpleNBSP(/Vega/, /\\d+/),\n    simpleNBSP(/R\\d/, /\\d+/),\n    simpleNBSP(/DVI(?:[-][DI])?/, /DL/),\n];\nconst RULES_NB_HYPHEN = [\n    simpleNBH(/i\\d/, /\\d{4}/),\n    simpleNBH(/Mini/, /ITX/),\n    simpleNBH(/G/, /Sync/),\n    simpleNBH(/V/, /[Ss]ync/),\n    simpleNBH(/Counter/, /Strike/),\n    simpleNBH(/DVI/, /(?:A|DL?|I)\\b/),\n    simpleNBH(/Type/, /C\\b/),\n    simpleNBH(/DDR\\d/, /\\d/),\n    simpleNBH(/i\\d/, /\\d{4}/),\n    simpleNBH(/[A-Z][a-z]+/, /[A-Z]{1,2}\\b/),\n    matchNBH(/\\d+/, /-\\d+(?:-\\d+)+/, null),\n];\nconst RULES_EN_DASH = [\n    simpleEND(/^/, / /),\n    simpleEND(/(?:^|[^\\d-])\\d{1,3}(?:,\\d+)?/, /\\d+(?:,\\d+)?(?=[^\\d-]|$)/),\n    simpleEND(/(?:^|[^\\d-])\\d{4}/, /\\d{4}(?=[^\\d-]|$)/),\n    simpleEND(/ /, / /),\n];\nexport const PATTERNS_MISTAKE_TIMES = [\n    / x /,\n];\nexport const RULES_TIMES = [\n    simpleRule({ good: \"\", bad: \"x\", info: \"gngertecken\" })(/ /, / /),\n];\nexport const PATTERN_DOPPELGANGERS = /\\u00A0|||/g;\nconst GIBBERISH = \"sahdufhaweafdafda\";\nexport const RULES = ([]\n    .concat([\n    literalRule({\n        bad: \"  \",\n        good: \"\\u00A0\\u00A0\",\n        info: \"hrda mellanslag\",\n    })(null, null),\n])\n    .concat(RULES_NB_SPACE)\n    .concat(RULES_NB_HYPHEN)\n    .concat(RULES_EN_DASH)\n    .concat(RULES_TIMES)\n    .concat([\n    literalRule({\n        bad: GIBBERISH,\n        good: \"\",\n        info: null,\n    })(null, null),\n    literalRule({\n        bad: GIBBERISH,\n        good: \"\",\n        info: null,\n    })(null, null),\n]));\nexport const RULES_SUP = [\n    simpleRule({\n        bad: `2`,\n        good: GIBBERISH,\n        info: \"tecknet  istllet fr en upphjd tva\",\n    })(/^/, /$/),\n    simpleRule({\n        bad: `3`,\n        good: GIBBERISH,\n        info: \"tecknet  istllet fr en upphjd trea\",\n    })(/^/, /$/),\n];\n//# sourceMappingURL=index.js.map","import { compose, id, } from \"./utilities\";\r\nexport const LOOKAROUND_DEFAULT = \"group\";\r\nexport function highlightWith(c) {\r\n    return text => text.replace(c.pattern, c.mark);\r\n}\r\nexport function proofreadWith(c) {\r\n    const transformers = c.rules.map(markMistakesAndVerifiedUsing(Object.assign({ lookaround: c.lookaround || LOOKAROUND_DEFAULT }, c)));\r\n    return transformers.reduceRight(compose, id);\r\n}\r\nexport function markMistakesAndVerifiedUsing(c) {\r\n    return r => compose(markAll(\"verified\", c.markVerified, c.lookaround)(r), markAll(\"mistakes\", c.markMistake, c.lookaround)(r));\r\n}\r\nexport function markAll(kind, mark, lookaround) {\r\n    return r => {\r\n        const before = r.before === null ? \"\" : r.before.source;\r\n        const after = r.after === null ? \"\" : r.after.source;\r\n        const [f_b, f_m, f_a] = (lookaround === \"native\"\r\n            ? [lookbehind, id, lookahead]\r\n            : (lookaround === \"group\"\r\n                ? [group, group, group]\r\n                : [id, id, id]));\r\n        const whatToFind = new RegExp(kind === \"mistakes\"\r\n            ? f_b(before) + f_m(r.match.source) + f_a(after)\r\n            : f_b(before) + f_m(r.match.source.split(r.bad).join(r.good)) + f_a(after), \"g\");\r\n        const whatToMark = kind === \"mistakes\" ? r.bad : r.good;\r\n        return findAndMarkUsing(whatToFind, whatToMark, mark, r.info, lookaround === \"group\");\r\n    };\r\n}\r\nfunction group(r) {\r\n    return \"(\" + r + \")\";\r\n}\r\nfunction lookahead(r) {\r\n    return \"(?=\" + r + \")\";\r\n}\r\nfunction lookbehind(r) {\r\n    return \"(?<=\" + r + \")\";\r\n}\r\nfunction findAndMarkUsing(whatToFind, whatToMark, mark, info, fakeLookaround) {\r\n    function markIn(s) {\r\n        return s.split(whatToMark).join(mark(info)(whatToMark));\r\n    }\r\n    return text => text.replace(whatToFind, (found, ...rest) => {\r\n        if (fakeLookaround) {\r\n            const captured = rest.slice(0, 3);\r\n            return captured[0] + markIn(captured[1]) + captured[2];\r\n        }\r\n        else {\r\n            return markIn(found);\r\n        }\r\n    });\r\n}\r\n//# sourceMappingURL=core.js.map","// This file cannot contain Webpack-resolved imports (e.g. \"~src/foo\").\n\nexport default {\n    proofread: \"proofread\",\n    any: \"any\",\n    mistake: \"mistake\",\n    verified: \"verified\",\n} as const;\n","import { RULES, RULES_SUP, PATTERN_DOPPELGANGERS } from \"@alling/sweclockers-writing-rules\";\nimport { compose } from \"@typed/compose\";\nimport { proofreadWith, highlightWith } from \"highlight-mistakes\";\n\nimport C from \"./classes\";\n\ntype StringTransformer = (s: string) => string;\n\nexport function processNodeWith(f: StringTransformer, sup: StringTransformer): (node: Node) => void {\n    return node => {\n        if (node.nodeType === Node.TEXT_NODE) {\n            const span = document.createElement(\"span\");\n            span.innerHTML = f(escapeHTML(node.textContent || \"\"));\n            (node.parentNode as Node).replaceChild(span, node);\n        } else if (node.nodeType === Node.ELEMENT_NODE) {\n            if (node.nodeName === \"SUP\") {\n                (node as HTMLElement).innerHTML = sup(node.textContent || \"\");\n            } else {\n                Array.from(node.childNodes).forEach(processNodeWith(f, sup));\n            }\n        }\n    };\n}\n\nexport function markWith(className: string): (info: string | null) => StringTransformer {\n    const isMistake = className === C.mistake;\n    return info => s => [\n        `<span class=\"${C.proofread} ${className}\"`,\n        (isMistake && info !== null ? ` title=\"Frslag: ${info}\"` : \"\"),\n        `>${s}</span>`,\n    ].join(\"\");\n}\n\nexport const processSup = proofreadWith({\n    rules: RULES_SUP,\n    markMistake: markWith(C.mistake),\n    markVerified: markWith(C.verified),\n});\n\nexport const processText = compose(\n    highlightWith({\n        pattern: PATTERN_DOPPELGANGERS,\n        mark: markWith(C.any)(null),\n    }),\n    proofreadWith({\n        rules: RULES,\n        markMistake: markWith(C.mistake),\n        markVerified: markWith(C.verified),\n    }),\n);\n\nexport const processNode = processNodeWith(processText, processSup);\n\nfunction replacer(found: `&` | `<` | `>` | `\"` | `'`): string {\n    switch (found) {\n        case `&`: return \"&amp;\";\n        case `<`: return \"&lt;\";\n        case `>`: return \"&gt;\";\n        case `\"`: return \"&quot;\";\n        case `'`: return \"&#039;\"; // https://stackoverflow.com/questions/2083754\n    }\n}\n\nfunction escapeHTML(html: string): string {\n    return html.replace(/[&<>\"']/g, replacer as (substring: string) => string);\n}\n","import { stylesheets } from \"userscripter\";\n\nimport { processNode } from \"~src/lib/proofreading\";\nimport C from \"~src/lib/proofreading/classes\";\nimport SELECTOR from \"~src/selectors\";\nimport * as SITE from \"~src/site\";\nimport STYLESHEETS from \"~src/stylesheets\";\nimport { withMaybe } from \"~src/utilities\";\n\nconst CONTEXT_CHARS = 10; // before and after mistake\n// If a previous and/or next sibling is not found, look outside these elements:\nconst ELEMENTS_TO_GO_OUTSIDE = [\n    \"em\",\n    \"span\",\n    \"strong\",\n    \"sub\",\n    \"sup\",\n].map(x => x.toUpperCase()); // because .tagName is upper case\n\nexport const performProcessing = (selectors: readonly string[]) => () => {\n    const selector = selectors.join(\", \");\n    for (const n of document.querySelectorAll(selector)) {\n        processNode(n);\n    }\n    for (const mistake of document.querySelectorAll(\".\"+C.mistake)) {\n        mistake.addEventListener(\"click\", () => {\n            if (getProofDialogTextarea() === null) {\n                withMaybe(document.getElementById(SITE.ID.correctionsLink), correctionsLink => {\n                    correctionsLink.click();\n                });\n            }\n            // Wait for proof dialog to appear:\n            setTimeout(() => {\n                withMaybe(getProofDialogTextarea(), textarea => {\n                    addCorrection(textarea, {\n                        context: context(mistake),\n                        suggestion: (mistake as HTMLElement).title,\n                    });\n                });\n            }, 10);\n        });\n    }\n};\n\nexport const enum Options {\n    ALWAYS,\n    CORRECTIONS,\n    NEVER,\n}\n\nexport function addListeners(e: { correctionsLink: HTMLElement }) {\n    e.correctionsLink.addEventListener(\"click\", _ => {\n        enable();\n        setTimeout(() => {\n            withMaybe(document.querySelector(SELECTOR.proofDialogCloseButton), closeButton => {\n                closeButton.addEventListener(\"click\", disable, { capture: false, passive: true });\n            });\n        }, 10);\n    }, {\n        capture: false,\n        passive: true,\n    });\n}\n\nexport function enable() {\n    stylesheets.enable(STYLESHEETS.proofread_forum_posts);\n}\n\nexport function disable() {\n    stylesheets.disable(STYLESHEETS.proofread_forum_posts);\n}\n\nfunction getProofDialogTextarea(): HTMLTextAreaElement | null {\n    return document.querySelector(SELECTOR.proofDialogTextarea) as HTMLTextAreaElement | null;\n}\n\nfunction addCorrection(textarea: HTMLTextAreaElement, correction: {\n    context: string,\n    suggestion: string,\n}): void {\n    textarea.value = (textarea.value.trim() + [\n        \"\", \"\", \"\",\n        correction.context,\n        \"\",\n        correction.suggestion,\n    ].join(\"\\n\")).trim();\n    textarea.scrollTo(0, Number.MAX_SAFE_INTEGER);\n    textarea.focus();\n    // Corrections are not submitted unless there has been a change event on the textarea.\n    textarea.dispatchEvent(new Event(\"change\"));\n}\n\nfunction context(mistake: Node): string {\n    return [\n        contextBefore(mistake, CONTEXT_CHARS),\n        mistake.textContent as string,\n        contextAfter(mistake, CONTEXT_CHARS),\n    ].join(\"\");\n}\n\nfunction contextBeforeOrAfter(\n    getSibling: (mistake: Node) => Node | null,\n    combine: (text: string, nextContext: string) => string,\n    baseCase: (text: string, maxChars: number) => string,\n): (mistake: Node, maxChars: number) => string {\n    return (mistake, maxChars) => {\n        const recurse = contextBeforeOrAfter(getSibling, combine, baseCase);\n        const sibling = getSibling(mistake);\n        if (sibling === null) {\n            const parent = mistake.parentElement as HTMLElement;\n            return (\n                ELEMENTS_TO_GO_OUTSIDE.includes(parent.tagName)\n                    ? recurse(parent, maxChars)\n                    : \"\"\n            );\n        }\n        const text = sibling.textContent || \"\";\n        return (\n            text.length < maxChars\n                ? combine(text, recurse(sibling, maxChars - text.length))\n                : baseCase(text, maxChars)\n        );\n    };\n}\n\nconst contextBefore = contextBeforeOrAfter(\n    n => n.previousSibling,\n    (text, nextContext) => nextContext + text,\n    (text, maxChars) => text.substring(text.length - maxChars),\n);\n\nconst contextAfter = contextBeforeOrAfter(\n    n => n.nextSibling,\n    (text, nextContext) => text + nextContext,\n    (text, maxChars) => text.substring(0, maxChars),\n);\n","import * as BB from \"bbcode-tags\";\nimport classnames from \"classnames\";\nimport { Fragment, h, JSX } from \"preact\";\nimport { isNull, isString, only } from \"ts-type-guards\";\nimport { log } from \"userscripter\";\n\nimport * as CONFIG from \"~src/config\";\nimport { insertAtTheEnd, renderIn } from \"~src/operations/logic/render\";\nimport { P, Preferences } from \"~src/preferences\";\nimport SELECTOR from \"~src/selectors\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nconst userMessage = Preferences.get(P.forum_threads._.quote_signature_message);\n\nexport default () => {\n    const csrf = session.getCsrfToken();\n    const forumPosts = document.getElementsByClassName(SITE.CLASS.forumPost);\n    for (const post of only(HTMLElement)(Array.from(forumPosts))) {\n        if (post.classList.contains(SITE.CLASS.forumPostByCurrentUser)) {\n            // We don't want buttons on the reader's own posts, because they can overflow when the edit button is visible.\n            continue;\n        }\n        const signature = post.querySelector(\".\" + SITE.CLASS.forumPostSignature);\n        const controls = post.querySelector(\".\" + SITE.CLASS.forumPostControls);\n        const authorName = post.querySelector(SELECTOR.forumPostAuthorLink)?.textContent?.trim();\n        const quoteURL = post.querySelector<HTMLAnchorElement>(SELECTOR.quoteButton)?.href;\n        if (controls === null) return couldNotExtractFromPost(\"controls\", post.id);\n        if (!isString(authorName)) return couldNotExtractFromPost(\"author name\", post.id);\n        if (!isString(quoteURL)) return couldNotExtractFromPost(\"quote URL\", post.id);\n        renderIn(controls, insertAtTheEnd, button({\n            signature,\n            authorName,\n            userMessage,\n            quoteURL,\n            csrf,\n        }));\n    }\n};\n\nfunction button(props: {\n    signature: Element | null,\n    authorName: string,\n    userMessage: string,\n    quoteURL: string,\n    csrf: string,\n}): JSX.Element {\n    const noSignature = isNull(props.signature);\n    return (\n        <button\n            class={classnames(CONFIG.CLASS.quoteSignatureButton, SITE.CLASS.button, noSignature ? SITE.CLASS.disabled : null)}\n            title={noSignature ? T.general.quote_signature_tooltip_no_signature(props.authorName) : T.general.quote_signature_tooltip}\n            disabled={noSignature}\n            onClick={() => {\n                fetch(props.quoteURL, { credentials: \"same-origin\" }) // https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters\n                    .then(response => response.text())\n                    .then(responseContent => {\n                        const responseDocument = new DOMParser().parseFromString(responseContent, \"text/html\");\n                        const quoteTextarea = responseDocument.querySelector(\"textarea\");\n                        if (quoteTextarea === null) {\n                            throw couldNotExtract(\"textarea from fetch response\");\n                        }\n                        const form = document.createElement(\"form\");\n                        form.hidden = true;\n                        form.method = \"POST\";\n                        form.action = props.quoteURL;\n                        renderIn(form, insertAtTheEnd, (\n                            <>\n                                <input name={SITE.FORM.name.csrfToken} type=\"hidden\" value={props.csrf} />\n                                <input name={SITE.FORM.name.action} type=\"hidden\" value={SITE.FORM.value.preview} />\n                                <textarea name={SITE.FORM.name.message} hidden>\n                                    {withSignatureAndUserMessage({\n                                        rawQuote: quoteTextarea.textContent || \"\",\n                                        rawSignature: props.signature?.textContent || \"\",\n                                        userMessage: props.userMessage,\n                                    })}\n                                </textarea>\n                            </>\n                        ));\n                        document.documentElement.appendChild(form); // Otherwise: \"Form submission canceled because the form is not connected\"\n                        form.submit();\n                    })\n                    .catch(log.error);\n            }}\n        >\n            <span class={SITE.CLASS.label}>{T.general.quote_signature_label}</span>\n        </button>\n    );\n}\n\nfunction withSignatureAndUserMessage(x: {\n    rawQuote: string\n    rawSignature: string\n    userMessage: string\n}): string {\n    const SIGNATURE_FONT_SIZE = \"smaller\";\n    const textToInsert = [\n        `\\n`,\n        `________________________`,\n        `\\n`,\n        BB.start(SITE.TAG.size, SIGNATURE_FONT_SIZE),\n        x.rawSignature.trim(),\n        BB.end(SITE.TAG.size),\n    ].join(\"\");\n    return x.rawQuote.replace(/\\n*(?=\\[\\/quote\\]\\s*$)/, textToInsert) + x.userMessage;\n}\n\nfunction couldNotExtract(what: string): string {\n    return `Could not extract ${what}.`;\n}\n\nfunction couldNotExtractFromPost(what: string, htmlId: string): string {\n    return couldNotExtract(`${what} from post with id=\"${htmlId}\"`);\n}\n\ndeclare namespace session {\n    function getCsrfToken(): string\n}\n","import * as BB from \"bbcode-tags\";\n\nimport * as SITE from \"~src/site\";\n\nconst END_TAG_QUOTE = BB.end(SITE.TAG.quote);\nconst sentFrom = SITE.MOBILE_SITE_DISCLAIMER.sentFrom;\nconst mobileSiteDomain = SITE.MOBILE_SITE_DISCLAIMER.mobileSiteDomain;\nconst disclaimer = [\n    ``,\n    `[size=\"smaller\"]${sentFrom} [url=\"//${mobileSiteDomain}\"]${mobileSiteDomain}[/url][/size]`,\n    END_TAG_QUOTE,\n].join(\"\\n\");\n\nexport default (e: { textarea: HTMLElement }) => {\n    const textarea = e.textarea as HTMLTextAreaElement;\n    textarea.value = withoutDisclaimers(textarea.value);\n};\n\n// Removes all disclaimers recursively, so we can use a plain string for the replace pattern:\nfunction withoutDisclaimers(text: string): string {\n    const withoutFirstDisclaimer = text.replace(disclaimer, END_TAG_QUOTE);\n    return text === withoutFirstDisclaimer ? text : withoutDisclaimers(withoutFirstDisclaimer);\n}\n","import { is } from \"ts-type-guards\";\n\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nexport default (e: { followedThreadsLinkTextOrSigninButton: HTMLElement }) => {\n    const notLoggedIn = is(HTMLAnchorElement)(e.followedThreadsLinkTextOrSigninButton);\n    if (notLoggedIn) return;\n    const text = e.followedThreadsLinkTextOrSigninButton;\n    const link = text.parentElement as HTMLAnchorElement;\n    text.textContent = T.general.my_posts;\n    link.href = SITE.PATH.MY_POSTS;\n    link.classList.remove(SITE.CLASS.colorOrange);\n};\n","import { empty, end, start } from \"bbcode-tags\";\nimport { unlines } from \"lines-unlines\";\n\nimport { insertAtTheEnd, renderIn } from \"~src/operations/logic/render\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nimport { toolbarButton } from \"./logic/editing-tools\";\nimport { indent, insert } from \"./logic/textarea\";\n\nconst enum Headings { NONE, FIRST, ALL }\n\nconst TABLE_CONFIG = { rows: 4, columns: 3, headings: true };\n\nconst tableToolbarButton = toolbarButton({\n    action: (textarea, undoSupport) => insert(table(TABLE_CONFIG))(textarea, undoSupport), // eta-abstracted to defer table generation until button clicked\n    class: SITE.CLASS.toolbarTableButton,\n    tooltip: T.general.tooltip_table,\n});\n\nexport default (undoSupport: boolean) => (e: {\n    textarea: HTMLElement,\n    unorderedListButton: HTMLElement,\n}) => {\n    const parent = e.unorderedListButton.parentElement as Element;\n    renderIn(parent, insertAtTheEnd, tableToolbarButton(e.textarea as HTMLTextAreaElement, undoSupport));\n};\n\nfunction table(config: Readonly<typeof TABLE_CONFIG>): string {\n    const headingRow = tableRowLines(config.columns, Headings.ALL);\n    const regularRow = tableRowLines(config.columns, config.headings ? Headings.FIRST : Headings.NONE);\n    const theadLines = concat([\n        start(\"thead\"),\n        headingRow.map(indent),\n        end(\"thead\"),\n    ]);\n    const tbodyLines = concat([\n        start(\"tbody\"),\n        concat(replicate(config.rows - 1, regularRow.map(indent))),\n        end(\"tbody\"),\n    ]);\n    const tableLines = concat([\n        start(\"table\"),\n        theadLines.map(indent),\n        tbodyLines.map(indent),\n        end(\"table\"),\n    ]);\n    return unlines(tableLines);\n}\n\nfunction tableRowLines(columns: number, headings: Headings): readonly string[] {\n    const cell_first = headings === Headings.NONE ? \"td\" : \"th\";\n    const cell_rest = headings === Headings.ALL ? \"th\" : \"td\";\n    return concat([\n        start(\"tr\"),\n        indent(empty(cell_first)),\n        replicate(columns - 1, indent(empty(cell_rest))),\n        end(\"tr\"),\n    ]);\n}\n\n// From Haskell. Example: replicate(3, 42) = [42, 42, 42]\nfunction replicate<T>(n: number, x: T): readonly T[] {\n    return Array(n).fill(x);\n}\n\nfunction concat(xs: readonly (string | readonly string[])[]): readonly string[] {\n    return ([] as string[]).concat(...xs);\n}\n","import { h, JSX } from \"preact\";\nimport { NumericPreference } from \"ts-preferences\";\n\nimport * as CONFIG from \"~src/config\";\nimport iconTextareaLarge from \"~src/icons/textarea-large.svg\";\nimport iconTextareaSmall from \"~src/icons/textarea-small.svg\";\nimport { insertAtTheEnd, renderIn } from \"~src/operations/logic/render\";\nimport { P, Preferences } from \"~src/preferences\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nexport default (e: { textarea: HTMLElement, toolbarInner: HTMLElement }) => {\n    const textarea = e.textarea as HTMLTextAreaElement;\n    renderIn(e.toolbarInner, insertAtTheEnd, (\n        <div class={[ SITE.CLASS.toolbarGroup, CONFIG.CLASS.textareaSize ].join(\" \")}>\n            {button(textarea, P.edit_mode._.textarea_size_small)}\n            {button(textarea, P.edit_mode._.textarea_size_large)}\n        </div>\n    ));\n};\n\nfunction button(textarea: HTMLTextAreaElement, mode: NumericPreference): JSX.Element {\n    const [ tooltip, icon ] = (\n        mode === P.edit_mode._.textarea_size_small\n            ? [ T.general.textarea_size_small, iconTextareaSmall ]\n            : [ T.general.textarea_size_large, iconTextareaLarge ]\n    );\n    return (\n        <div class=\"tbButton iconButton noselect\" title={tooltip}>\n            <div class=\"inner\">\n                <div\n                    class={SITE.CLASS.toolbarButtonIcon}\n                    onClick={() => apply(mode, textarea)}\n                    dangerouslySetInnerHTML={{__html: icon}}\n                />\n            </div>\n        </div>\n    );\n}\n\nfunction apply(mode: NumericPreference, textarea: HTMLTextAreaElement): void {\n    const size = Preferences.get(mode);\n    textarea.style.height = size + \"px\";\n    Preferences.set(P.edit_mode._.textarea_size, size);\n}\n","export default \"<svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\">\\n    <rect x=\\\"1\\\" y=\\\"1\\\" width=\\\"30\\\" height=\\\"10\\\" stroke=\\\"#666\\\" fill=\\\"white\\\" stroke-width=\\\"2\\\"/>\\n</svg>\\n\";","export default \"<svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\">\\n    <rect x=\\\"1\\\" y=\\\"1\\\" width=\\\"30\\\" height=\\\"30\\\" stroke=\\\"#666\\\" fill=\\\"white\\\" stroke-width=\\\"2\\\"/>\\n</svg>\\n\";","import { DOMCONTENTLOADED } from \"userscripter/lib/environment\";\nimport { Operation, operation } from \"userscripter/lib/operations\";\n\nimport * as CONFIG from \"~src/config\";\nimport {\n    isInEditMode,\n    isInEditMode_forum,\n    isInEditMode_market,\n    isInEditMode_marketContact,\n    isInEditMode_PM,\n    isInForumThreadsView,\n    isOnBSCPreferencesPage,\n    isOnSomeProfilePage,\n    isOnSweclockersSettingsPage,\n    isReadingEditorialContent,\n    isReadingForumThread,\n    isReadingThread,\n    mayHaveJustSubmittedForumPost,\n    mayHaveJustSubmittedPM,\n} from \"~src/environment\";\nimport { P, Preferences } from \"~src/preferences\";\nimport SELECTOR from \"~src/selectors\";\nimport * as SITE from \"~src/site\";\n\nimport * as autosaveDraft from \"./operations/autosave-draft\";\nimport manageCaretPosition from \"./operations/caret-position\";\nimport * as DarkTheme from \"./operations/dark-theme\";\nimport insertDraftModeToggle from \"./operations/draft-mode-toggle\";\nimport insertEditingTools from \"./operations/editing-tools\";\nimport insertHeadingToolbarButton from \"./operations/heading-toolbar-button\";\nimport enableImprovedBuiltinEditingTools from \"./operations/improved-builtin-editing-tools\";\nimport enableImprovedBuiltinEditingToolsUrl from \"./operations/improved-builtin-editing-tools-url\";\nimport adaptCorrectionsLink from \"./operations/improved-corrections\";\nimport * as keyboardShortcutsEditMode from \"./operations/keyboard-shortcuts/edit-mode\";\nimport insertLinkToTop from \"./operations/link-to-top\";\nimport insertMentionEveryoneButton from \"./operations/mention-everyone\";\nimport performMousetrapPreparations from \"./operations/mousetrap-preparations\";\nimport insertPMLinks from \"./operations/pm-links\";\nimport insertPreferencesLink from \"./operations/preferences-link\";\nimport insertPreferencesMenu from \"./operations/preferences-menu\";\nimport insertPreferencesShortcut from \"./operations/preferences-shortcut\";\nimport preventAccidentalSignout from \"./operations/prevent-accidental-signout\";\nimport * as preventAccidentalUnload from \"./operations/prevent-accidental-unload\";\nimport * as Proofreading from \"./operations/proofreading\";\nimport insertQuoteSignatureButtons from \"./operations/quote-signature-buttons\";\nimport rememberLocationInMarket from \"./operations/remember-location-in-market\";\nimport removeMobileSiteDisclaimer from \"./operations/remove-mobile-site-disclaimer\";\nimport replaceFollowedThreadsLink from \"./operations/replace-followed-threads-link\";\nimport insertTableToolbarButton from \"./operations/table-toolbar-button\";\nimport insertTextareaSizeToggle from \"./operations/textarea-size-toggle\";\nimport filterUninterestingSubforums from \"./operations/uninteresting-subforums\";\n\nconst ALWAYS = true;\n\nconst improvedBuiltinEditingToolsDescription = \"enable improved built-in editing tools\";\nconst shouldEnableImprovedBuiltinEditingTools = (isInEditMode || isReadingThread) && Preferences.get(P.edit_mode._.improved_builtin_editing_tools);\nconst shouldInsertPreferencesShortcut = Preferences.get(P.general._.insert_preferences_shortcut);\nconst uninterestingSubforumIDs = Preferences.get(P.interests._.uninteresting_subforums);\n\n// True here means the user wants us to act as if there is undo support (i.e. take no precautions to protect data).\n// Chrome always has actual undo support and Firefox never does.\nconst undoSupport = Preferences.get(P.advanced._.undo_support);\n\nconst OPERATIONS: readonly Operation<any>[] = [\n    operation({\n        description: \"set document id\",\n        condition: () => ALWAYS,\n        action: () => { document.documentElement.id = CONFIG.ID.document; },\n    }),\n    operation({\n        // I haven't managed to make this operation work at all in Firefox; the default action is just not overridden.\n        description: improvedBuiltinEditingToolsDescription + \" (URL/hyperlink button)\",\n        condition: () => shouldEnableImprovedBuiltinEditingTools,\n        // This operation cannot be deferred until DOMContentLoaded, because then it can't override the default action for the URL button.\n        dependencies: { body: \"body\" }, // Defers the operation until SweClockers' script has defined Main (needed by the operation).\n        action: enableImprovedBuiltinEditingToolsUrl(undoSupport),\n    }),\n    operation({\n        description: \"insert preferences menu\",\n        condition: () => isOnBSCPreferencesPage,\n        dependencies: { body: \"body\" }, // Back in 2018, I had problems with document.body being null when logged out and DOMContentLoaded not firing when logged in. Not able to reproduce it in July 2020, but this always works.\n        action: insertPreferencesMenu,\n    }),\n    operation({\n        description: \"disable scroll restoration\",\n        condition: () => Preferences.get(P.advanced._.disable_scroll_restoration),\n        action: () => {\n            if (\"scrollRestoration\" in history) {\n                history.scrollRestoration = \"manual\";\n            }\n        },\n    }),\n    operation({\n        description: \"prevent accidental unload (post or message)\",\n        condition: () => isInEditMode && Preferences.get(P.advanced._.prevent_accidental_unload),\n        dependencies: {\n            textarea: SELECTOR.textarea,\n            _actionButtons: SELECTOR.actionButtons,\n        },\n        action: preventAccidentalUnload.postOrMessage,\n    }),\n    operation({\n        description: \"prevent accidental unload (corrections)\",\n        condition: () => isReadingEditorialContent && Preferences.get(P.advanced._.prevent_accidental_unload),\n        action: preventAccidentalUnload.corrections,\n    }),\n    operation({\n        description: \"manage caret position in textarea\",\n        condition: () => isInEditMode, // Should be run unconditionally (see the implementation for more info).\n        dependencies: {\n            textarea: SELECTOR.textarea,\n            // The market doesn't have a dedicated preview button; its save button fills that purpose in this context.\n            previewButton: isInEditMode_market ? SELECTOR.saveButton : SELECTOR.previewButton,\n        },\n        action: manageCaretPosition,\n    }),\n    operation({\n        description: \"remove mobile site disclaimer\",\n        condition: () => isInEditMode_forum && Preferences.get(P.edit_mode._.remove_mobile_site_disclaimer),\n        dependencies: { textarea: SELECTOR.textarea },\n        action: removeMobileSiteDisclaimer,\n    }),\n    operation({\n        description: \"insert editing tools\",\n        condition: () => isInEditMode && Preferences.get(P.editing_tools._.enable),\n        dependencies: { textarea: SELECTOR.textarea },\n        action: insertEditingTools(undoSupport),\n    }),\n    operation({\n        description: \"insert editing tools in quick reply form\",\n        condition: () => isReadingThread && Preferences.get(P.editing_tools._.enable) && Preferences.get(P.editing_tools._.in_quick_reply_form),\n        dependencies: { textarea: SELECTOR.textarea },\n        action: insertEditingTools(undoSupport),\n    }),\n    operation({\n        description: improvedBuiltinEditingToolsDescription,\n        condition: () => shouldEnableImprovedBuiltinEditingTools,\n        deferUntil: DOMCONTENTLOADED, // because Tanuki must be defined\n        action: enableImprovedBuiltinEditingTools,\n    }),\n    operation({\n        description: \"insert heading toolbar button\",\n        condition: () => isInEditMode && Preferences.get(P.edit_mode._.insert_heading_toolbar_button),\n        dependencies: {\n            textarea: SELECTOR.textarea,\n            strikeButton: SELECTOR.textareaToolbarStrikeButton,\n        },\n        action: insertHeadingToolbarButton(undoSupport),\n    }),\n    operation({\n        description: \"insert table toolbar button\",\n        condition: () => isInEditMode && Preferences.get(P.edit_mode._.insert_table_toolbar_button),\n        dependencies: {\n            textarea: SELECTOR.textarea,\n            unorderedListButton: SELECTOR.textareaToolbarUnorderedListButton,\n        },\n        action: insertTableToolbarButton(undoSupport),\n    }),\n    operation({\n        description: \"insert textarea size toggle\",\n        condition: () => isInEditMode && Preferences.get(P.edit_mode._.textarea_size_toggle),\n        dependencies: {\n            textarea: SELECTOR.textarea,\n            toolbarInner: SELECTOR.textareaToolbarInner,\n        },\n        action: insertTextareaSizeToggle,\n    }),\n    operation({\n        description: \"insert preferences shortcut\",\n        condition: () => !isOnBSCPreferencesPage && shouldInsertPreferencesShortcut,\n        dependencies: {\n            notificationsBar: \".\" + SITE.CLASS.notifications,\n        },\n        action: insertPreferencesShortcut,\n    }),\n    operation({\n        description: \"insert dark theme toggle\",\n        condition: () => !isOnBSCPreferencesPage && Preferences.get(P.dark_theme._.show_toggle),\n        dependencies: { menuLockToggle: \"#\" + SITE.ID.menuLockToggle },\n        action: DarkTheme.insertToggle,\n    }),\n    operation({\n        description: \"prevent accidental signout\",\n        condition: () => isOnSomeProfilePage && Preferences.get(P.advanced._.prevent_accidental_signout),\n        action: preventAccidentalSignout,\n        deferUntil: DOMCONTENTLOADED, // We can't extract the user's ID at document-start.\n    }),\n    operation({\n        description: \"insert preferences link\",\n        condition: () => isOnSweclockersSettingsPage,\n        dependencies: { settingsNavigation: SELECTOR.settingsNavigation },\n        action: insertPreferencesLink,\n    }),\n    operation({\n        description: \"insert link to top\",\n        condition: () => isReadingThread && Preferences.get(P.forum_threads._.insert_link_to_top),\n        action: insertLinkToTop,\n        dependencies: { parent: SELECTOR.pageNavigationAfterForumPosts },\n    }),\n    operation({\n        description: \"insert PM links\",\n        condition: () => isReadingForumThread && Preferences.get(P.forum_threads._.insert_pm_links),\n        action: insertPMLinks,\n        deferUntil: DOMCONTENTLOADED,\n    }),\n    operation({\n        description: \"insert quote signature buttons\",\n        condition: () => isReadingThread && Preferences.get(P.forum_threads._.quote_signature_buttons),\n        action: insertQuoteSignatureButtons,\n        deferUntil: DOMCONTENTLOADED,\n    }),\n    operation({\n        description: \"adapt corrections link to work with improved corrections\",\n        condition: () => isReadingEditorialContent && Preferences.get(P.general._.improved_corrections),\n        dependencies: { correctionsLink: \"#\" + SITE.ID.correctionsLink },\n        action: adaptCorrectionsLink,\n    }),\n    operation({\n        description: \"filter uninteresting subforums\",\n        condition: () => isInForumThreadsView && uninterestingSubforumIDs.length > 0,\n        dependencies: { body: \"body\" },\n        action: filterUninterestingSubforums(uninterestingSubforumIDs),\n        deferUntil: DOMCONTENTLOADED,\n    }),\n    operation({\n        description: \"enable proofreading\",\n        condition: () => Preferences.get(P.advanced._.proofread_articles) === Proofreading.Options.ALWAYS,\n        action: () => {\n            // The border must become red before we make it transparent, so we get the nice \"flash\" effect.\n            window.setTimeout(Proofreading.enable, 10);\n        },\n        deferUntil: DOMCONTENTLOADED,\n    }),\n    operation({\n        description: \"add proofreading listeners\",\n        condition: () => isReadingEditorialContent && Preferences.get(P.advanced._.proofread_articles) === Proofreading.Options.CORRECTIONS,\n        dependencies: { correctionsLink: \"#\" + SITE.ID.correctionsLink },\n        action: Proofreading.addListeners,\n    }),\n    operation({\n        description: \"perform proofreading processing\",\n        condition: () => (\n            (isReadingEditorialContent && Preferences.get(P.advanced._.proofread_articles) !== Proofreading.Options.NEVER)\n            ||\n            (isInEditMode && Preferences.get(P.advanced._.proofread_forum_posts))\n        ),\n        action: Proofreading.performProcessing(\n            // Hotfix for #152.\n            isReadingEditorialContent\n                ? [ SELECTOR.bbParagraph ]\n                : [ SELECTOR.bbParagraph, \"h1\", \"h2\", \"h3\" ]\n        ),\n        deferUntil: DOMCONTENTLOADED,\n    }),\n    operation({\n        description: \"replace followed threads link with a link to my posts\",\n        condition: () => !isOnBSCPreferencesPage && Preferences.get(P.general._.replace_followed_threads_link),\n        dependencies: { followedThreadsLinkTextOrSigninButton: SELECTOR.signinButtonOr(SELECTOR.followedThreadsLinkText) },\n        action: replaceFollowedThreadsLink,\n    }),\n    operation({\n        description: \"remember location in market\",\n        condition: () => isInEditMode_market && Preferences.get(P.general._.remember_location_in_market),\n        dependencies: {\n            city: SELECTOR.cityInput,\n            region: SELECTOR.regionSelect,\n            saveButton: SELECTOR.saveButton,\n        },\n        action: rememberLocationInMarket,\n    }),\n    operation({\n        description: \"insert mention everyone button\",\n        condition: () => isReadingForumThread && Preferences.get(P.forum_threads._.mention_everyone_button),\n        dependencies: {\n            forumPostContainer: SELECTOR.forumPostContainer,\n            replyButton: SELECTOR.replyButtonAfterForumPosts,\n            quickReplyForm: SELECTOR.quickReplyForm,\n        },\n        action: insertMentionEveryoneButton,\n    }),\n    operation({\n        description: \"insert draft mode toggle\",\n        condition: () => (isInEditMode_forum || isInEditMode_PM) && Preferences.get(P.edit_mode._.draft_mode_toggle),\n        dependencies: {\n            saveButton: SELECTOR.saveButton,\n            previewButton: SELECTOR.previewButton,\n        },\n        action: insertDraftModeToggle,\n    }),\n    operation({\n        description: \"enable autosave draft watchdog\",\n        condition: () => (isInEditMode_forum || isInEditMode_PM) && Preferences.get(P.edit_mode._.autosave_draft),\n        dependencies: {\n            saveButton: SELECTOR.saveButton,\n            textarea: SELECTOR.textarea,\n            toolbarInner: SELECTOR.textareaToolbarInner,\n        },\n        action: autosaveDraft.manageAutosaveWatchdog(undoSupport),\n    }),\n    operation({\n        description: \"delete any obsolete autosaved draft\",\n        condition: () => (mayHaveJustSubmittedForumPost || mayHaveJustSubmittedPM) && Preferences.get(P.edit_mode._.autosave_draft),\n        dependencies: { post: SELECTOR.linkedForumPost },\n        action: autosaveDraft.clearAutosavedDraftIfObsolete,\n    }),\n    operation({\n        description: \"delete any leftover autosaved draft\",\n        condition: () => false === Preferences.get(P.edit_mode._.autosave_draft),\n        action: autosaveDraft.clearAutosavedDraft,\n    }),\n\n    // Keyboard shortcuts\n    operation({\n        description: \"perform Mousetrap preparations\",\n        condition: () => ALWAYS,\n        action: performMousetrapPreparations,\n        deferUntil: DOMCONTENTLOADED,\n    }),\n    operation({\n        description: \"enable Tab key\",\n        condition: () => isInEditMode && Preferences.get(P.edit_mode._.insert_tab),\n        dependencies: {\n            textarea: SELECTOR.textarea,\n        },\n        action: keyboardShortcutsEditMode.insertTab(Preferences.get(P.edit_mode._.insert_tab_content), undoSupport),\n        deferUntil: DOMCONTENTLOADED,\n    }),\n    operation({\n        description: \"add edit mode keyboard shortcut (insert link)\",\n        condition: () => isInEditMode && Preferences.get(P.edit_mode._.keyboard_shortcuts),\n        dependencies: {\n            textarea: SELECTOR.textarea,\n        },\n        action: keyboardShortcutsEditMode.insertLink(undoSupport),\n        deferUntil: DOMCONTENTLOADED,\n    }),\n    operation({\n        description: \"add edit mode keyboard shortcut (submit)\",\n        condition: () => isInEditMode && Preferences.get(P.edit_mode._.keyboard_shortcuts),\n        dependencies: {\n            textarea: SELECTOR.textarea,\n            saveButton: SELECTOR.saveButton,\n        },\n        action: keyboardShortcutsEditMode.submit,\n        deferUntil: DOMCONTENTLOADED,\n    }),\n    operation({\n        description: \"add edit mode keyboard shortcut (preview)\",\n        condition: () => isInEditMode && !isInEditMode_marketContact && Preferences.get(P.edit_mode._.keyboard_shortcuts),\n        dependencies: {\n            textarea: SELECTOR.textarea,\n            previewButton: SELECTOR.previewButton,\n        },\n        action: keyboardShortcutsEditMode.preview,\n        deferUntil: DOMCONTENTLOADED,\n    }),\n    operation({\n        description: \"add quick reply keyboard shortcut (insert link)\",\n        condition: () => isReadingThread && Preferences.get(P.edit_mode._.keyboard_shortcuts_in_quick_reply),\n        dependencies: {\n            textarea: SELECTOR.textarea,\n        },\n        action: keyboardShortcutsEditMode.insertLink(undoSupport),\n    }),\n    operation({\n        description: \"add quick reply keyboard shortcut (submit)\",\n        condition: () => isReadingThread && Preferences.get(P.edit_mode._.keyboard_shortcuts_in_quick_reply),\n        dependencies: {\n            textarea: SELECTOR.textarea,\n            saveButton: SELECTOR.saveButtonQuickReply,\n        },\n        action: keyboardShortcutsEditMode.submit,\n    }),\n    operation({\n        description: \"add quick reply keyboard shortcut (preview)\",\n        condition: () => isReadingThread && Preferences.get(P.edit_mode._.keyboard_shortcuts_in_quick_reply),\n        dependencies: {\n            textarea: SELECTOR.textarea,\n            previewButton: SELECTOR.previewButtonQuickReply,\n        },\n        action: keyboardShortcutsEditMode.preview,\n    }),\n];\n\nexport default OPERATIONS;\n","import * as CONFIG from \"~src/config\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nexport default (uninterestingIDs: readonly number[]) => (e: {\n    body: HTMLElement,\n}) => {\n    const rows = e.body.querySelectorAll<HTMLTableRowElement>(\"tr.forumThread\");\n    for (const row of rows) {\n        const forumLink = row.querySelector<HTMLAnchorElement>(\"a.forum\");\n        if (forumLink === null) {\n            return `Could not find forum link.`;\n        }\n        const match = forumLink.href.match(SITE.PATH.FORUM_CATEGORY);\n        if (match === null) {\n            return `Could not extract forum ID from this link: ${forumLink.outerHTML}`;\n        }\n        const id = parseInt(match[1]);\n        if (uninterestingIDs.includes(id)) {\n            row.classList.add(CONFIG.CLASS.uninteresting);\n            row.title = T.general.uninteresting_subforum(forumLink.textContent as string);\n        }\n    }\n};\n","import * as Storage from \"ts-storage\";\n\nimport * as CONFIG from \"~src/config\";\nimport { P, Preferences } from \"~src/preferences\";\n\nexport default (e: {\n    textarea: HTMLElement,\n    previewButton: HTMLElement,\n}) => {\n    // Caret position is only saved when the user requests a preview; it is\n    // wiped on any other page unload.\n    const textarea = e.textarea as HTMLTextAreaElement;\n    const savedPosition = Storage.get_session(CONFIG.KEY.caret_position, NaN).value;\n    // The check below is done here instead of as a condition for the entire\n    // operation, because we need the wiping to be done even if the user has\n    // disabled remember_caret_position.\n    if (Preferences.get(P.edit_mode._.remember_caret_position) && isNaturalNumber(savedPosition)) {\n        placeCaretIn(textarea, savedPosition);\n    }\n    const wipeSavedPosition = () => Storage.remove_session(CONFIG.KEY.caret_position);\n    window.addEventListener(\"unload\", wipeSavedPosition);\n    e.previewButton.addEventListener(\"click\", () => {\n        savePositionIn(textarea);\n        window.removeEventListener(\"unload\", wipeSavedPosition);\n    });\n};\n\nfunction savePositionIn(textarea: HTMLTextAreaElement): void {\n    Storage.set_session(CONFIG.KEY.caret_position, textarea.selectionEnd);\n}\n\nfunction placeCaretIn(textarea: HTMLTextAreaElement, cursorPosition: number): void {\n    textarea.setSelectionRange(cursorPosition, cursorPosition);\n}\n\nfunction isNaturalNumber(x: number): boolean {\n    return x % 1 === 0 && x >= 0;\n}\n","import { insertIn, wrapIn } from \"./logic/textarea\";\n\ndeclare namespace Tanuki { const Templates: any; }\n\nexport default () => {\n    /*\n    SweClockers' built-in functions use `.value`, which kills undo history.\n    This operation replaces them with our own `text-field-edit`-based versions, thereby reintroducing undo/redo support in supported browsers.\n    Our versions sort of mimic the default ones, but they feature more intuitive behavior, such as keeping the selection when a wrap tool (e.g. B/U/I) is used.\n\n    We don't care about protecting data in the absence of undo support; I assume SweClockers only ever modify textarea content \"safely\" (i.e. without deleting anything).\n    */\n    try { // If SweClockers change their \"API\", we want to fail gracefully.\n        Tanuki.Templates.Textarea.Helpers.setSelection = (textarea: HTMLTextAreaElement, replacement: string) => {\n            insertIn(textarea, { string: replacement, replace: true });\n        };\n        Tanuki.Templates.Textarea.Helpers.insertAtCaret = (textarea: HTMLTextAreaElement, before: string, after: string) => {\n            if (after === undefined) {\n                insertIn(textarea, { string: before, replace: true });\n            } else {\n                wrapIn(textarea, { before, after, cursor: \"KEEP_SELECTION\" });\n            }\n        };\n    } catch (err) {\n        return err.toString(); // String conversion is necessary for the error to be handled properly by Userscripter.\n    }\n};\n","import { h } from \"preact\";\n\nimport * as CONFIG from \"~src/config\";\nimport { insertAtTheBeginning, renderIn } from \"~src/operations/logic/render\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nexport default (e: {\n    notificationsBar: HTMLElement,\n}) => {\n    renderIn(e.notificationsBar, insertAtTheBeginning, (\n        // Derived from the other links in the notifications bar.\n        <a\n            href={CONFIG.PATH.PREFERENCES.link(SITE.PATH.SETTINGS.link)}\n            title={T.preferences._.title}\n            class=\"margin-medium-right\"\n        >\n            <svg class=\"icon\" dangerouslySetInnerHTML={{ __html: SITE.ICONS.settings }} />\n            <span class=\"margin-small-left display-none display-l-inherit\">\n                {T.preferences._.shortcut_label}\n            </span>\n        </a>\n    ));\n};\n","import SELECTOR from \"~src/selectors\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nexport default () => { // We can't take the signout button as a dependency, because it only exists on the user's own profile page.\n    const ourUserID = SITE.getUserID();\n    if (ourUserID === undefined) {\n        return `Could not extract current user's ID.`;\n    }\n    const isNotLoggedIn = ourUserID === SITE.USER_ID_NOT_LOGGED_IN;\n    if (isNotLoggedIn) {\n        return;\n    }\n    const isOwnProfilePage = SITE.PATH.PROFILE(ourUserID).test(document.location.pathname);\n    if (!isOwnProfilePage) {\n        return;\n    }\n    const signoutButton = document.querySelector(SELECTOR.signoutButton);\n    if (signoutButton === null) {\n        return `Could not find signout button (${SELECTOR.signoutButton}).`;\n    }\n    signoutButton.addEventListener(\"click\", event => {\n        if (!confirm(T.general.signout_confirmation)) {\n            event.preventDefault();\n        }\n    });\n};\n","import { h } from \"preact\";\n\nimport * as CONFIG from \"~src/config\";\nimport { insertAtTheEnd, renderIn } from \"~src/operations/logic/render\";\nimport * as SITE from \"~src/site\";\nimport * as T from \"~src/text\";\n\nexport default (e: { settingsNavigation: HTMLElement }) => {\n    renderIn(e.settingsNavigation, insertAtTheEnd, (\n        <li title={T.general.preferences_link} class={SITE.CLASS.menuItem}>\n            <a href={CONFIG.PATH.PREFERENCES.link(SITE.PATH.SETTINGS.link)} class={SITE.CLASS.link}>\n                <span class={SITE.CLASS.icon}></span>\n                {\" \"} {/* SweClockers relies on whitespace for spacing here. */}\n                <span class={SITE.CLASS.label}>{T.general.preferences_link}</span>\n            </a>\n        </li>\n    ));\n};\n","export default \"<svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\">\\n    <rect x=\\\"1\\\" y=\\\"5\\\" width=\\\"30\\\" height=\\\"22\\\" stroke=\\\"#444\\\" fill=\\\"#d7d5d1\\\" stroke-width=\\\"2\\\"/>\\n    <polyline points=\\\"1,6  16,17  31,6\\\" stroke=\\\"#444\\\" fill=\\\"none\\\" stroke-width=\\\"2\\\"/>\\n</svg>\\n\";","import { isString } from \"ts-type-guards\";\nimport { log } from \"userscripter\";\n\nimport { P, Preferences } from \"~src/preferences\";\n\nexport default (e: {\n  city: HTMLElement,\n  region: HTMLElement,\n  saveButton: HTMLElement,\n}) => {\n    const cityInput = e.city as HTMLInputElement;\n    const regionSelect = e.region as HTMLSelectElement;\n    if (cityInput.value === \"\") {\n        cityInput.value = Preferences.get(P.general._.location_city);\n    }\n    if (regionSelect.selectedIndex === 0) { // no actual selection\n        regionSelect.value = Preferences.get(P.general._.location_region).toString();\n    }\n    e.saveButton.addEventListener(\"click\", () => {\n        Preferences.set(P.general._.location_city, cityInput.value);\n        const parseResult = P.general._.location_region.fromString(regionSelect.value);\n        if (isString(parseResult)) {\n            log.error(parseResult);\n        } else {\n            Preferences.set(P.general._.location_region, parseResult.value);\n        }\n    });\n};\n","import * as CONFIG from \"~src/config\";\n\nexport default () => {\n    for (const tagName of CONFIG.FOCUSABLE_ELEMENTS) {\n        for (const element of document.querySelectorAll(tagName)) {\n            element.classList.add(CONFIG.CLASS.mousetrap);\n        }\n    }\n};\n","import { Component, h, JSX, render } from \"preact\";\nimport * as Storage from \"ts-storage\";\nimport { log } from \"userscripter\";\n\nimport * as CONFIG from \"~src/config\";\nimport * as T from \"~src/text\";\n\nexport function logger(regularLogger: log.Logger, rootNode: Element): log.Logger {\n    const initOpen = Storage.get_session(CONFIG.KEY.developer_tools_open, false).value;\n    let devTools: DevTools;\n    render(<DevTools initOpen={initOpen} ref={self => { devTools = self; }} />, rootNode);\n    return {\n        ...regularLogger,\n        error: (prefix: string, message: string) => {\n            devTools.log({ kind: \"error\", content: message });\n            regularLogger.error(prefix, message);\n        },\n        warn: (prefix: string, message: string) => {\n            devTools.log({ kind: \"warning\", content: message });\n            regularLogger.warn(prefix, message);\n        },\n    };\n}\n\ntype Kind = \"error\" | \"warning\"\n\ntype Message = {\n    kind: Kind\n    content: string\n}\n\ntype DevToolsProps = {\n    initOpen: boolean\n}\n\ntype DevToolsState = {\n    loggedMessages: readonly Message[]\n    isOpen: boolean\n}\n\nclass DevTools extends Component<DevToolsProps, DevToolsState> {\n    constructor(props: DevToolsProps) {\n        super(props);\n        this.state = {\n            loggedMessages: [],\n            isOpen: props.initOpen,\n        };\n    }\n\n    public log(message: Message) {\n        this.setState(state => ({\n            loggedMessages: [ ...state.loggedMessages, message ],\n        }));\n    }\n\n    render() {\n        const loggedMessages = this.state.loggedMessages;\n        const loggedWarnings = loggedMessages.filter(msg => msg.kind === \"warning\");\n        const loggedErrors = loggedMessages.filter(msg => msg.kind === \"error\");\n        return (\n            <footer id={CONFIG.ID.developerTools} class={this.state.isOpen ? \"open\" : undefined} data-how-many={loggedMessages.length}>\n                <a onClick={_ => {\n                    this.setState(state => {\n                        const newOpenState = !state.isOpen;\n                        Storage.set_session(CONFIG.KEY.developer_tools_open, newOpenState);\n                        return { ...state, isOpen: newOpenState };\n                    });\n                }}>\n                    {summary(loggedErrors.length, \"error\")}\n                    {summary(loggedWarnings.length, \"warning\")}\n                </a>\n                <ol>\n                    {\n                        loggedMessages.length > 0\n                            ? loggedMessages.map(msg => <li class={CONFIG.CLASS.developerTools[msg.kind]}>{msg.content}</li>)\n                            : <li>{T.developer_mode.nothing_logged}</li>\n                    }\n                </ol>\n            </footer>\n        );\n    }\n}\n\nfunction summary(howMany: number, what: Kind): JSX.Element {\n    const icon = ({\n        error: \"\",\n        warning: \"\",\n    } as const)[what];\n    return (\n        <strong data-how-many={howMany} class={CONFIG.CLASS.developerTools[what]} title={T.developer_mode.tooltip[what](howMany)}>\n            {icon}&nbsp;&nbsp;{howMany}\n        </strong>\n    );\n}\n","import { compose } from \"@typed/compose\";\nimport { environment, errors, log, userscripter } from \"userscripter\";\n\nimport * as CONFIG from \"~src/config\";\nimport OPERATIONS from \"~src/operations\";\nimport * as DarkTheme from \"~src/operations/dark-theme\";\nimport * as Developer from \"~src/operations/developer-mode\";\nimport { P, Preferences } from \"~src/preferences\";\nimport * as SITE from \"~src/site\";\nimport STYLESHEETS from \"~src/stylesheets\";\nimport U from \"~src/userscript\";\n\nconst describeFailure = errors.failureDescriber({\n    siteName: SITE.NAME,\n    extensionName: U.name,\n    location: document.location,\n});\n\nDarkTheme.manage(); // In an effort to avoid a bright flash on page load (issue #62), we do this as early as possible.\n\nlog.setLogger(\n    Preferences.get(P.advanced._.developer_mode)\n        ? Developer.logger(console, document.documentElement.appendChild(document.createElement(\"div\")))\n        : console\n);\n\nuserscripter.run({\n    id: U.id,\n    name: U.name,\n    initialAction: () => log.log(`${U.name} ${U.version}`),\n    stylesheets: STYLESHEETS,\n    operationsPlan: {\n        operations: OPERATIONS,\n        interval: CONFIG.OPERATIONS_INTERVAL,\n        tryUntil: environment.DOMCONTENTLOADED,\n        extraTries: CONFIG.OPERATIONS_EXTRA_TRIES,\n        handleFailures: failures => failures.forEach(compose(log.error, describeFailure)),\n    },\n});\n"],"sourceRoot":""}